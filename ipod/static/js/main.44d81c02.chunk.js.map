{"version":3,"sources":["components/previews/index.tsx","components/icons/SadMacIcon.tsx","utils/constants/Screen.ts","utils/constants/Unit.ts","components/ErrorScreen/index.tsx","utils/conversion.ts","hooks/audio/useAudioPlayer.tsx","hooks/audio/useVolumeHandler.ts","hooks/musicKit/useMusicKit.tsx","hooks/musicKit/useMKEventListener.ts","hooks/utils/useEventListener.ts","hooks/navigation/useMenuHideWindow.ts","components/views/AboutView/index.tsx","animation/index.tsx","utils/index.ts","components/views/CoverFlowView/BacksideContent.tsx","components/views/CoverFlowView/AlbumCover.tsx","components/views/CoverFlowView/CoverFlow.tsx","components/views/CoverFlowView/index.tsx","components/previews/GamesPreview.tsx","components/previews/MusicPreview.tsx","components/previews/NowPlayingPreview.tsx","components/previews/ServicePreview.tsx","components/previews/SettingsPreview.tsx","components/views/HomeView/index.tsx","components/views/MusicView/index.tsx","components/views/ArtistsView/index.tsx","components/views/ArtistView/index.tsx","components/views/AlbumsView/index.tsx","components/views/AlbumView/index.tsx","components/views/NowPlayingView/index.tsx","components/views/PlaylistsView/index.tsx","components/views/PlaylistView/index.tsx","components/views/GamesView/index.tsx","components/views/BrickGameView/Game.js","components/views/index.ts","components/views/BrickGameView/index.tsx","components/views/SettingsView/index.tsx","hooks/navigation/useScrollHandler.tsx","providers/WindowProvider.tsx","hooks/navigation/useWindowContext.ts","utils/spotify.ts","hooks/spotify/useSpotifySDK.tsx","hooks/spotify/useSpotifyDataFetcher.ts","hooks/utils/useSettings.tsx","hooks/utils/useDataFetcher.ts","hooks/utils/useEffectOnce.ts","hooks/utils/useInterval.ts","hooks/utils/useTimeout.ts","components/SelectableList/SelectableListItem.tsx","components/SelectableList/index.tsx","components/AuthPrompt/index.tsx","components/Controls/ProgressBar.tsx","components/Controls/Scrubber.tsx","components/LoadingIndicator.tsx","components/Controls/TrackProgress.tsx","components/Controls/VolumeBar.tsx","components/Controls/index.tsx","components/Header/index.tsx","components/KenBurns/index.tsx","components/LoadingScreen/index.tsx","components/NowPlaying/index.tsx","components/ScrollWheel/Knob.jsx","components/ScrollWheel/index.tsx","components/WindowManager/components/ActionSheet.tsx","components/WindowManager/ActionSheetWindowManager/index.tsx","components/WindowManager/CoverFlowWindowManager/index.tsx","components/WindowManager/components/Popup.tsx","components/WindowManager/components/Window.tsx","components/WindowManager/FullScreenWindowManager/index.tsx","components/WindowManager/PopupWindowManager/index.tsx","components/WindowManager/SplitScreenWindowManager/PreviewPanel.tsx","components/WindowManager/SplitScreenWindowManager/index.tsx","components/WindowManager/index.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["PREVIEW","SadMacIcon","width","height","viewBox","fill","xmlns","d","stroke","strokeWidth","fillRule","clipRule","x","y","filter","id","filterUnits","colorInterpolationFilters","floodOpacity","result","in","type","values","stdDeviation","mode","in2","Screen","XS","MediaQuery","Size","Min","Max","ContainerMaxWidth","SM","MD","LG","XL","Unit","XXXL","XXL","XXS","RootContainer","styled","div","Text","p","strings","ErrorScreen","message","showImage","getAppleArtwork","size","url","replace","convertAppleSong","data","name","attributes","href","artwork","albumName","artistName","duration","durationInMillis","trackNumber","convertApplePlaylist","curatorName","description","standard","songs","relationships","tracks","map","convertSpotifyPlaylistSimplified","owner","display_name","uri","images","convertSpotifyPlaylistFull","items","item","album","artists","join","duration_ms","track_number","convertSpotifySongFull","track","convertAppleAlbum","artworkSize","convertSpotifyAlbumSimplified","artist","convertSpotifyAlbumFull","convertSpotifySongSimplified","convertAppleArtist","undefined","albums","convertSpotifyArtistFull","convertAppleMediaItem","mediaItem","artworkURL","playbackDuration","title","convertSpotifyMediaItem","state","track_window","current_track","AudioPlayerContext","createContext","AudioPlayerProvider","children","useSettings","service","isSpotifyAuthorized","isAppleAuthorized","useSpotifySDK","spotifyPlayer","accessToken","deviceId","music","useMusicKit","useState","volume","setVolume","nowPlayingItem","setNowPlayingItem","isPlaying","isPaused","isLoading","currentTime","timeRemaining","percent","playbackInfo","setPlaybackInfo","playAppleMusic","useCallback","queueOptions","a","Error","setQueue","playlist","song","startPosition","play","playSpotify","uris","prevState","fetch","method","body","JSON","stringify","offset","position","headers","Authorization","pause","togglePlayPause","player","togglePlay","skipNext","skipToNextItem","nextTrack","skipPrevious","skipToPreviousItem","previousTrack","updateNowPlayingItem","ConversionUtils","getCurrentState","handleApplePlaybackStateChange","MusicKit","PlaybackStates","playing","paused","loading","waiting","stalled","handleSpotifyPlaybackStateChange","disallows","resuming","updatePlaybackInfo","currentPlaybackTime","currentPlaybackTimeRemaining","currentPlaybackProgress","currentPlaybackDuration","maxTime","Math","round","seekToTime","time","seek","handleChangeVolume","newVolume","localStorage","setItem","VOLUME_KEY","useEventListener","useMKEventListener","useEffect","addListener","savedVolume","parseFloat","getItem","removeListener","Provider","value","useAudioPlayer","useContext","useVolumeHandler","active","setActive","enabled","setIsEnabled","timeoutIdRef","useRef","useEffectOnce","current","clearTimeout","setEnabled","val","setActiveState","setTimeout","increaseVolume","min","decreaseVolume","max","DEVELOPER_TOKEN","MusicKitContext","musicKit","window","setIsAppleAuthorized","setService","isConfigured","hasDevToken","useMemo","getInstance","signIn","isAuthorized","authorize","signOut","unauthorize","MusicKitProvider","setHasDevToken","setIsConfigured","setStreamingService","configure","developerToken","app","build","e","userToken","event","callback","errors","length","addEventListener","removeEventListener","eventName","handler","element","savedHandler","eventListener","useMenuHideWindow","useWindowContext","windowStack","hideWindow","handleClick","Container","Image","img","TitleContainer","Title","h3","Description","ListContainer","AboutView","ViewOptions","about","options","label","useScrollHandler","scrollIndex","alt","src","aria-label","role","activeIndex","slideRightAnimation","variants","closed","open","transition","closing","initial","animate","exit","slideUpAnimation","popInAnimation","scale","opacity","fade","fadeScale","previewSlideRight","noAnimation","getArtwork","formatTime","seconds","guide","s","floor","m","h","gm","gh","isNaN","Infinity","getMediaOptions","onSelect","playNext","playLater","InfoContainer","Subtext","BacksideContent","albumId","setPlayingAlbum","useDataFetcher","inLibrary","index","coverFlow","attrs","props","style","background","backgroundSize","abs","isHidden","isActive","css","midpoint","isSelected","Artwork","Backside","motion","AlbumCover","playingAlbum","isVisible","getOffsetPx","Utils","AnimatePresence","AlbumsContainer","NowPlayingContainer","CoverFlow","setActiveIndex","setMidpoint","containerRef","selectedAlbum","setSelectedAlbum","selectAlbum","handleMenuClick","forwardScroll","backwardScroll","updateMidpoint","getBoundingClientRect","ref","hideArtwork","onHide","CoverFlowView","backgroundColor","GamesPreview","MusicPreview","hasError","artworkUrls","urls","NowPlayingPreview","spotify","apple","none","selected","ServicePreview","imgUrl","text","SettingsPreview","Previews","MUSIC","GAMES","SETTINGS","NOW_PLAYING","SERVICE","HomeView","signInWithApple","signInWithSpotify","showWindow","viewId","component","preview","games","settings","getConditionalOption","signinPopup","listOptions","nowPlaying","home","handleIdleState","activeView","WINDOW_TYPE","FULL","NowPlayingView","MusicView","arr","playlists","isPlayable","push","ArtistsView","emptyMessage","ArtistView","sublabel","imageUrl","longPressOptions","AlbumsView","AlbumView","showNowPlayingView","PlaylistsView","PlaylistView","GamesView","brickGame","BrickGameView","init","this","canvas","document","querySelector","context","getContext","handleCenterClick","inStasis","initialized","moveRight","moveLeft","setupBricks","draw","drawBricks","ball","update","console","log","enterStasis","clearContext","requestAnimationFrame","clearRect","die","lives","reset","bricks","forEach","brick","i","Brick","health","timeout","score","physics","speed","fillStyle","fillRect","resetPosition","direction","centerX","centerY","beginPath","arc","PI","lineWidth","strokeStyle","checkCollisionWithPlayer","checkCollisionWithBricks","splice","prototype","Canvas","BrickGame","Game","SettingsView","signOutApple","signOutSpotify","serviceTypeActionSheet","signOutPopup","SPLIT","COVER_FLOW","mediaActionSheet","ACTION_SHEET","spotifyNotSupportedPopup","POPUP","setPreview","setIndex","handleCheckForPreview","handleForwardScroll","handleBackwardScroll","handleShowView","windowType","handleShowPopup","popupId","handleShowActionSheet","option","handleCenterLongClick","WindowContext","headerTitle","WindowProvider","Views","windowState","setWindowState","prevWindowState","newWindowStack","slice","resetWindows","isWindowActive","setHeaderTitle","ACCESS_TOKEN_KEY","REFRESH_TOKEN_KEY","TOKEN_TIMESTAMP_KEY","getTokens","getExistingTokens","storedAccessToken","storedRefreshToken","_getNewTokens","_shouldRefreshTokens","_getRefreshedTokens","refreshToken","API_URL","credentials","response","json","access_token","_saveTokens","error","URL","urlParams","searchParams","code","get","delete","history","replaceState","toString","isNew","lastRefreshTimestamp","parseInt","now","Date","minuteDiff","SpotifySDKContext","setIsSpotifyAuthorized","isMounted","location","origin","includes","disconnect","removeItem","SpotifySDKProvider","token","setToken","setDeviceId","spotifyPlayerRef","setIsMounted","handleMount","SpotifyUtils","Spotify","Player","getOAuthToken","cb","device_id","connect","onSpotifyWebPlaybackSDKReady","fetchSpotifyApi","endpoint","onError","res","useSpotifyDataFetcher","fetchAlbums","fetchAlbum","fetchArtists","fetchArtist","fetchPlaylists","fetchPlaylist","userId","SELECTED_SERVICE_KEY","SettingsContext","setState","SettingsProvider","memo","settingsState","setSettingsState","spotifyDataFetcher","setIsLoading","setHasError","setData","api","library","include","limit","fetchArtistAlbums","artistRelationship","effect","useInterval","delay","savedCallback","setInterval","clearInterval","useTimeout","cancel","timeoutId","LabelContainer","Label","Sublabel","Icon","SelectableListItem","condition","SelectableList","scrollIntoView","block","StyledImg","defaultMessage","AuthPrompt","icon","setIcon","ProgressContainer","Gloss","Progress","transparent","Diamond","ProgressBar","isScrubber","textAlign","Scrubber","isScrubbing","scrubberTime","setScrubberTime","scrubberPercent","scrubberTimeRemaining","setIsActive","handleSeek","useDebouncedCallback","newTime","scrubForward","scrubBackward","refresh","force","Svg","svg","LoadingIndicator","className","version","strokeLinecap","x1","y1","x2","y2","attributeName","attributeType","keyTimes","dur","begin","repeatCount","calcMode","TrackProgress","VolumeBar","MainContainer","ScrubberContainer","Controls","setIsScrubbing","hidden","IconContainer","Header","zIndex","startedAnimation","KenBurns","stack","setStack","transitioning","setTransitioning","cycleImage","newStack","path","LoadingScreen","MetadataContainer","ArtworkContainer","ControlsContainer","NowPlaying","handlePlaybackChange","completed","CanvasContainer","CenterButton","WheelButton","margin","top","bottom","left","right","Knob","handleLongPress","preventDefault","target","setAttribute","getTime","onLongPress","handleMenuLongPress","onMenuLongPress","handleWheelLongPress","rect","detail","clientX","clientY","rectWidth","findClickQuadrant","getArcToValue","v","startAngle","endAngle","angle","pow","angleArc","clockwise","cursor","cursorExt","acw","getCanvasScale","ctx","devicePixelRatio","screen","deviceXDPI","logicalXDPI","webkitBackingStorePixelRatio","coerceToStep","step","eventToValue","bounds","canvasRef","atan2","w","angleOffset","handleMouseDown","onChange","handleMouseMove","handleMouseUpNoMove","handleTouchStart","handleTouchMove","handleTouchEndNoMove","handleMouseUp","touchIndex","targetTouches","handleTouchEnd","onChangeEnd","rectSize","quadrant","onWheelClick","touch","changedTouches","pageX","pageY","handleEsc","keyCode","handleTextInput","handleWheel","deltaX","deltaY","handleArrowKey","inputStyle","verticalAlign","marginTop","marginLeft","border","outline","font","fontWeight","digits","color","inputColor","fgColor","padding","WebkitAppearance","String","centerButtonRef","createRef","isTouchEnabled","navigator","maxTouchPoints","msMaxTouchPoints","drawCanvas","nextProps","xy","thickness","radius","lineCap","bgColor","canvasClassName","onClick","Component","defaultProps","stopper","disableTextInput","displayInput","WHEEL_QUADRANT","KEY_CODE","centerClickEvent","Event","centerLongClickEvent","forwardScrollEvent","backwardScrollEvent","wheelClickEvent","menuClickEvent","menuLongPressEvent","backClickEvent","forwardClickEvent","playPauseClickEvent","idleEvent","ScrollWheel","count","setCount","dispatchEvent","handleCenterLongPress","handleClockwiseScroll","handleCounterClockwiseScroll","handleResetIdleCheck","handleWheelClick","TOP","BOTTOM","LEFT","RIGHT","handleKeyPress","ARROW_UP","ARROW_LEFT","ARROW_DOWN","ARROW_RIGHT","ENTER","SPACE","ESC","handleScroll","ContentTransitionContainer","OptionText","OptionContainer","highlighted","ActionSheet","windowOptions","data-window-id","ActionSheetWindowManager","data-stack-type","CoverFlowWindowManager","WindowComponent","TitleText","DescriptionText","OptionsContainer","Popup","showHeader","Window","firstInStack","FullScreenWindowManager","PopupWindowManager","PreviewPanel","PreviewComponent","LeftPanel","SplitScreenWindowManager","menuHidden","allHidden","Mask","WindowManager","hasAppleDevToken","splitViewWindows","fullViewWindows","coverFlowWindow","find","actionSheetWindows","popupWindows","isReady","GlobalStyles","createGlobalStyle","Shell","ScreenContainer","App","Boolean","hostname","match","ReactDOM","render","getElementById","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.44d81c02.chunk.js","sourcesContent":["import GamesPreview from './GamesPreview';\nimport MusicPreview from './MusicPreview';\nimport NowPlayingPreview from './NowPlayingPreview';\nimport ServicePreview from './ServicePreview';\nimport SettingsPreview from './SettingsPreview';\n\nexport enum PREVIEW {\n  MUSIC = 'music',\n  GAMES = 'games',\n  SETTINGS = 'settings',\n  NOW_PLAYING = 'nowPlaying',\n  SERVICE = 'service',\n}\n\nexport const Previews = {\n  [PREVIEW.MUSIC]: () => <MusicPreview />,\n  [PREVIEW.GAMES]: () => <GamesPreview />,\n  [PREVIEW.SETTINGS]: () => <SettingsPreview />,\n  [PREVIEW.NOW_PLAYING]: () => <NowPlayingPreview />,\n  [PREVIEW.SERVICE]: () => <ServicePreview />,\n};\n","const SadMacIcon = () => {\n  return (\n    <svg\n      width=\"95\"\n      height=\"124\"\n      viewBox=\"0 0 95 124\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path d=\"M4 2L92 2\" stroke=\"black\" strokeWidth=\"4\" />\n      <path d=\"M16 14L80 14\" stroke=\"black\" strokeWidth=\"4\" />\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M16 4H4V12V64V104H16H80H91V64V12V4H80H16ZM80 12H16V64H80V12Z\"\n        fill=\"#C4C4C4\"\n      />\n      <rect x=\"16\" y=\"16\" width=\"64\" height=\"48\" fill=\"#CBCCFE\" />\n      <path d=\"M93 104L93 3.99999\" stroke=\"black\" strokeWidth=\"4\" />\n      <path d=\"M2 104L2 4\" stroke=\"black\" strokeWidth=\"4\" />\n      <path d=\"M14 64L14 16\" stroke=\"black\" strokeWidth=\"4\" />\n      <path d=\"M82 64L82 16\" stroke=\"white\" strokeWidth=\"4\" />\n      <path d=\"M30 32V24\" stroke=\"black\" strokeWidth=\"4\" />\n      <path d=\"M66 32V24\" stroke=\"black\" strokeWidth=\"4\" />\n      <path d=\"M50 44L50 24\" stroke=\"black\" strokeWidth=\"4\" />\n      <path d=\"M49 42H44\" stroke=\"black\" strokeWidth=\"4\" />\n      <path d=\"M60 54H36\" stroke=\"black\" strokeWidth=\"4\" />\n      <path d=\"M64 58H60\" stroke=\"black\" strokeWidth=\"4\" />\n      <path d=\"M36 58H32\" stroke=\"black\" strokeWidth=\"4\" />\n      <path d=\"M80 86H48\" stroke=\"black\" strokeWidth=\"4\" />\n      <g filter=\"url(#filter0_d)\">\n        <path d=\"M20 94H12\" stroke=\"#18AB1C\" strokeWidth=\"4\" />\n      </g>\n      <g filter=\"url(#filter1_d)\">\n        <path d=\"M20 98H12\" stroke=\"#BF4131\" strokeWidth=\"4\" />\n      </g>\n      <path d=\"M80 90H48\" stroke=\"white\" strokeWidth=\"4\" />\n      <rect x=\"4\" y=\"104\" width=\"88\" height=\"20\" fill=\"black\" />\n      <rect x=\"8\" y=\"108\" width=\"44\" height=\"4\" fill=\"#575757\" />\n      <rect x=\"44\" y=\"108\" width=\"44\" height=\"4\" fill=\"#222222\" />\n      <rect x=\"64\" y=\"112\" width=\"24\" height=\"4\" fill=\"#222222\" />\n      <rect x=\"76\" y=\"116\" width=\"12\" height=\"4\" fill=\"#222222\" />\n      <rect x=\"8\" y=\"112\" width=\"32\" height=\"4\" fill=\"#575757\" />\n      <rect x=\"8\" y=\"116\" width=\"44\" height=\"4\" fill=\"#575757\" />\n      <rect x=\"40\" y=\"112\" width=\"24\" height=\"4\" fill=\"#444444\" />\n      <path d=\"M16 66L80 66\" stroke=\"white\" strokeWidth=\"4\" />\n      <defs>\n        <filter\n          id=\"filter0_d\"\n          x=\"4\"\n          y=\"84\"\n          width=\"24\"\n          height=\"20\"\n          filterUnits=\"userSpaceOnUse\"\n          colorInterpolationFilters=\"sRGB\"\n        >\n          <feFlood floodOpacity=\"0\" result=\"BackgroundImageFix\" />\n          <feColorMatrix\n            in=\"SourceAlpha\"\n            type=\"matrix\"\n            values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\"\n          />\n          <feOffset />\n          <feGaussianBlur stdDeviation=\"4\" />\n          <feColorMatrix\n            type=\"matrix\"\n            values=\"0 0 0 0 0.690196 0 0 0 0 0.952941 0 0 0 0 0.658824 0 0 0 1 0\"\n          />\n          <feBlend\n            mode=\"normal\"\n            in2=\"BackgroundImageFix\"\n            result=\"effect1_dropShadow\"\n          />\n          <feBlend\n            mode=\"normal\"\n            in=\"SourceGraphic\"\n            in2=\"effect1_dropShadow\"\n            result=\"shape\"\n          />\n        </filter>\n        <filter\n          id=\"filter1_d\"\n          x=\"4\"\n          y=\"88\"\n          width=\"24\"\n          height=\"20\"\n          filterUnits=\"userSpaceOnUse\"\n          colorInterpolationFilters=\"sRGB\"\n        >\n          <feFlood floodOpacity=\"0\" result=\"BackgroundImageFix\" />\n          <feColorMatrix\n            in=\"SourceAlpha\"\n            type=\"matrix\"\n            values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\"\n          />\n          <feOffset />\n          <feGaussianBlur stdDeviation=\"4\" />\n          <feColorMatrix\n            type=\"matrix\"\n            values=\"0 0 0 0 0.964706 0 0 0 0 0.745098 0 0 0 0 0.72549 0 0 0 1 0\"\n          />\n          <feBlend\n            mode=\"normal\"\n            in2=\"BackgroundImageFix\"\n            result=\"effect1_dropShadow\"\n          />\n          <feBlend\n            mode=\"normal\"\n            in=\"SourceGraphic\"\n            in2=\"effect1_dropShadow\"\n            result=\"shape\"\n          />\n        </filter>\n      </defs>\n    </svg>\n  );\n};\n\nexport default SadMacIcon;\n","const XS = {\n  MediaQuery: '@media (min-width: 0)',\n  Size: {\n    Min: 0,\n    Max: 575,\n  },\n  ContainerMaxWidth: '100%',\n};\n\nconst SM = {\n  MediaQuery: '@media (min-width: 576px)',\n  Size: {\n    Min: 576,\n    Max: 767,\n  },\n  ContainerMaxWidth: '540px',\n};\n\nconst MD = {\n  MediaQuery: '@media (min-width: 768px)',\n  Size: {\n    Min: 768,\n    Max: 991,\n  },\n  ContainerMaxWidth: '720px',\n};\n\nconst LG = {\n  MediaQuery: '@media (min-width: 992px)',\n  Size: {\n    Min: 992,\n    Max: 1199,\n  },\n  ContainerMaxWidth: '960px',\n};\n\nconst XL = {\n  MediaQuery: '@media (min-width: 1200px)',\n  Size: {\n    Min: 1200,\n    Max: null,\n  },\n  ContainerMaxWidth: '1140px',\n};\n\nconst Screen = {\n  XS,\n  SM,\n  MD,\n  LG,\n  XL,\n};\n\nexport default Screen;\n","const XXXL = '8rem'; // 128px\nconst XXL = '4rem'; // 64px\nconst XL = '2rem'; // 32px\nconst LG = '1.5rem'; // 24px\nconst MD = '1rem'; // 16px\nconst SM = '0.75rem'; // 12px\nconst XS = '0.5rem'; // 8px\nconst XXS = '0.25rem'; // 4px\n\nconst Unit = {\n  XXXL,\n  XXL,\n  XL,\n  LG,\n  MD,\n  SM,\n  XS,\n  XXS,\n};\n\nexport default Unit;\n","import { SadMacIcon } from 'components/icons';\nimport styled from 'styled-components';\nimport { Unit } from 'utils/constants';\n\nconst RootContainer = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n  height: 100%;\n`;\n\nconst Text = styled.p`\n  margin-top: ${Unit.MD};\n  font-size: 14px;\n  max-width: 180px;\n  color: rgb(100, 100, 100);\n`;\n\nconst strings = {\n  defaultMessage: 'Something went wrong',\n};\n\ninterface Props {\n  message?: string;\n  showImage?: React.ReactNode;\n}\n\nconst ErrorScreen = ({ message, showImage = true }: Props) => {\n  return (\n    <RootContainer>\n      <div>\n        {showImage && <SadMacIcon />}\n        <Text>{message ?? strings.defaultMessage}</Text>\n      </div>\n    </RootContainer>\n  );\n};\n\nexport default ErrorScreen;\n","// Artwork Conversion\n\n/** Accepts a url with '{w}' and '{h}' and replaces them with the specified size */\nexport const getAppleArtwork = (size: number | string, url?: string) => {\n  if (!url) {\n    return undefined;\n  }\n\n  return url.replace('{w}', `${size}`).replace('{h}', `${size}`);\n};\n\nexport const convertAppleSong = (data: AppleMusicApi.Song): IpodApi.Song => ({\n  id: data.id,\n  name: data.attributes?.name ?? 'Unknown name',\n  url: data.href ?? '',\n  artwork: { url: getAppleArtwork(100, data.attributes?.artwork?.url) ?? '' },\n  albumName: data.attributes?.albumName,\n  artistName: data.attributes?.artistName,\n  duration: data.attributes?.durationInMillis ?? 0,\n  trackNumber: data.attributes?.trackNumber ?? 0,\n});\n\nexport const convertSpotifySongSimplified = (\n  data: SpotifyApi.TrackObjectSimplified\n): IpodApi.Song => ({\n  id: data.id,\n  name: data.name,\n  url: data.uri,\n  artistName: data.artists.map(({ name }) => name).join(', '),\n  duration: data.duration_ms,\n  trackNumber: data.track_number,\n});\n\nexport const convertSpotifySongFull = (\n  data: SpotifyApi.TrackObjectFull\n): IpodApi.Song => ({\n  id: data.id,\n  name: data.name,\n  url: data.uri,\n  artwork: { url: data.album.images[0]?.url ?? '' },\n  albumName: data.album.name,\n  artistName: data.artists.map(({ name }) => name).join(', '),\n  duration: data.duration_ms,\n  trackNumber: data.track_number,\n});\n\n// Playlist Conversion\n\nexport const convertApplePlaylist = (\n  data: AppleMusicApi.Playlist\n): IpodApi.Playlist => ({\n  id: data.id,\n  name: data.attributes?.name ?? '',\n  url: data.attributes?.url ?? '',\n  curatorName: data.attributes?.curatorName ?? '',\n  artwork: {\n    url: getAppleArtwork(100, data.attributes?.artwork?.url) ?? '',\n  },\n  description: data.attributes?.description?.standard,\n  songs: data.relationships?.tracks?.data.map(convertAppleSong) ?? [],\n});\n\nexport const convertSpotifyPlaylistSimplified = (\n  data: SpotifyApi.PlaylistObjectSimplified\n): IpodApi.Playlist => ({\n  id: data.id,\n  name: data.name,\n  curatorName: data.owner.display_name ?? '',\n  url: data.uri,\n  artwork: { url: data.images[0]?.url ?? '' },\n  description: data.description ?? '',\n  songs: [],\n});\n\nexport const convertSpotifyPlaylistFull = (\n  data: SpotifyApi.PlaylistObjectFull\n): IpodApi.Playlist => ({\n  id: data.uri,\n  name: data.name,\n  curatorName: data.owner.display_name ?? '',\n  url: data.uri,\n  artwork: { url: data.images[0]?.url ?? '' },\n  description: data.description ?? '',\n  songs: data.tracks.items.map((item) => convertSpotifySongFull(item.track)),\n});\n\nexport const convertAppleAlbum = (\n  data: AppleMusicApi.Album,\n  artworkSize?: number\n): IpodApi.Album => ({\n  id: data.id,\n  name: data.attributes?.name ?? '',\n  artistName: data.attributes?.artistName,\n  url: data.attributes?.url ?? '',\n  artwork: {\n    url:\n      getAppleArtwork(artworkSize ?? 100, data.attributes?.artwork?.url) ?? '',\n  },\n  songs: data.relationships?.tracks.data.map(convertAppleSong) ?? [],\n});\n\nexport const convertSpotifyAlbumSimplified = (\n  data: SpotifyApi.AlbumObjectSimplified\n): IpodApi.Album => ({\n  id: data.id,\n  name: data.name,\n  artistName: data.artists.map((artist) => artist.name).join(', '),\n  url: data.uri,\n  artwork: { url: data.images[0]?.url ?? '' },\n  songs: [],\n});\n\nexport const convertSpotifyAlbumFull = (\n  data: SpotifyApi.AlbumObjectFull\n): IpodApi.Album => ({\n  id: data.id,\n  name: data.name,\n  artistName: data.artists.map((artist) => artist.name).join(', '),\n  url: data.uri,\n  artwork: { url: data.images[0]?.url ?? '' },\n  songs: data.tracks.items.map((item) => convertSpotifySongSimplified(item)),\n});\n\nexport const convertAppleArtist = (\n  data: AppleMusicApi.Artist\n): IpodApi.Artist => ({\n  id: data.id,\n  name: data.attributes?.name ?? '',\n  url: data.attributes?.url ?? '',\n  artwork: undefined,\n  albums: data.relationships?.albums?.data.map(convertAppleAlbum) ?? [],\n});\n\nexport const convertSpotifyArtistSimplified = (\n  data: SpotifyApi.ArtistObjectSimplified\n): IpodApi.Artist => ({\n  id: data.id,\n  name: data.name,\n  url: data.uri,\n  artwork: undefined,\n});\n\nexport const convertSpotifyArtistFull = (\n  data: SpotifyApi.ArtistObjectFull\n): IpodApi.Artist => ({\n  id: data.id,\n  name: data.name,\n  url: data.uri,\n  artwork: {\n    url: data.images[0]?.url,\n  },\n});\n\nexport const convertAppleMediaItem = (\n  mediaItem: MusicKit.MediaItem\n): IpodApi.MediaItem => ({\n  albumName: mediaItem.albumName,\n  artistName: mediaItem.artistName,\n  artwork: {\n    url: getAppleArtwork(100, mediaItem.artworkURL) ?? '',\n  },\n  duration: mediaItem.playbackDuration,\n  id: mediaItem.id,\n  name: mediaItem.title,\n  trackNumber: mediaItem.trackNumber,\n  url: '',\n});\n\nexport const convertSpotifyMediaItem = (\n  state: Spotify.PlaybackState\n): IpodApi.MediaItem => {\n  const track = state.track_window.current_track;\n\n  return {\n    albumName: track.album.name,\n    artistName: track.artists.map(({ name }) => name).join(', '),\n    artwork: {\n      url: track.album.images[0]?.url ?? '',\n    },\n    duration: state.duration,\n    id: track.id ?? '',\n    name: track.name,\n    trackNumber: 0,\n    url: track.uri,\n  };\n};\n","import {\n  createContext,\n  useCallback,\n  useContext,\n  useEffect,\n  useState,\n} from 'react';\n\nimport { useEventListener, useMKEventListener } from 'hooks';\nimport * as ConversionUtils from 'utils/conversion';\n\nimport { useMusicKit, useSettings, useSpotifySDK, VOLUME_KEY } from '../';\n\nexport interface AudioPlayerState {\n  playbackInfo: {\n    isPlaying: boolean;\n    isPaused: boolean;\n    isLoading: boolean;\n    currentTime: number;\n    timeRemaining: number;\n    percent: number;\n    duration: number;\n  };\n  nowPlayingItem?: IpodApi.MediaItem;\n  volume: number;\n  play: (queueOptions: IpodApi.QueueOptions) => Promise<void>;\n  pause: () => Promise<void>;\n  seekToTime: (time: number) => void;\n  setVolume: (volume: number) => void;\n  updateNowPlayingItem: () => void;\n  updatePlaybackInfo: () => void;\n}\n\nexport const AudioPlayerContext = createContext<AudioPlayerState>({} as any);\n\ntype AudioPlayerHook = AudioPlayerState;\n\nexport const useAudioPlayer = (): AudioPlayerHook => {\n  const state = useContext(AudioPlayerContext);\n\n  return {\n    ...state,\n  };\n};\n\ninterface Props {\n  children: React.ReactNode;\n}\n\nexport const AudioPlayerProvider = ({ children }: Props) => {\n  const { service, isSpotifyAuthorized, isAppleAuthorized } = useSettings();\n  const { spotifyPlayer, accessToken, deviceId } = useSpotifySDK();\n  const { music } = useMusicKit();\n  const [volume, setVolume] = useState(0.5);\n  const [nowPlayingItem, setNowPlayingItem] = useState<IpodApi.MediaItem>();\n  const [playbackInfo, setPlaybackInfo] = useState<\n    AudioPlayerState['playbackInfo']\n  >({\n    isPlaying: false,\n    isPaused: false,\n    isLoading: false,\n    currentTime: 0,\n    timeRemaining: 0,\n    percent: 0,\n    duration: 0,\n  });\n\n  const playAppleMusic = useCallback(\n    async (queueOptions: IpodApi.QueueOptions) => {\n      if (!isAppleAuthorized) {\n        throw new Error('Unable to play: Not authorized');\n      }\n\n      await music.setQueue({\n        album: queueOptions.album?.id,\n        playlist: queueOptions.playlist?.id,\n        songs: queueOptions.songs?.map((song) => song.url),\n        song: queueOptions.song?.id,\n        // MusicKit has a weird issue where the start position needs to be subtracted by 1.\n        startPosition: queueOptions.startPosition\n          ? queueOptions.startPosition - 1\n          : undefined,\n      });\n\n      await music.play();\n    },\n    [isAppleAuthorized, music]\n  );\n\n  const playSpotify = useCallback(\n    async (queueOptions: IpodApi.QueueOptions) => {\n      if (!isSpotifyAuthorized) {\n        throw new Error('Unable to play: Not authorized');\n      }\n\n      // Spotify only accepts a list of song URIs, so we'll look through each media type provided for songs.\n      const uris = [\n        ...(queueOptions.album?.songs?.map((song) => song.url) ?? []),\n        ...(queueOptions.playlist?.songs?.map((song) => song.url) ?? []),\n        ...(queueOptions.songs?.map((song) => song.url) ?? []),\n        queueOptions.song?.url,\n      ].filter((item) => !!item);\n\n      setPlaybackInfo((prevState) => ({\n        ...prevState,\n        isLoading: true,\n      }));\n\n      await fetch(\n        `https://api.spotify.com/v1/me/player/play?device_id=${deviceId}`,\n        {\n          method: 'PUT',\n          body: JSON.stringify({\n            uris,\n            offset: { position: queueOptions.startPosition },\n          }),\n          headers: {\n            'Content-Type': 'application/json',\n            Authorization: `Bearer ${accessToken}`,\n          },\n        }\n      );\n\n      setPlaybackInfo((prevState) => ({\n        ...prevState,\n        isLoading: false,\n      }));\n    },\n    [accessToken, deviceId, isSpotifyAuthorized]\n  );\n\n  const play = useCallback(\n    async (queueOptions: IpodApi.QueueOptions) => {\n      switch (service) {\n        case 'apple':\n          return playAppleMusic(queueOptions);\n        case 'spotify':\n          return playSpotify(queueOptions);\n        default:\n          throw new Error('Unable to play: service not specified');\n      }\n    },\n    [playAppleMusic, playSpotify, service]\n  );\n\n  const pause = useCallback(async () => {\n    switch (service) {\n      case 'apple':\n        return spotifyPlayer.pause();\n      case 'spotify':\n        return music.pause();\n      default:\n        throw new Error('Unable to play: service not specified');\n    }\n  }, [music, service, spotifyPlayer]);\n\n  const togglePlayPause = useCallback(async () => {\n    if (!nowPlayingItem) {\n      return;\n    }\n\n    switch (service) {\n      case 'apple':\n        if (music.player.isPlaying) {\n          return music.pause();\n        } else if (!music.player.isPlaying) {\n          music.play();\n        }\n        break;\n      case 'spotify':\n        return spotifyPlayer.togglePlay();\n      default:\n        throw new Error('Unable to play: service not specified');\n    }\n  }, [music, nowPlayingItem, service, spotifyPlayer]);\n\n  const skipNext = useCallback(async () => {\n    if (!nowPlayingItem) {\n      return;\n    }\n\n    setPlaybackInfo((prevState) => ({\n      ...prevState,\n      isLoading: true,\n    }));\n\n    switch (service) {\n      case 'apple':\n        if (music.player.nowPlayingItem) {\n          await music.skipToNextItem();\n        }\n        break;\n      case 'spotify':\n        await spotifyPlayer.nextTrack();\n        break;\n      default:\n        throw new Error('Unable to play: service not specified');\n    }\n\n    setPlaybackInfo((prevState) => ({\n      ...prevState,\n      isLoading: false,\n    }));\n  }, [music, nowPlayingItem, service, spotifyPlayer]);\n\n  const skipPrevious = useCallback(async () => {\n    if (!nowPlayingItem) {\n      return;\n    }\n\n    setPlaybackInfo((prevState) => ({\n      ...prevState,\n      isLoading: true,\n    }));\n\n    switch (service) {\n      case 'apple':\n        if (music.player.nowPlayingItem) {\n          await music.skipToPreviousItem();\n        }\n        break;\n      case 'spotify':\n        await spotifyPlayer.previousTrack();\n        break;\n      default:\n        throw new Error('Unable to play: service not specified');\n    }\n\n    setPlaybackInfo((prevState) => ({\n      ...prevState,\n      isLoading: false,\n    }));\n  }, [music, nowPlayingItem, service, spotifyPlayer]);\n\n  const updateNowPlayingItem = useCallback(async () => {\n    let mediaItem: IpodApi.MediaItem | undefined;\n\n    if (service === 'apple' && music.player.nowPlayingItem) {\n      mediaItem = ConversionUtils.convertAppleMediaItem(\n        music.player.nowPlayingItem\n      );\n    } else if (service === 'spotify') {\n      const state = await spotifyPlayer.getCurrentState();\n\n      if (state) {\n        mediaItem = ConversionUtils.convertSpotifyMediaItem(state);\n      }\n    }\n\n    setNowPlayingItem(mediaItem);\n  }, [music.player.nowPlayingItem, service, spotifyPlayer]);\n\n  const handleApplePlaybackStateChange = useCallback(\n    ({ state }: { state: MusicKit.PlaybackStates }) => {\n      let isLoading = false;\n      let isPlaying = false;\n      let isPaused = false;\n\n      switch (state) {\n        case MusicKit.PlaybackStates.playing:\n          isPlaying = true;\n          break;\n        case MusicKit.PlaybackStates.paused:\n          isPaused = true;\n          break;\n        case MusicKit.PlaybackStates.loading:\n        case MusicKit.PlaybackStates.waiting:\n        case MusicKit.PlaybackStates.stalled:\n          isLoading = true;\n          break;\n      }\n\n      setPlaybackInfo((prevState) => ({\n        ...prevState,\n        isPlaying,\n        isPaused,\n        isLoading,\n      }));\n\n      updateNowPlayingItem();\n    },\n    [updateNowPlayingItem]\n  );\n\n  const handleSpotifyPlaybackStateChange = useCallback(\n    (state: Spotify.PlaybackState) => {\n      if (state.disallows.resuming) {\n        setPlaybackInfo((prevState) => ({\n          ...prevState,\n          isPlaying: true,\n          isPaused: false,\n          isLoading: false,\n        }));\n      } else if (state.paused) {\n        setPlaybackInfo((prevState) => ({\n          ...prevState,\n          isPlaying: false,\n          isPaused: true,\n          isLoading: false,\n        }));\n      }\n\n      updateNowPlayingItem();\n    },\n    [updateNowPlayingItem]\n  );\n\n  const updatePlaybackInfo = useCallback(async () => {\n    if (service === 'apple') {\n      setPlaybackInfo((prevState) => ({\n        ...prevState,\n        currentTime: music.player.currentPlaybackTime,\n        timeRemaining: music.player.currentPlaybackTimeRemaining,\n        percent: music.player.currentPlaybackProgress * 100,\n        duration: music.player.currentPlaybackDuration,\n      }));\n    } else if (service === 'spotify') {\n      const state = await spotifyPlayer.getCurrentState();\n      const currentTime = (state?.position ?? 0) / 1000;\n      const maxTime = (state?.duration ?? 0) / 1000;\n      const timeRemaining = maxTime - currentTime;\n      const percent = Math.round((currentTime / maxTime) * 100);\n\n      setPlaybackInfo((prevState) => ({\n        ...prevState,\n        currentTime,\n        timeRemaining,\n        percent,\n        duration: maxTime,\n      }));\n    }\n  }, [music.player, service, spotifyPlayer]);\n\n  const seekToTime = useCallback(\n    async (time: number) => {\n      if (service === 'apple') {\n        await music.player.seekToTime(time);\n      } else if (service === 'spotify') {\n        // Seek to time (in ms)\n        await spotifyPlayer.seek(time * 1000);\n      }\n\n      updatePlaybackInfo();\n    },\n    [music.player, service, spotifyPlayer, updatePlaybackInfo]\n  );\n\n  const handleChangeVolume = useCallback(\n    (newVolume: number) => {\n      if (isSpotifyAuthorized) {\n        spotifyPlayer.setVolume(newVolume);\n      }\n\n      if (isAppleAuthorized) {\n        music.player.volume = newVolume;\n      }\n\n      localStorage.setItem(VOLUME_KEY, `${newVolume}`);\n\n      setVolume(newVolume);\n    },\n    [isAppleAuthorized, isSpotifyAuthorized, music.player, spotifyPlayer]\n  );\n\n  useEventListener('playpauseclick', () => {\n    togglePlayPause();\n  });\n\n  useEventListener('forwardclick', () => {\n    skipNext();\n  });\n\n  useEventListener('backclick', () => {\n    skipPrevious();\n  });\n\n  // Apple playback event listeners\n  useMKEventListener('playbackStateDidChange', handleApplePlaybackStateChange);\n  useMKEventListener('queuePositionDidChange', updateNowPlayingItem);\n\n  useEffect(() => {\n    if (isSpotifyAuthorized) {\n      spotifyPlayer.addListener(\n        'player_state_changed',\n        handleSpotifyPlaybackStateChange\n      );\n\n      const savedVolume = parseFloat(localStorage.getItem(VOLUME_KEY) ?? '0.5');\n\n      handleChangeVolume(savedVolume);\n\n      return () =>\n        spotifyPlayer.removeListener(\n          'player_state_changed',\n          handleSpotifyPlaybackStateChange\n        );\n    }\n  }, [\n    handleChangeVolume,\n    handleSpotifyPlaybackStateChange,\n    isSpotifyAuthorized,\n    spotifyPlayer,\n  ]);\n\n  useEffect(() => {\n    if (isAppleAuthorized) {\n      const savedVolume = parseFloat(localStorage.getItem(VOLUME_KEY) ?? '0.5');\n      handleChangeVolume(savedVolume);\n    }\n  }, [handleChangeVolume, isAppleAuthorized]);\n\n  return (\n    <AudioPlayerContext.Provider\n      value={{\n        playbackInfo,\n        nowPlayingItem,\n        volume,\n        play,\n        pause,\n        seekToTime,\n        setVolume: handleChangeVolume,\n        updateNowPlayingItem,\n        updatePlaybackInfo,\n      }}\n    >\n      {children}\n    </AudioPlayerContext.Provider>\n  );\n};\n\nexport default useAudioPlayer;\n","import { useCallback, useRef, useState } from 'react';\n\nimport { useAudioPlayer, useEffectOnce, useEventListener } from '../';\n\ninterface VolumeHandlerHook {\n  volume: number;\n  active: boolean;\n  setEnabled: (val: boolean) => void;\n}\n\nconst useVolumeHandler = (): VolumeHandlerHook => {\n  const { volume, setVolume } = useAudioPlayer();\n  const [active, setActive] = useState(false);\n  const [enabled, setIsEnabled] = useState(true);\n  const timeoutIdRef = useRef<any>();\n\n  useEffectOnce(() => {\n    /** clear the timeout to prevent memory leaks. */\n    return () => {\n      if (timeoutIdRef.current) {\n        clearTimeout(timeoutIdRef.current);\n      }\n    };\n  });\n\n  /** This is used to disable and reset the \"active\" timeout. */\n  const setEnabled = useCallback((val: boolean) => {\n    if (!val && timeoutIdRef.current) {\n      setActive(false);\n      setIsEnabled(false);\n      clearTimeout(timeoutIdRef.current);\n    } else {\n      setActive(false);\n      setIsEnabled(true);\n      clearTimeout(timeoutIdRef.current);\n    }\n  }, []);\n\n  /** The volume bar is \"active\" for 3 seconds after the last volume update. */\n  const setActiveState = useCallback(() => {\n    if (!enabled) return;\n\n    setActive(true);\n    if (timeoutIdRef.current) {\n      clearTimeout(timeoutIdRef.current);\n    }\n    timeoutIdRef.current = setTimeout(() => {\n      setActive(false);\n    }, 3000);\n  }, [enabled]);\n\n  const increaseVolume = useCallback(() => {\n    setActiveState();\n    if (volume === 1 || !enabled) return;\n\n    const newVolume = Math.min(volume + 0.04, 1);\n\n    setVolume(newVolume);\n  }, [setActiveState, volume, enabled, setVolume]);\n\n  const decreaseVolume = useCallback(() => {\n    setActiveState();\n    if (!enabled) return;\n\n    const newVolume = Math.max(volume - 0.04, 0.01);\n\n    setVolume(newVolume);\n  }, [setActiveState, volume, enabled, setVolume]);\n\n  useEventListener('forwardscroll', increaseVolume);\n  useEventListener('backwardscroll', decreaseVolume);\n  /** Don't mistake a scroll for a click. */\n  useEventListener('wheelclick', () => setActive(false));\n\n  return {\n    setEnabled,\n    volume,\n    active,\n  };\n};\n\nexport default useVolumeHandler;\n","import React, {\n  createContext,\n  memo,\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useState,\n} from 'react';\n\nimport { ErrorScreen } from 'components';\nimport { useEventListener, useMKEventListener, useSettings } from 'hooks';\n\n/**\n * This will be used to connect to the Apple Music API.\n * @see https://developer.apple.com/documentation/applemusicapi/getting_keys_and_creating_tokens\n */\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst DEVELOPER_TOKEN: string | undefined =\n  'eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IlJHWFFEWThYM0MifQ.eyJpYXQiOjE2MTY4ODQ1MDksImV4cCI6MTYzMjQzNjUwOSwiaXNzIjoiRzZIM0NLV005QyJ9.z7NS-8962oumCEaYOUMJfzonO2Y2tAWb_vAF_wwOkDqU8BoWTo6xDg5uG8ZvFeFpMqRoMbBaB_Mr4sxpvJzjPg';\n\nexport interface MusicKitState {\n  musicKit: typeof MusicKit;\n  isConfigured: boolean;\n  hasDevToken: boolean;\n}\n\nexport const MusicKitContext = createContext<MusicKitState>({} as any);\n\nexport type MusicKitHook = MusicKitState & {\n  music: MusicKit.MusicKitInstance;\n  signIn: () => Promise<void>;\n  signOut: () => void;\n};\n\nexport const useMusicKit = (): MusicKitHook => {\n  const musicKit = window.MusicKit;\n  const { setIsAppleAuthorized, isSpotifyAuthorized, setService } =\n    useSettings();\n  const { isConfigured, hasDevToken } = useContext(MusicKitContext);\n  const music = useMemo(() => {\n    if (!isConfigured || !hasDevToken) {\n      return {} as MusicKit.MusicKitInstance;\n    }\n\n    return window.MusicKit.getInstance();\n  }, [hasDevToken, isConfigured]);\n\n  const signIn = useCallback(async () => {\n    if (!music.isAuthorized) {\n      await music.authorize();\n    }\n\n    setService('apple');\n  }, [music, setService]);\n\n  const signOut = useCallback(() => {\n    music.unauthorize();\n    setIsAppleAuthorized(false);\n\n    // Change to Spotify if available.\n    setService(isSpotifyAuthorized ? 'spotify' : undefined);\n  }, [isSpotifyAuthorized, music, setIsAppleAuthorized, setService]);\n\n  return {\n    isConfigured,\n    hasDevToken,\n    musicKit,\n    music,\n    signIn,\n    signOut,\n  };\n};\n\ninterface Props {\n  children: React.ReactNode;\n}\n\nexport const MusicKitProvider = ({ children }: Props) => {\n  const musicKit = window.MusicKit;\n  const [hasDevToken, setHasDevToken] = useState(false);\n  const [isConfigured, setIsConfigured] = useState(false);\n  const { setIsAppleAuthorized, setService: setStreamingService } =\n    useSettings();\n\n  useEffect(() => {\n    try {\n      const music = musicKit.configure({\n        developerToken:\n          DEVELOPER_TOKEN ??\n          new URLSearchParams(window.location.search).get('token') ??\n          undefined,\n        app: {\n          name: 'iPod.js',\n          build: '1.0',\n        },\n      });\n\n      if (music) {\n        setHasDevToken(true);\n      }\n\n      if (music.isAuthorized) {\n        setIsAppleAuthorized(true);\n      }\n    } catch (e) {\n      setHasDevToken(false);\n    }\n  }, [musicKit, setIsAppleAuthorized]);\n\n  useMKEventListener('userTokenDidChange', (e) => {\n    if (e.userToken) {\n      setIsAppleAuthorized(true);\n      setStreamingService('apple');\n    } else {\n      setIsAppleAuthorized(false);\n      setStreamingService(undefined);\n    }\n  });\n\n  useEventListener('musickitconfigured', () => {\n    setIsConfigured(true);\n  });\n\n  return (\n    <MusicKitContext.Provider value={{ musicKit, isConfigured, hasDevToken }}>\n      {isConfigured ? (\n        children\n      ) : (\n        <ErrorScreen message={'Missing Apple developer token'} />\n      )}\n    </MusicKitContext.Provider>\n  );\n};\n\nexport default memo(MusicKitProvider);\n","import { useEffect } from 'react';\n\n/**\n * MusicKit has its own event listener logic that is attached to the `music` instance.\n * This hook allows us to use it anywhere via a hook, similar to useEventListener.\n */\nconst useMKEventListener = (\n  event: keyof typeof MusicKit.Events,\n  callback: (...args: any) => void\n) => {\n  useEffect(() => {\n    const musicKit = window.MusicKit;\n\n    if (musicKit.errors.length) {\n      return;\n    }\n\n    const music = musicKit.getInstance();\n\n    music.addEventListener(event, callback);\n\n    return () => {\n      music.removeEventListener(event, callback);\n    };\n  }, [callback, event]);\n};\n\nexport default useMKEventListener;\n","import { useRef, useEffect } from \"react\";\n\n// Hook\nconst useEventListener = (\n  eventName: string,\n  handler: (...args: any) => void,\n  element = window\n) => {\n  // Create a ref that stores handler\n  const savedHandler = useRef<any>();\n\n  // Update ref.current value if handler changes.\n  // This allows our effect below to always get latest handler ...\n  // ... without us needing to pass it in effect deps array ...\n  // ... and potentially cause effect to re-run every render.\n  useEffect(() => {\n    savedHandler.current = handler;\n  }, [eventName, handler]);\n\n  useEffect(\n    () => {\n      // Make sure element supports addEventListener\n      // On\n      const isSupported = element && element.addEventListener;\n      if (!isSupported) return;\n\n      // Create event listener that calls handler function stored in ref\n      const eventListener = (event: any) =>\n        savedHandler && savedHandler.current && savedHandler.current(event);\n\n      // Add event listener\n      element.addEventListener(eventName, eventListener);\n\n      // Remove event listener on cleanup\n      return () => {\n        element.removeEventListener(eventName, eventListener);\n      };\n    },\n    [eventName, element] // Re-run if eventName or element changes\n  );\n};\n\nexport default useEventListener;\n","import { useCallback } from 'react';\n\nimport { useWindowContext } from 'hooks';\n\nimport useEventListener from '../utils/useEventListener';\n\n/**\n * A quick way to use the menu button as a back button.\n * Provide an ID that matches the ID of the window you want to close.\n */\nconst useMenuHideWindow = (id: string) => {\n  const { windowStack, hideWindow } = useWindowContext();\n\n  const handleClick = useCallback(() => {\n    if (windowStack[windowStack.length - 1].id === id) {\n      hideWindow();\n    }\n  }, [hideWindow, id, windowStack]);\n\n  useEventListener('menuclick', handleClick);\n};\n\nexport default useMenuHideWindow;\n","import { SelectableList, SelectableListOption } from 'components';\nimport { ViewOptions } from 'components/views';\nimport { useMenuHideWindow, useScrollHandler } from 'hooks';\nimport styled from 'styled-components';\nimport { Unit } from 'utils/constants';\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\n\nconst Image = styled.img`\n  height: ${Unit.XL};\n  width: auto;\n  margin: ${Unit.XS};\n`;\n\nconst TitleContainer = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: ${Unit.MD} ${Unit.MD} 0;\n`;\n\nconst Title = styled.h3`\n  margin: 0;\n  font-size: 16px;\n  font-weight: 900;\n`;\n\nconst Description = styled.h3`\n  margin: 0 0 ${Unit.MD};\n  font-size: 14px;\n  font-weight: normal;\n  text-align: center;\n`;\n\nconst ListContainer = styled.div`\n  flex: 1;\n`;\n\nconst AboutView = () => {\n  useMenuHideWindow(ViewOptions.about.id);\n  const options: SelectableListOption[] = [\n    {\n      type: 'Link',\n      label: 'GitHub Repo',\n      url: 'https://github.com/tvillarete/ipod-classic-js',\n    },\n    {\n      type: 'Link',\n      label: 'My Website',\n      url: 'http://tannerv.com',\n    },\n    {\n      type: 'Link',\n      label: 'LinkedIn',\n      url: 'https://linkedin.com/in/tvillarete',\n    },\n  ];\n\n  const [scrollIndex] = useScrollHandler(ViewOptions.about.id, options);\n\n  return (\n    <Container>\n      <ListContainer>\n        <TitleContainer>\n          <Image alt=\"iPod\" src=\"ipod_logo.svg\" />\n          <Title>iPod.js</Title>\n        </TitleContainer>\n        <Description>\n          Made with{' '}\n          <span aria-label=\"heart\" role=\"img\">\n            \n          </span>{' '}\n          by Tanner Villarete\n        </Description>\n        <SelectableList options={options} activeIndex={scrollIndex} />\n      </ListContainer>\n    </Container>\n  );\n};\n\nexport default AboutView;\n","export const slideRightAnimation = {\n  variants: {\n    closed: { x: '100%' },\n    open: {\n      x: 0,\n      transition: { duration: 0.3, type: 'tween' },\n    },\n    closing: {\n      x: '100%',\n      transition: { duration: 0.3, type: 'tween' },\n    },\n  },\n  initial: 'closed',\n  animate: 'open',\n  exit: 'closing',\n};\n\nexport const slideLeftAnimation = {\n  variants: {\n    closed: { x: '-110%' },\n    open: {\n      x: 0,\n      transition: { duration: 0.3, type: 'tween' },\n    },\n    closing: {\n      x: '-110%',\n      transition: { duration: 0.3, type: 'tween' },\n    },\n  },\n  initial: 'closed',\n  animate: 'open',\n  exit: 'closing',\n};\n\nexport const slideUpAnimation = {\n  variants: {\n    closed: { y: '110%' },\n    open: {\n      y: 0,\n      transition: { duration: 0.3, type: 'tween' },\n    },\n    closing: {\n      y: '110%',\n      transition: { duration: 0.3, type: 'tween' },\n    },\n  },\n  initial: 'closed',\n  animate: 'open',\n  exit: 'closing',\n};\n\nexport const popInAnimation = {\n  variants: {\n    closed: { scale: 0.6, opacity: 0 },\n    open: {\n      scale: 1,\n      opacity: 1,\n      transition: { duration: 0.3, type: 'spring' },\n    },\n    closing: {\n      scale: 0.6,\n      opacity: 0,\n      transition: { duration: 0.3, type: 'spring' },\n    },\n  },\n  initial: 'closed',\n  animate: 'open',\n  exit: 'closing',\n};\n\nexport const fade = {\n  variants: {\n    closed: { opacity: 0 },\n    open: { opacity: 1 },\n    closing: {\n      opacity: 0,\n      transition: { duration: 0.3, type: 'tween' },\n    },\n  },\n  initial: 'closed',\n  animate: 'open',\n  exit: 'closing',\n};\n\nexport const fadeScale = {\n  variants: {\n    closed: { opacity: 0, scale: 0.3 },\n    open: {\n      opacity: 1,\n      scale: 1,\n      transition: { duration: 0.5, type: 'tween' },\n    },\n    closing: {\n      opacity: 0,\n      scale: 0.3,\n      transition: { duration: 0.3, type: 'tween' },\n    },\n  },\n  initial: 'closed',\n  animate: 'open',\n  exit: 'closing',\n};\n\nexport const previewSlideRight = {\n  variants: {\n    closed: { x: '130%', opacity: 0 },\n    open: {\n      x: 0,\n      opacity: 1,\n      transition: { duration: 0.4, type: 'tween' },\n    },\n    closing: {\n      x: '130%',\n      opacity: 0,\n      transition: { duration: 0.4, type: 'tween' },\n    },\n  },\n  initial: 'closed',\n  animate: 'open',\n  exit: 'closing',\n};\n\nexport const noAnimation = {\n  variants: {\n    closed: {},\n    open: {},\n    closing: {\n      opacity: 0,\n      transition: { duration: 0.3, type: 'tween' },\n    },\n  },\n  initial: 'closed',\n  animate: 'open',\n  exit: 'closing',\n};\n","import { SelectableListOption } from 'components';\n\n/** Accepts a url with '{w}' and '{h}' and replaces them with the specified size */\nexport const getArtwork = (size: number | string, url?: string) => {\n  if (!url) {\n    return undefined;\n  }\n\n  return url.replace('{w}', `${size}`).replace('{h}', `${size}`);\n};\n\nexport const formatTime = (seconds = 0, guide = seconds) => {\n  let s: number | string = Math.floor(seconds % 60);\n  let m: number | string = Math.floor((seconds / 60) % 60);\n  let h: number | string = Math.floor(seconds / 3600);\n  const gm = Math.floor((guide / 60) % 60);\n  const gh = Math.floor(guide / 3600);\n\n  if (isNaN(seconds) || seconds === Infinity) {\n    h = m = s = '-';\n  }\n\n  h = h > 0 || gh > 0 ? `${h}:` : '';\n  m = `${(h || gm >= 10) && m < 10 ? `0${m}` : m}:`;\n  s = s < 10 ? `0${s}` : s;\n\n  return h + m + s;\n};\n\nexport const setDocumentSongTitle = (song?: AppleMusicApi.Song) => {\n  document.title = song\n    ? `${song.attributes?.name ?? 'Music'} iPod.js`\n    : 'iPod.js';\n};\n\n/** Returns a list of playback options to display in a popup for an album, song, or playlist. */\nexport const getMediaOptions = (\n  type: 'album' | 'song' | 'playlist',\n  id: string\n): SelectableListOption[] => {\n  const music = window.MusicKit.getInstance();\n\n  return [\n    {\n      type: 'Action',\n      label: 'Play Next',\n      onSelect: () =>\n        music.playNext({\n          [type]: id,\n        }),\n    },\n    {\n      type: 'Action',\n      label: 'Play Later',\n      onSelect: () =>\n        music.playLater({\n          [type]: id,\n        }),\n    },\n  ];\n};\n\nexport const isDev = () => window.location.origin.includes('localhost:3000');\n","import { useMemo } from 'react';\n\nimport {\n  LoadingScreen,\n  SelectableList,\n  SelectableListOption,\n} from 'components';\nimport { useDataFetcher, useEventListener, useScrollHandler } from 'hooks';\nimport styled from 'styled-components';\n\nimport ViewOptions from '../';\n\nconst Container = styled.div`\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  top: -28%;\n  bottom: -50%;\n  left: -50%;\n  right: -50%;\n  border: 1px solid lightgray;\n  background: white;\n  transform: rotateY(180deg);\n`;\n\nconst InfoContainer = styled.div`\n  padding: 4px 8px;\n  background: linear-gradient(180deg, #6585ad 0%, #789ab3 100%);\n  border-bottom: 1px solid #6d87a3;\n`;\n\nconst Text = styled.h3`\n  font-size: 16px;\n  margin: 0;\n  color: white;\n`;\n\nconst Subtext = styled(Text)`\n  font-size: 14px;\n`;\n\nconst ListContainer = styled.div`\n  position: relative;\n  flex: 1;\n  overflow: auto;\n`;\n\ninterface Props {\n  albumId: IpodApi.Album['id'];\n  setPlayingAlbum: (val: boolean) => void;\n}\n\nconst BacksideContent = ({ albumId, setPlayingAlbum }: Props) => {\n  const { data: album, isLoading } = useDataFetcher<IpodApi.Album>({\n    name: 'album',\n    id: albumId,\n    inLibrary: true,\n  });\n\n  const options: SelectableListOption[] = useMemo(\n    () =>\n      album?.songs.map((song, index) => ({\n        type: 'Song',\n        label: song.name,\n        queueOptions: {\n          album,\n          startPosition: index,\n        },\n      })) ?? [],\n    [album]\n  );\n  const [scrollIndex] = useScrollHandler(ViewOptions.coverFlow.id, options);\n\n  useEventListener('centerclick', () => setPlayingAlbum(true));\n\n  return (\n    <Container>\n      {isLoading ? (\n        <LoadingScreen />\n      ) : (\n        <>\n          <InfoContainer>\n            <Text>{album?.name}</Text>\n            <Subtext>{album?.artistName}</Subtext>\n          </InfoContainer>\n          <ListContainer>\n            <SelectableList activeIndex={scrollIndex} options={options} />\n          </ListContainer>\n        </>\n      )}\n    </Container>\n  );\n};\n\nexport default BacksideContent;\n","import { fadeScale } from 'animation';\nimport { AnimatePresence, motion } from 'framer-motion';\nimport styled, { css } from 'styled-components';\nimport * as Utils from 'utils';\n\nimport BacksideContent from './BacksideContent';\nimport { Point } from './CoverFlow';\n\nconst getOffsetPx = (offset: number, midpoint: number) => {\n  if (offset === 0) return 0;\n  const val = midpoint - 46 + offset * 48;\n\n  return val + (offset < 0 ? -48 : 24);\n};\n\ninterface ContainerProps {\n  isActive: boolean;\n  isSelected: boolean;\n  isPlaying: boolean;\n  isHidden: boolean;\n  midpoint: Point;\n  offset: number;\n  index: number;\n  activeIndex: number;\n}\n\nconst Container = styled.div.attrs((props: ContainerProps) => ({\n  style: {\n    background: 'transparent',\n    backgroundSize: 'cover',\n  },\n}))<ContainerProps>`\n  z-index: ${(props) => 1 - Math.abs(props.index - props.activeIndex)};\n  position: absolute;\n  height: 8em;\n  width: 8em;\n  transition: transform 0.25s, opacity 0.35s, background 0.35s;\n  transform-style: preserve-3d;\n  -webkit-box-reflect: below 0px -webkit-gradient(linear, left top, left bottom, from(transparent), color-stop(70%, transparent), to(rgba(240, 240, 240, 0.2)));\n  opacity: ${(props) => props.isHidden && 0};\n\n  ${(props) =>\n    props.isActive &&\n    css`\n      transition: transform 0.3s, opacity 0.35s, background 0.35s;\n      transform: translate3d(${props.midpoint.x - 60}px, 4px, 20px)\n        ${props.isSelected && 'rotateY(-180deg) translateY(10%) scale(0.96)'};\n\n      ${props.isSelected &&\n      css`\n        transition: transform 0.5s, opacity 0.35s, background 0.35s;\n        -webkit-box-reflect: none;\n\n        ${Artwork} {\n          opacity: 0;\n        }\n      `};\n\n      ${props.isPlaying &&\n      css`\n        transform: translate(${props.midpoint.x - 135}px, -10px) rotateY(18deg);\n\n        ${Artwork} {\n          opacity: 1;\n        }\n      `};\n    `};\n\n  ${(props) =>\n    !props.isActive &&\n    css`\n      transform: translateX(${props.offset}px) scale(1.1) translateZ(-65px)\n        rotateY(${props.index < props.activeIndex ? '70deg' : '-70deg'});\n    `};\n`;\n\nconst Artwork = styled.img`\n  z-index: 0;\n  position: absolute;\n  height: 8em;\n  width: 8em;\n  transition: opacity 0.5s;\n`;\n\nconst Backside = styled(motion.div)`\n  position: relative;\n  height: 100%;\n  width: 100%;\n`;\n\ninterface Props {\n  index: number;\n  activeIndex: number;\n  midpoint: Point;\n  album: IpodApi.Album;\n  isSelected: boolean;\n  playingAlbum: boolean;\n  setPlayingAlbum: (val: boolean) => void;\n}\n\nconst AlbumCover = ({\n  album,\n  midpoint,\n  index,\n  activeIndex,\n  isSelected,\n  playingAlbum,\n  setPlayingAlbum,\n}: Props) => {\n  const isVisible = index > activeIndex - 15 && index < activeIndex + 15;\n  const isActive = index === activeIndex;\n  const offset = getOffsetPx(index - activeIndex, midpoint.x);\n  const isHidden = !isActive && playingAlbum;\n\n  return isVisible ? (\n    <Container\n      isActive={isActive}\n      isSelected={isSelected}\n      isHidden={isHidden}\n      midpoint={midpoint}\n      offset={offset}\n      index={index}\n      activeIndex={activeIndex}\n      isPlaying={isSelected && playingAlbum}\n    >\n      <Artwork src={Utils.getArtwork(300, album.artwork?.url)} />\n      <AnimatePresence>\n        {isSelected && !playingAlbum && (\n          <Backside {...fadeScale}>\n            <BacksideContent\n              albumId={album.id}\n              setPlayingAlbum={setPlayingAlbum}\n            />\n          </Backside>\n        )}\n      </AnimatePresence>\n    </Container>\n  ) : null;\n};\n\nexport default AlbumCover;\n","import { useCallback, useEffect, useRef, useState } from 'react';\n\nimport { fade } from 'animation';\nimport { NowPlaying } from 'components';\nimport { AnimatePresence, motion } from 'framer-motion';\nimport { useEventListener, useWindowContext } from 'hooks';\nimport styled from 'styled-components';\n\nimport AlbumCover from './AlbumCover';\n\nexport type Point = {\n  x: number;\n  y: number;\n};\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n`;\n\nconst AlbumsContainer = styled.div`\n  z-index: 2;\n  position: relative;\n  display: flex;\n  flex-wrap: nowrap;\n  flex: 1;\n  padding-top: 8%;\n  -webkit-overflow-scrolling: touch; /* [3] */\n  -ms-overflow-style: -ms-autohiding-scrollbar;\n  perspective: 500px;\n`;\n\nconst InfoContainer = styled(motion.div)`\n  z-index: 0;\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 30%;\n`;\n\nconst NowPlayingContainer = styled(motion.div)`\n  z-index: 1;\n  position: absolute;\n  top: 20px;\n  bottom: 0;\n  left: 0;\n  right: 0;\n`;\n\nconst Text = styled.h3`\n  margin: 0;\n  font-size: 16px;\n  text-align: center;\n\n  :first-of-type {\n    margin-top: 24px;\n  }\n`;\n\ninterface Props {\n  albums: IpodApi.Album[];\n}\n\nconst CoverFlow = ({ albums }: Props) => {\n  const [activeIndex, setActiveIndex] = useState(0);\n  const [midpoint, setMidpoint] = useState<Point>({ x: 0, y: 0 });\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [selectedAlbum, setSelectedAlbum] = useState<IpodApi.Album>();\n  const [playingAlbum, setPlayingAlbum] = useState(false);\n  const { hideWindow } = useWindowContext();\n\n  const selectAlbum = useCallback(() => {\n    if (!selectedAlbum) {\n      const album = albums[activeIndex];\n      setSelectedAlbum(album);\n    }\n  }, [activeIndex, albums, selectedAlbum]);\n\n  const handleMenuClick = useCallback(() => {\n    if (selectedAlbum && playingAlbum) {\n      setPlayingAlbum(false);\n    } else if (selectedAlbum) {\n      setSelectedAlbum(undefined);\n    } else {\n      hideWindow();\n    }\n  }, [hideWindow, playingAlbum, selectedAlbum]);\n\n  const forwardScroll = useCallback(() => {\n    if (activeIndex < albums.length - 1 && !selectedAlbum && !playingAlbum) {\n      setActiveIndex(activeIndex + 1);\n    }\n  }, [activeIndex, albums.length, playingAlbum, selectedAlbum]);\n\n  const backwardScroll = useCallback(() => {\n    if (activeIndex > 0 && !selectedAlbum && !playingAlbum) {\n      setActiveIndex(activeIndex - 1);\n    }\n  }, [activeIndex, playingAlbum, selectedAlbum]);\n\n  const updateMidpoint = useCallback(() => {\n    if (containerRef.current) {\n      const { width, height } = containerRef.current.getBoundingClientRect();\n      setMidpoint({ x: width / 2, y: height / 2 });\n    }\n  }, []);\n\n  useEffect(updateMidpoint, [updateMidpoint]);\n\n  useEventListener('centerclick', selectAlbum);\n  useEventListener('menuclick', handleMenuClick);\n  useEventListener('forwardscroll', forwardScroll);\n  useEventListener('backwardscroll', backwardScroll);\n\n  return (\n    <Container>\n      <AlbumsContainer ref={containerRef}>\n        {albums.map((album, index) => (\n          <AlbumCover\n            key={`cf-artwork-${album.id}`}\n            index={index}\n            activeIndex={activeIndex}\n            midpoint={midpoint}\n            album={album}\n            playingAlbum={playingAlbum}\n            isSelected={!!selectedAlbum && album.id === selectedAlbum.id}\n            setPlayingAlbum={setPlayingAlbum}\n          />\n        ))}\n      </AlbumsContainer>\n\n      <AnimatePresence>\n        {albums.length && !playingAlbum && (\n          <InfoContainer {...fade}>\n            <Text>{albums[activeIndex]?.name}</Text>\n            {/* TODO: Add artistName */}\n            {/* <Text>{albums[activeIndex]?.artistName}</Text> */}\n          </InfoContainer>\n        )}\n        {playingAlbum && (\n          <NowPlayingContainer {...fade}>\n            <NowPlaying hideArtwork onHide={handleMenuClick} />\n          </NowPlayingContainer>\n        )}\n      </AnimatePresence>\n    </Container>\n  );\n};\n\nexport default CoverFlow;\n","import React, { useCallback } from 'react';\n\nimport { AuthPrompt, LoadingScreen } from 'components';\nimport {\n  useDataFetcher,\n  useEventListener,\n  useSettings,\n  useWindowContext,\n} from 'hooks';\nimport styled from 'styled-components';\n\nimport CoverFlow from './CoverFlow';\n\nconst Container = styled.div`\n  flex: 1;\n`;\n\nconst CoverFlowView = () => {\n  const { hideWindow } = useWindowContext();\n  const { isAuthorized } = useSettings();\n  const { data: albums, isLoading } = useDataFetcher<IpodApi.Album[]>({\n    name: 'albums',\n    artworkSize: 350,\n  });\n\n  const handleMenuClick = useCallback(() => {\n    if (!isAuthorized || isLoading) {\n      hideWindow();\n    }\n  }, [hideWindow, isAuthorized, isLoading]);\n\n  useEventListener('menuclick', handleMenuClick);\n\n  return (\n    <Container>\n      {isLoading ? (\n        <LoadingScreen backgroundColor=\"white\" />\n      ) : !isAuthorized ? (\n        <AuthPrompt message=\"Sign in to view Cover Flow\" />\n      ) : (\n        <CoverFlow albums={albums ?? []} />\n      )}\n    </Container>\n  );\n};\n\nexport default CoverFlowView;\n","import { motion } from 'framer-motion';\nimport styled from 'styled-components';\nimport { Unit } from 'utils/constants';\n\nconst Container = styled(motion.div)`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  color: white;\n  background: linear-gradient(180deg, #b1b5c0 0%, #686e7a 100%);\n`;\n\nconst Image = styled.img`\n  height: 6em;\n  width: 6em;\n  margin: ${Unit.XS};\n`;\n\nconst Text = styled.h3`\n  margin: 0;\n  font-size: 16px;\n  font-weight: 500;\n`;\n\nconst GamesPreview = () => {\n  return (\n    <Container>\n      <Image src=\"dice.svg\" />\n      <Text>Games</Text>\n    </Container>\n  );\n};\n\nexport default GamesPreview;\n","import { useMemo } from 'react';\n\nimport { previewSlideRight } from 'animation';\nimport { AuthPrompt, KenBurns, LoadingScreen } from 'components';\nimport { motion } from 'framer-motion';\nimport { useDataFetcher, useSettings } from 'hooks';\nimport styled from 'styled-components';\n\nconst Container = styled(motion.div)`\n  z-index: 1;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n`;\n\nconst MusicPreview = () => {\n  const { isSpotifyAuthorized, isAppleAuthorized } = useSettings();\n  const { data: albums, isLoading, hasError } = useDataFetcher<IpodApi.Album[]>(\n    {\n      name: 'albums',\n      artworkSize: 400,\n    }\n  );\n\n  const artworkUrls = useMemo(() => {\n    if (albums && !hasError) {\n      return albums.map((album) => album.artwork?.url ?? '');\n    }\n\n    return [];\n  }, [albums, hasError]);\n\n  return (\n    <Container {...previewSlideRight}>\n      {isLoading ? (\n        <LoadingScreen backgroundColor=\"linear-gradient(180deg, #B1B5C0 0%, #686E7A 100%)\" />\n      ) : !isSpotifyAuthorized && !isAppleAuthorized ? (\n        <AuthPrompt message=\"Sign in to view your library\" />\n      ) : (\n        <KenBurns urls={artworkUrls} />\n      )}\n    </Container>\n  );\n};\n\nexport default MusicPreview;\n","import { motion } from 'framer-motion';\nimport { useAudioPlayer } from 'hooks';\nimport styled from 'styled-components';\nimport * as Utils from 'utils';\n\nconst Container = styled(motion.div)`\n  height: 100%;\n`;\n\nconst Artwork = styled.img`\n  height: 100%;\n  width: auto;\n`;\n\nconst NowPlayingPreview = () => {\n  const { nowPlayingItem } = useAudioPlayer();\n\n  return nowPlayingItem ? (\n    <Container>\n      <Artwork\n        src={Utils.getArtwork(300, nowPlayingItem.artwork?.url)}\n        alt=\"now playing artwork\"\n      />\n    </Container>\n  ) : null;\n};\n\nexport default NowPlayingPreview;\n","import { motion } from 'framer-motion';\nimport { useSettings } from 'hooks';\nimport styled from 'styled-components';\nimport { Unit } from 'utils/constants';\n\nconst Container = styled(motion.div)`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  color: white;\n  background: linear-gradient(180deg, #b1b5c0 0%, #686e7a 100%);\n`;\n\nconst Image = styled.img`\n  height: 6em;\n  width: 6em;\n  margin: ${Unit.XS};\n`;\n\nconst Text = styled.h3`\n  margin: 4px 0 0;\n  font-size: 16px;\n  font-weight: 600;\n`;\n\nconst Subtext = styled(Text)`\n  font-size: 14px;\n  font-weight: 400;\n`;\n\nconst strings = {\n  spotify: 'Spotify',\n  apple: 'Apple Music',\n  none: 'None',\n  selected: 'Selected service',\n};\n\nconst ServicePreview = () => {\n  const { service } = useSettings();\n\n  const imgUrl =\n    service === 'spotify' ? 'spotify_icon.svg' : 'apple_music_icon.svg';\n\n  const text = strings[service ?? 'none'];\n\n  return (\n    <Container>\n      <Image src={imgUrl} />\n      <Text>{text}</Text>\n      <Subtext>{strings.selected}</Subtext>\n    </Container>\n  );\n};\n\nexport default ServicePreview;\n","import { motion } from 'framer-motion';\nimport styled from 'styled-components';\nimport { Unit } from 'utils/constants';\n\nconst Container = styled(motion.div)`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  color: white;\n  background: linear-gradient(180deg, #b1b5c0 0%, #686e7a 100%);\n`;\n\nconst Image = styled.img`\n  height: 4em;\n  width: 4em;\n  margin: ${Unit.XS};\n`;\n\nconst Text = styled.h3`\n  margin: 0;\n  font-size: 16px;\n  font-weight: 500;\n`;\n\nconst Subtext = styled.h3`\n  margin: 0;\n  font-size: 14px;\n  font-weight: 500;\n`;\n\nconst SettingsPreview = () => {\n  return (\n    <Container>\n      <Image src=\"react_logo.svg\" />\n      <Text>iPod.js</Text>\n      <Subtext>by Tanner V</Subtext>\n    </Container>\n  );\n};\n\nexport default SettingsPreview;\n","import { useCallback, useMemo } from 'react';\n\nimport {\n  getConditionalOption,\n  SelectableList,\n  SelectableListOption,\n} from 'components';\nimport { PREVIEW } from 'components/previews';\nimport {\n  CoverFlowView,\n  GamesView,\n  MusicView,\n  NowPlayingView,\n  SettingsView,\n  ViewOptions,\n  WINDOW_TYPE,\n} from 'components/views';\nimport {\n  useAudioPlayer,\n  useEventListener,\n  useMusicKit,\n  useScrollHandler,\n  useSettings,\n  useSpotifySDK,\n  useWindowContext,\n} from 'hooks';\n\nconst strings = {\n  nowPlaying: 'Now Playing',\n};\n\nconst HomeView = () => {\n  const { isAuthorized } = useSettings();\n  const { signIn: signInWithApple } = useMusicKit();\n  const { nowPlayingItem } = useAudioPlayer();\n  const { signIn: signInWithSpotify } = useSpotifySDK();\n  const { showWindow, windowStack } = useWindowContext();\n\n  const options: SelectableListOption[] = useMemo(\n    () => [\n      {\n        type: 'View',\n        label: 'Cover Flow',\n        viewId: ViewOptions.coverFlow.id,\n        component: () => <CoverFlowView />,\n        preview: PREVIEW.MUSIC,\n      },\n      {\n        type: 'View',\n        label: 'Music',\n        viewId: ViewOptions.music.id,\n        component: () => <MusicView />,\n        preview: PREVIEW.MUSIC,\n      },\n      {\n        type: 'View',\n        label: 'Games',\n        viewId: ViewOptions.games.id,\n        component: () => <GamesView />,\n        preview: PREVIEW.GAMES,\n      },\n      {\n        type: 'View',\n        label: 'Settings',\n        viewId: ViewOptions.settings.id,\n        component: () => <SettingsView />,\n        preview: PREVIEW.SETTINGS,\n      },\n      ...getConditionalOption(!isAuthorized, {\n        type: 'ActionSheet',\n        id: ViewOptions.signinPopup.id,\n        label: 'Sign in',\n        listOptions: [\n          {\n            type: 'Action',\n            label: 'Apple Music',\n            onSelect: signInWithApple,\n          },\n          {\n            type: 'Action',\n            label: 'Spotify',\n            onSelect: signInWithSpotify,\n          },\n        ],\n        preview: PREVIEW.MUSIC,\n      }),\n      ...getConditionalOption(!!nowPlayingItem, {\n        type: 'View',\n        label: strings.nowPlaying,\n        viewId: ViewOptions.nowPlaying.id,\n        component: () => <NowPlayingView />,\n        preview: PREVIEW.NOW_PLAYING,\n      }),\n    ],\n    [isAuthorized, nowPlayingItem, signInWithApple, signInWithSpotify]\n  );\n\n  const [scrollIndex] = useScrollHandler(ViewOptions.home.id, options);\n\n  const handleIdleState = useCallback(() => {\n    const activeView = windowStack[windowStack.length - 1];\n\n    const shouldShowNowPlaying =\n      !!nowPlayingItem &&\n      activeView.id !== ViewOptions.nowPlaying.id &&\n      activeView.id !== ViewOptions.coverFlow.id;\n\n    // Only show the now playing view if we're playing a song and not already on that view.\n    if (shouldShowNowPlaying) {\n      showWindow({\n        id: ViewOptions.nowPlaying.id,\n        type: WINDOW_TYPE.FULL,\n        component: NowPlayingView,\n      });\n    }\n  }, [nowPlayingItem, showWindow, windowStack]);\n\n  useEventListener('idle', handleIdleState);\n\n  return <SelectableList options={options} activeIndex={scrollIndex} />;\n};\n\nexport default HomeView;\n","import React, { useMemo } from 'react';\n\nimport { SelectableList, SelectableListOption } from 'components';\nimport { PREVIEW } from 'components/previews';\nimport {\n  AlbumsView,\n  ArtistsView,\n  CoverFlowView,\n  NowPlayingView,\n  PlaylistsView,\n  ViewOptions,\n} from 'components/views';\nimport { useMenuHideWindow, useMusicKit, useScrollHandler } from 'hooks';\n\nconst MusicView = () => {\n  const { music } = useMusicKit();\n  useMenuHideWindow(ViewOptions.music.id);\n\n  const options: SelectableListOption[] = useMemo(() => {\n    const arr: SelectableListOption[] = [\n      {\n        type: 'View',\n        label: 'Cover Flow',\n        viewId: ViewOptions.coverFlow.id,\n        component: () => <CoverFlowView />,\n        preview: PREVIEW.MUSIC,\n      },\n      {\n        type: 'View',\n        label: 'Playlists',\n        viewId: ViewOptions.playlists.id,\n        component: () => <PlaylistsView />,\n        preview: PREVIEW.MUSIC,\n      },\n      {\n        type: 'View',\n        label: 'Artists',\n        viewId: ViewOptions.artists.id,\n        component: () => <ArtistsView />,\n        preview: PREVIEW.MUSIC,\n      },\n      {\n        type: 'View',\n        label: 'Albums',\n        viewId: ViewOptions.albums.id,\n        component: () => <AlbumsView />,\n        preview: PREVIEW.MUSIC,\n      },\n    ];\n\n    if (music.isAuthorized && music.player?.nowPlayingItem?.isPlayable) {\n      arr.push({\n        type: 'View',\n        label: 'Now playing',\n        viewId: ViewOptions.nowPlaying.id,\n        component: () => <NowPlayingView />,\n        preview: PREVIEW.NOW_PLAYING,\n      });\n    }\n\n    return arr;\n  }, [music.isAuthorized, music.player?.nowPlayingItem?.isPlayable]);\n\n  const [scrollIndex] = useScrollHandler(ViewOptions.music.id, options);\n\n  return <SelectableList options={options} activeIndex={scrollIndex} />;\n};\n\nexport default MusicView;\n","import { useMemo } from 'react';\n\nimport { AuthPrompt, SelectableList, SelectableListOption } from 'components';\nimport {\n  useDataFetcher,\n  useMenuHideWindow,\n  useScrollHandler,\n  useSettings,\n} from 'hooks';\n\nimport ViewOptions, { ArtistView } from '../';\n\nconst ArtistsView = () => {\n  useMenuHideWindow(ViewOptions.artists.id);\n  const { isAuthorized } = useSettings();\n  const { data: artists, isLoading } = useDataFetcher<IpodApi.Artist[]>({\n    name: 'artists',\n  });\n\n  const options: SelectableListOption[] = useMemo(\n    () =>\n      artists?.map((artist) => ({\n        type: 'View',\n        label: artist.name,\n        viewId: ViewOptions.artist.id,\n        component: () => <ArtistView id={artist.id} inLibrary={true} />,\n      })) ?? [],\n    [artists]\n  );\n\n  const [scrollIndex] = useScrollHandler(ViewOptions.artists.id, options);\n\n  return isAuthorized ? (\n    <SelectableList\n      loading={isLoading}\n      options={options}\n      activeIndex={scrollIndex}\n      emptyMessage=\"No saved artists\"\n    />\n  ) : (\n    <AuthPrompt message=\"Sign in to view your artists\" />\n  );\n};\n\nexport default ArtistsView;\n","import { useMemo } from 'react';\n\nimport { SelectableList, SelectableListOption } from 'components';\nimport { AlbumView, ViewOptions } from 'components/views';\nimport { useDataFetcher, useMenuHideWindow, useScrollHandler } from 'hooks';\nimport * as Utils from 'utils';\n\ninterface Props {\n  id: string;\n  /** Get artist from the user's library if true (otherwise search Apple Music). */\n  inLibrary?: boolean;\n}\n\nconst ArtistView = ({ id, inLibrary = false }: Props) => {\n  useMenuHideWindow(ViewOptions.artist.id);\n\n  const { data: albums, isLoading } = useDataFetcher<IpodApi.Album[]>({\n    name: 'artist',\n    id,\n    inLibrary,\n  });\n  const options: SelectableListOption[] = useMemo(\n    () =>\n      albums?.map((album) => ({\n        type: 'View',\n        label: album.name,\n        sublabel: album.artistName,\n        imageUrl: Utils.getArtwork(100, album.artwork?.url),\n        viewId: ViewOptions.album.id,\n        component: () => (\n          <AlbumView id={album.id ?? ''} inLibrary={inLibrary} />\n        ),\n        longPressOptions: Utils.getMediaOptions('album', album.id),\n      })) ?? [],\n    [albums, inLibrary]\n  );\n\n  const [scrollIndex] = useScrollHandler(ViewOptions.artist.id, options);\n\n  return (\n    <SelectableList\n      loading={isLoading}\n      options={options}\n      activeIndex={scrollIndex}\n      emptyMessage=\"No albums by this artist\"\n    />\n  );\n};\n\nexport default ArtistView;\n","import { useMemo } from 'react';\n\nimport { AuthPrompt, SelectableList, SelectableListOption } from 'components';\nimport {\n  useDataFetcher,\n  useMenuHideWindow,\n  useScrollHandler,\n  useSettings,\n} from 'hooks';\nimport * as Utils from 'utils';\n\nimport ViewOptions, { AlbumView } from '../';\n\nconst AlbumsView = () => {\n  const { isAuthorized } = useSettings();\n  useMenuHideWindow(ViewOptions.albums.id);\n\n  const { data: albums, isLoading } = useDataFetcher<IpodApi.Album[]>({\n    name: 'albums',\n  });\n\n  const options: SelectableListOption[] = useMemo(\n    () =>\n      albums?.map((album) => ({\n        type: 'View',\n        label: album.name,\n        sublabel: album.artistName,\n        imageUrl: Utils.getArtwork(50, album.artwork?.url),\n        viewId: ViewOptions.album.id,\n        component: () => <AlbumView id={album.id ?? ''} inLibrary />,\n      })) ?? [],\n    [albums]\n  );\n\n  const [scrollIndex] = useScrollHandler(ViewOptions.albums.id, options);\n\n  return isAuthorized ? (\n    <SelectableList\n      loading={isLoading}\n      options={options}\n      activeIndex={scrollIndex}\n      emptyMessage=\"No albums\"\n    />\n  ) : (\n    <AuthPrompt />\n  );\n};\n\nexport default AlbumsView;\n","import { useMemo } from 'react';\n\nimport { SelectableList, SelectableListOption } from 'components';\nimport { ViewOptions } from 'components/views';\nimport { useDataFetcher, useMenuHideWindow, useScrollHandler } from 'hooks';\nimport * as Utils from 'utils';\n\ninterface Props {\n  id: string;\n  /** Get album from the user's library if true (otherwise search Apple Music). */\n  inLibrary?: boolean;\n}\n\nconst AlbumView = ({ id, inLibrary = false }: Props) => {\n  useMenuHideWindow(ViewOptions.album.id);\n\n  const { data: album, isLoading } = useDataFetcher<IpodApi.Album>({\n    name: 'album',\n    id,\n    inLibrary,\n  });\n\n  const options: SelectableListOption[] = useMemo(\n    () =>\n      album?.songs.map((song, index) => ({\n        type: 'Song',\n        label: song.name,\n        queueOptions: {\n          album,\n          startPosition: index,\n        },\n        showNowPlayingView: true,\n        longPressOptions: Utils.getMediaOptions('song', song.id),\n      })) ?? [],\n    [album]\n  );\n\n  const [scrollIndex] = useScrollHandler(ViewOptions.album.id, options);\n\n  return (\n    <SelectableList\n      loading={isLoading}\n      options={options}\n      activeIndex={scrollIndex}\n      emptyMessage=\"No saved songs\"\n    />\n  );\n};\n\nexport default AlbumView;\n","import { NowPlaying } from 'components';\nimport ViewOptions from 'components/views';\nimport { useMenuHideWindow, useWindowContext } from 'hooks';\n\nconst NowPlayingView = () => {\n  useMenuHideWindow(ViewOptions.nowPlaying.id);\n  const { hideWindow } = useWindowContext();\n\n  return <NowPlaying onHide={hideWindow} />;\n};\n\nexport default NowPlayingView;\n","import { useMemo } from 'react';\n\nimport { AuthPrompt, SelectableList, SelectableListOption } from 'components';\nimport {\n  useDataFetcher,\n  useMenuHideWindow,\n  useScrollHandler,\n  useSettings,\n} from 'hooks';\nimport * as Utils from 'utils';\n\nimport ViewOptions, { PlaylistView } from '../';\n\nconst PlaylistsView = () => {\n  useMenuHideWindow(ViewOptions.playlists.id);\n  const { isAuthorized } = useSettings();\n  const { data, isLoading } = useDataFetcher<IpodApi.Playlist[]>({\n    name: 'playlists',\n  });\n\n  const options: SelectableListOption[] = useMemo(\n    () =>\n      data?.map((playlist) => ({\n        type: 'View',\n        label: playlist.name,\n        sublabel: playlist.description || `By ${playlist.curatorName}`,\n        imageUrl: playlist.artwork?.url,\n        viewId: ViewOptions.playlist.id,\n        component: () => <PlaylistView id={playlist.id} inLibrary />,\n        longPressOptions: Utils.getMediaOptions('playlist', playlist.id),\n      })) ?? [],\n    [data]\n  );\n\n  const [scrollIndex] = useScrollHandler(ViewOptions.playlists.id, options);\n\n  return isAuthorized ? (\n    <SelectableList\n      loading={isLoading}\n      options={options}\n      activeIndex={scrollIndex}\n      emptyMessage=\"No saved playlists\"\n    />\n  ) : (\n    <AuthPrompt message=\"Sign in to view your playlists\" />\n  );\n};\n\nexport default PlaylistsView;\n","import { useMemo } from 'react';\n\nimport { SelectableList, SelectableListOption } from 'components';\nimport { ViewOptions } from 'components/views';\nimport { useDataFetcher, useMenuHideWindow, useScrollHandler } from 'hooks';\nimport * as Utils from 'utils';\n\ninterface Props {\n  id: string;\n  /** Get playlist from the user's library if true (otherwise search Apple Music). */\n  inLibrary?: boolean;\n}\n\nconst PlaylistView = ({ id, inLibrary = false }: Props) => {\n  useMenuHideWindow(ViewOptions.playlist.id);\n  const { data: playlist, isLoading } = useDataFetcher<IpodApi.Playlist>({\n    name: 'playlist',\n    id,\n    inLibrary,\n  });\n\n  const options: SelectableListOption[] = useMemo(\n    () =>\n      playlist?.songs.map((song, index) => ({\n        type: 'Song',\n        label: song.name,\n        sublabel: song.artistName ?? 'Unknown artist',\n        imageUrl: song.artwork?.url,\n        queueOptions: {\n          playlist,\n          startPosition: index,\n        },\n        showNowPlayingView: true,\n        longPressOptions: Utils.getMediaOptions('song', song.id),\n      })) ?? [],\n    [playlist]\n  );\n\n  const [scrollIndex] = useScrollHandler(ViewOptions.playlist.id, options);\n\n  return (\n    <SelectableList\n      loading={isLoading}\n      options={options}\n      activeIndex={scrollIndex}\n      emptyMessage=\"No songs in this playlist\"\n    />\n  );\n};\n\nexport default PlaylistView;\n","import { SelectableList, SelectableListOption } from 'components';\nimport { PREVIEW } from 'components/previews';\nimport { BrickGameView, ViewOptions } from 'components/views';\nimport { useMenuHideWindow, useScrollHandler } from 'hooks';\n\nconst GamesView = () => {\n  useMenuHideWindow(ViewOptions.games.id);\n  const options: SelectableListOption[] = [\n    {\n      type: 'View',\n      label: 'Brick',\n      viewId: ViewOptions.brickGame.id,\n      component: () => <BrickGameView />,\n      preview: PREVIEW.GAMES,\n    },\n  ];\n\n  const [scrollIndex] = useScrollHandler(ViewOptions.games.id, options);\n\n  return <SelectableList options={options} activeIndex={scrollIndex} />;\n};\n\nexport default GamesView;\n","const app = {\n  init: function() {\n    this.canvas = document.querySelector(\"#brickBreakerCanvas\");\n    this.context = this.canvas ? this.canvas.getContext(\"2d\") : null;\n\n    if (!this.context) {\n      console.log(\"Error getting application context\");\n      return; //TODO: notify user\n    }\n\n    window.addEventListener(\"centerclick\", this.handleCenterClick);\n    this.inStasis = false;\n\n    if (!this.initialized) {\n      window.addEventListener(\"forwardscroll\", () => player.moveRight(), true);\n      window.addEventListener(\"backwardscroll\", () => player.moveLeft(), true);\n      window.addEventListener(\"menuclick\", () => (this.inStasis = true));\n\n      this.waiting = true;\n      this.setupBricks();\n      player.draw();\n      this.drawBricks();\n      ball.update();\n      this.update();\n\n      this.initialized = true;\n    }\n\n    return;\n  },\n\n  handleCenterClick: function() {\n    if (app.waiting && !app.inStasis) {\n      app.waiting = false;\n    }\n  },\n\n  enterStasis: function() {},\n\n  update: function() {\n    app.clearContext();\n    player.draw();\n    app.drawBricks();\n\n    ball.update();\n\n    requestAnimationFrame(app.update);\n  },\n\n  clearContext: function() {\n    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    return;\n  },\n\n  die: function() {\n    //TODO: better death!\n    player.position.x = 200;\n    player.lives -= 1;\n\n    if (player.lives < 1) this.reset();\n\n    ball.reset();\n    app.waiting = true;\n  },\n\n  drawBricks: function() {\n    this.bricks.forEach(function(brick) {\n      brick.draw();\n    });\n  },\n\n  //TODO: this will change per level\n  setupBricks: function() {\n    this.bricks = [];\n\n    var i = 0;\n    var brickTop = 50;\n\n    //Setup back row:\n    for (i = 0; i < 10; i++) {\n      const brick = new Brick();\n      brick.position.x = 100 + i * brick.size.width + i;\n      brick.position.y = brickTop;\n      brick.health = 1;\n      this.bricks.push(brick);\n    }\n\n    //Setup middle row:\n    for (i = 0; i < 8; i++) {\n      const brick = new Brick();\n      brick.position.x = 150 + i * brick.size.width + i;\n      brick.position.y = brickTop + brick.size.height + 1;\n      brick.health = 2;\n      this.bricks.push(brick);\n    }\n\n    //Setup front row:\n    for (i = 0; i < 6; i++) {\n      var brick = new Brick();\n      brick.position.x = 200 + i * brick.size.width + i;\n      brick.position.y = brickTop + 2 * brick.size.height + 1;\n      brick.health = 3;\n      this.bricks.push(brick);\n    }\n  },\n\n  reset: function() {\n    player.reset();\n    ball.reset();\n    this.setupBricks();\n  },\n\n  bricks: [],\n\n  canvas: null,\n  context: null,\n  timeout: 33\n};\n\nvar player = {\n  // Defines initial position\n  position: {\n    x: 200,\n    y: 480\n  },\n\n  score: 0,\n\n  lives: 3,\n\n  physics: {\n    speed: 10\n  },\n\n  size: {\n    height: 20,\n    width: 150\n  },\n\n  draw: function() {\n    app.context.fillStyle = \"black\";\n    app.context.fillRect(\n      this.position.x,\n      this.position.y,\n      this.size.width,\n      this.size.height\n    );\n\n    // app.context.textAlign = \"center\";\n    // app.context.fillStyle = \"rgba(0, 0, 0, .2)\";\n\n    // app.context.font = \"18px sans-serif\";\n    // app.context.fillText(\"Lives\", 40, 20);\n    // app.context.fillText(\"Score\", 40, 120);\n\n    // app.context.font = \"48px sans-serif\";\n    // app.context.fillText(this.lives, 40, 75);\n    // app.context.fillText(this.score, 40, 175);\n  },\n\n  moveLeft: function() {\n    if (this.position.x > 0) this.position.x -= this.physics.speed * 1.5;\n  },\n\n  moveRight: function() {\n    if (this.position.x < app.canvas.width - this.size.width)\n      this.position.x += this.physics.speed * 1.5;\n  },\n\n  reset: function() {\n    this.lives = 3;\n    this.score = 0;\n    this.resetPosition();\n  },\n\n  resetPosition: function() {\n    this.position.x = 200;\n  }\n};\n\nvar ball = {\n  position: {\n    x: 0,\n    y: 250\n  },\n\n  size: {\n    height: 10,\n    width: 10\n  },\n\n  physics: {\n    speed: 5\n  },\n\n  direction: {\n    x: 1, //Moving right\n    y: 1 //Moving down\n  },\n\n  draw: function() {\n    app.context.fillStyle = \"transparent\";\n    const context = app.context;\n    const centerX = this.position.x;\n    const centerY = this.position.y;\n    const radius = 10;\n\n    context.beginPath();\n    context.arc(centerX, centerY, radius, 0, 2 * Math.PI, false);\n    context.fillStyle = \"black\";\n    context.fill();\n    context.lineWidth = 5;\n    context.strokeStyle = \"black\";\n    context.stroke();\n  },\n\n  reset: function() {\n    this.position.x = 0;\n    this.position.y = 250;\n    this.direction.x = 1;\n    this.direction.y = 1;\n  },\n\n  update: function() {\n    if (this.position.x <= 0)\n      //Left Bounds\n      this.direction.x = 1;\n    if (this.position.x >= app.canvas.width)\n      //Right Bounds\n      this.direction.x = -1;\n    if (this.position.y <= 0)\n      //Top Bounds\n      this.direction.y = 1;\n    if (this.position.y >= app.canvas.height)\n      //Bottom Bounds\n      app.die(); //TODO: die\n\n    if (!app.waiting && !app.inStasis) {\n      this.checkCollisionWithPlayer();\n      this.checkCollisionWithBricks();\n\n      this.position.x += this.physics.speed * this.direction.x;\n      this.position.y += this.physics.speed * this.direction.y;\n    }\n\n    this.draw();\n  },\n\n  checkCollisionWithPlayer: function() {\n    if (this.position.y + this.size.height < player.position.y) return;\n    if (this.position.y > player.position.y + player.size.height) return;\n    if (this.position.x > player.position.x + player.size.width) return;\n    if (this.position.x + this.size.width < player.position.x) return;\n\n    this.direction.y = -1; //Moving up now\n  },\n\n  checkCollisionWithBricks: function() {\n    var i = 0;\n    for (i = 0; i < app.bricks.length; i++) {\n      var brick = app.bricks[i];\n\n      if (this.position.y + this.size.height < brick.position.y) continue;\n      if (this.position.y > brick.position.y + brick.size.height) continue;\n      if (this.position.x > brick.position.x + brick.size.width) continue;\n      if (this.position.x + this.size.width < brick.position.x) continue;\n\n      /* If the loop makes it this far, we have a collision */\n      brick.health -= 1;\n\n      player.score += 20;\n\n      if (brick.health < 1) app.bricks.splice(i, 1);\n\n      //Update direction based on where we hit the brick\n\n      //Moving towards lower right\n      if (this.direction.x === 1 && this.direction.y === 1) {\n        if (this.position.y > brick.position.y) this.direction.x = -1;\n        else this.direction.y = -1;\n      }\n      //Moving towards lower left\n      else if (this.direction.x === -1 && this.direction.y === 1) {\n        if (this.position.y > brick.position.y) this.direction.x = 1;\n        else this.direction.y = -1;\n      }\n      //Moving towards upper right\n      else if (this.direction.x === 1 && this.direction.y === -1) {\n        if (this.position.y > brick.position.y) this.direction.x = -1;\n        else this.direction.y = -1;\n      }\n      //Moving towards upper-left\n      else if (this.direction.x === -1 && this.direction.y === -1) {\n        if (this.position.y > brick.position.y) this.direction.x = 1;\n        else this.direction.y = -1;\n      }\n    }\n  }\n};\n\nvar Brick = function() {\n  this.health = 3;\n\n  this.size = {\n    height: 20,\n    width: 60\n  };\n\n  //Will be determined on setup\n  this.position = {\n    x: 0,\n    y: 0\n  };\n};\n\nBrick.prototype.draw = function() {\n  // eslint-disable-next-line default-case\n  switch (this.health) {\n    case 3:\n      app.context.fillStyle = \"rgb(0, 240, 0)\"; //Green\n      break;\n    case 2:\n      app.context.fillStyle = \"rgb(255,140,0\"; //Orange?\n      break;\n    case 1:\n      app.context.fillStyle = \"rgb(200, 0, 0)\"; //Red\n      break;\n  }\n\n  if (this.health > 0)\n    app.context.fillRect(\n      this.position.x,\n      this.position.y,\n      this.size.width - 5,\n      this.size.height - 5\n    );\n};\n\nexport default app;\n","export { default as AboutView } from './AboutView';\nexport { default as CoverFlowView } from './CoverFlowView';\nexport { default as HomeView } from './HomeView';\nexport { default as MusicView } from './MusicView';\nexport { default as ArtistsView } from './ArtistsView';\nexport { default as ArtistView } from './ArtistView';\nexport { default as AlbumsView } from './AlbumsView';\nexport { default as AlbumView } from './AlbumView';\nexport { default as NowPlayingView } from './NowPlayingView';\nexport { default as PlaylistsView } from './PlaylistsView';\nexport { default as PlaylistView } from './PlaylistView';\nexport { default as GamesView } from './GamesView';\nexport { default as BrickGameView } from './BrickGameView';\nexport { default as SettingsView } from './SettingsView';\n\nexport enum WINDOW_TYPE {\n  SPLIT = 'SPLIT',\n  FULL = 'FULL',\n  COVER_FLOW = 'COVER_FLOW',\n  ACTION_SHEET = 'ACTION_SHEET',\n  POPUP = 'POPUP',\n}\n\ntype ViewOption = {\n  id: string;\n  title: string;\n  type: WINDOW_TYPE;\n};\n\nexport const ViewOptions: Record<string, ViewOption> = {\n  // Split Screen Views\n  home: { id: 'home', title: 'iPod.js', type: WINDOW_TYPE.SPLIT },\n  music: { id: 'music', title: 'Music', type: WINDOW_TYPE.SPLIT },\n  games: { id: 'games', title: 'Games', type: WINDOW_TYPE.SPLIT },\n  settings: { id: 'settings', title: 'Settings', type: WINDOW_TYPE.SPLIT },\n\n  // Fullscreen Views\n  about: { id: 'about', title: 'About', type: WINDOW_TYPE.FULL },\n  artists: { id: 'artists', title: 'Artists', type: WINDOW_TYPE.FULL },\n  artist: { id: 'artist', title: 'Artist', type: WINDOW_TYPE.FULL },\n  albums: { id: 'albums', title: 'Albums', type: WINDOW_TYPE.FULL },\n  album: { id: 'album', title: 'Album', type: WINDOW_TYPE.FULL },\n  nowPlaying: {\n    id: 'nowPlaying',\n    title: 'Now Playing',\n    type: WINDOW_TYPE.FULL,\n  },\n  playlists: { id: 'playlists', title: 'Playlists', type: WINDOW_TYPE.FULL },\n  playlist: { id: 'playlist', title: 'Playlist', type: WINDOW_TYPE.FULL },\n  brickGame: { id: 'brickGame', title: 'Brick', type: WINDOW_TYPE.FULL },\n\n  // CoverFlow view\n  coverFlow: {\n    id: 'coverFlow',\n    title: 'Cover Flow',\n    type: WINDOW_TYPE.COVER_FLOW,\n  },\n\n  // Action sheets\n  mediaActionSheet: {\n    id: 'mediaActionSheet',\n    title: 'Media Options',\n    type: WINDOW_TYPE.ACTION_SHEET,\n  },\n  serviceTypeActionSheet: {\n    id: 'serviceTypeActionSheet',\n    title: 'Service',\n    type: WINDOW_TYPE.ACTION_SHEET,\n  },\n  signinPopup: {\n    id: 'signinPopup',\n    title: 'Sign in',\n    type: WINDOW_TYPE.ACTION_SHEET,\n  },\n  signOutPopup: {\n    id: 'signOutPopup',\n    title: 'Sign out',\n    type: WINDOW_TYPE.ACTION_SHEET,\n  },\n\n  // Popups\n  spotifyNotSupportedPopup: {\n    id: 'spotifyNotSupportedPopup',\n    title: 'Unsupported browser',\n    type: WINDOW_TYPE.POPUP,\n  },\n};\n\nexport default ViewOptions;\n","import { useEffect } from 'react';\n\nimport { useMenuHideWindow } from 'hooks';\nimport styled from 'styled-components';\n\nimport ViewOptions from '../';\nimport Game from './Game';\n\nconst RootContainer = styled.div`\n  height: 100%;\n  background: rgb(2, 0, 36);\n  background: linear-gradient(\n    90deg,\n    rgba(2, 0, 36, 1) 0%,\n    rgba(107, 173, 255, 1) 0%,\n    rgba(0, 212, 255, 1) 100%\n  );\n`;\n\nconst Canvas = styled.canvas`\n  height: 100%;\n  width: 100%;\n`;\n\nconst BrickGame = () => {\n  useMenuHideWindow(ViewOptions.brickGame.id);\n  useEffect(() => {\n    Game.init();\n  }, []);\n\n  return (\n    <RootContainer>\n      <Canvas width=\"800\" height=\"500\" id=\"brickBreakerCanvas\">\n        <p>Your browser does not support this feature</p>\n      </Canvas>\n    </RootContainer>\n  );\n};\n\nexport default BrickGame;\n","import { useMemo } from 'react';\n\nimport {\n  getConditionalOption,\n  SelectableList,\n  SelectableListOption,\n} from 'components';\nimport { PREVIEW } from 'components/previews';\nimport ViewOptions, { AboutView } from 'components/views';\nimport {\n  useMenuHideWindow,\n  useMusicKit,\n  useScrollHandler,\n  useSettings,\n  useSpotifySDK,\n} from 'hooks';\n\nconst SettingsView = () => {\n  useMenuHideWindow(ViewOptions.settings.id);\n  const { isAuthorized, isAppleAuthorized, isSpotifyAuthorized, service } =\n    useSettings();\n  const { signIn: signInWithApple, signOut: signOutApple } = useMusicKit();\n  const { signOut: signOutSpotify, signIn: signInWithSpotify } =\n    useSpotifySDK();\n\n  const options: SelectableListOption[] = useMemo(\n    () => [\n      {\n        type: 'View',\n        label: 'About',\n        viewId: ViewOptions.about.id,\n        component: () => <AboutView />,\n        preview: PREVIEW.SETTINGS,\n      },\n      /** Add an option to select between services signed into more than one. */\n      ...getConditionalOption(isAuthorized, {\n        type: 'ActionSheet',\n        id: ViewOptions.serviceTypeActionSheet.id,\n        label: 'Choose service',\n        listOptions: [\n          {\n            type: 'Action',\n            label: `Apple Music ${service === 'apple' ? '(Current)' : ''}`,\n            onSelect: () => {\n              signInWithApple();\n            },\n          },\n          {\n            type: 'Action',\n            label: `Spotify ${service === 'spotify' ? '(Current)' : ''}`,\n            onSelect: signInWithSpotify,\n          },\n        ],\n        preview: PREVIEW.SERVICE,\n      }),\n      /** Show the sign in option if not signed into any service. */\n      ...getConditionalOption(!isAuthorized, {\n        type: 'ActionSheet',\n        id: ViewOptions.signinPopup.id,\n        label: 'Sign in',\n        listOptions: [\n          {\n            type: 'Action',\n            label: 'Apple Music',\n            onSelect: () => {\n              signInWithApple();\n            },\n          },\n          {\n            type: 'Action',\n            label: 'Spotify',\n            onSelect: signInWithSpotify,\n          },\n        ],\n        preview: PREVIEW.MUSIC,\n      }),\n      /** Show the signout option for any services that are authenticated. */\n      ...getConditionalOption(isAuthorized, {\n        type: 'ActionSheet',\n        id: ViewOptions.signOutPopup.id,\n        label: 'Sign out',\n        listOptions: [\n          ...getConditionalOption(isAppleAuthorized, {\n            type: 'Action',\n            label: 'Apple Music',\n            onSelect: signOutApple,\n          }),\n          ...getConditionalOption(isSpotifyAuthorized, {\n            type: 'Action',\n            label: 'Spotify',\n            onSelect: signOutSpotify,\n          }),\n        ],\n        preview: PREVIEW.SERVICE,\n      }),\n    ],\n    [\n      isAppleAuthorized,\n      isAuthorized,\n      isSpotifyAuthorized,\n      service,\n      signInWithApple,\n      signInWithSpotify,\n      signOutApple,\n      signOutSpotify,\n    ]\n  );\n\n  const [scrollIndex] = useScrollHandler(ViewOptions.settings.id, options);\n\n  return <SelectableList options={options} activeIndex={scrollIndex} />;\n};\n\nexport default SettingsView;\n","import { useCallback, useEffect, useRef, useState } from 'react';\n\nimport {\n  ActionSheetOptionProps,\n  PopupOptionProps,\n  SelectableListOption,\n} from 'components';\nimport ViewOptions, { NowPlayingView, WINDOW_TYPE } from 'components/views';\nimport { useWindowContext } from 'hooks';\n\nimport { useAudioPlayer, useEffectOnce, useEventListener } from '../';\n\n/** Accepts a list of options and will maintain a scroll index capped at the list's length. */\nconst useScrollHandler = (\n  /** This should match the view's viewId (to enable/disable events for hidden views). */\n  id: string,\n  /** A list of all scrollable items. Used to cap the scrolling to the last element. */\n  options: SelectableListOption[] = []\n): [number] => {\n  const { showWindow, windowStack, setPreview } = useWindowContext();\n  const { play } = useAudioPlayer();\n  const [index, setIndex] = useState(0);\n  const timeoutIdRef = useRef<any>();\n  /** Only fire events on the top-most view. */\n  const isActive = windowStack[windowStack.length - 1].id === id;\n\n  /** Wait until the user stops scrolling to check for a new preview to display. */\n  const handleCheckForPreview = useCallback(\n    (i: number) => {\n      if (timeoutIdRef.current) {\n        clearTimeout(timeoutIdRef.current);\n      }\n      if (!isActive || !options[i]) return;\n      timeoutIdRef.current = setTimeout(() => {\n        const preview = options[i].preview;\n        if (preview) {\n          setPreview(preview);\n        }\n      }, 750);\n\n      return () => {\n        if (timeoutIdRef.current) {\n          clearTimeout(timeoutIdRef.current);\n        }\n      };\n    },\n    [isActive, options, setPreview]\n  );\n\n  const handleForwardScroll = useCallback(() => {\n    if (index < options.length - 1 && isActive) {\n      setIndex(index + 1);\n      handleCheckForPreview(index + 1);\n    }\n  }, [handleCheckForPreview, index, isActive, options.length]);\n\n  const handleBackwardScroll = useCallback(() => {\n    if (index > 0 && isActive) {\n      setIndex(index - 1);\n      handleCheckForPreview(index - 1);\n    }\n  }, [handleCheckForPreview, index, isActive]);\n\n  const handleShowView = useCallback(\n    (\n      id: string,\n      component: React.ReactNode,\n      windowType?: WINDOW_TYPE.FULL | WINDOW_TYPE.SPLIT | WINDOW_TYPE.COVER_FLOW\n    ) => {\n      showWindow({\n        id,\n        type: windowType ?? (ViewOptions[id]?.type as any) ?? WINDOW_TYPE.FULL,\n        component,\n      });\n    },\n    [showWindow]\n  );\n\n  const handleShowPopup = useCallback(\n    (options: PopupOptionProps) => {\n      showWindow({\n        type: WINDOW_TYPE.POPUP,\n        id: options.popupId,\n        title: options.title,\n        description: options.description,\n        listOptions: options.listOptions,\n      });\n    },\n    [showWindow]\n  );\n\n  const handleShowActionSheet = useCallback(\n    (options: ActionSheetOptionProps) => {\n      showWindow({\n        type: WINDOW_TYPE.ACTION_SHEET,\n        id: options.id,\n        listOptions: options.listOptions,\n      });\n    },\n    [showWindow]\n  );\n\n  /** Parses the selected option for a new view to show or song to play. */\n  const handleCenterClick = useCallback(async () => {\n    const option = options[index];\n    if (!isActive || !option) return;\n\n    if (timeoutIdRef.current) {\n      clearTimeout(timeoutIdRef.current);\n    }\n\n    switch (option.type) {\n      case 'Song':\n        await play(option.queueOptions);\n\n        if (option.showNowPlayingView) {\n          handleShowView(ViewOptions.nowPlaying.id, () => <NowPlayingView />);\n        }\n        break;\n      case 'Link':\n        window.open(option.url, '_blank');\n        break;\n      case 'View':\n        handleShowView(option.viewId, option.component, option.windowType);\n        break;\n      case 'Action':\n        option.onSelect();\n        break;\n      case 'Popup':\n        handleShowPopup(option);\n        break;\n      case 'ActionSheet':\n        handleShowActionSheet(option);\n        break;\n    }\n  }, [\n    handleShowActionSheet,\n    handleShowPopup,\n    handleShowView,\n    index,\n    isActive,\n    options,\n    play,\n  ]);\n\n  const handleCenterLongClick = useCallback(async () => {\n    const option = options[index];\n\n    if (!isActive || !option) return;\n\n    if (option.longPressOptions) {\n      showWindow({\n        type: WINDOW_TYPE.ACTION_SHEET,\n        id: ViewOptions.mediaActionSheet.id,\n        listOptions: option.longPressOptions,\n      });\n    }\n  }, [index, isActive, options, showWindow]);\n\n  /** If the list length changes and the index is larger, reset the index to 0. */\n  useEffect(() => {\n    if (options.length && index > options.length - 1) {\n      setIndex(0);\n    }\n  }, [index, options.length]);\n\n  useEffectOnce(() => {\n    if (!options || !options[0]) return;\n\n    const preview = options[0].preview;\n    if (preview) {\n      setPreview(preview);\n    }\n  });\n\n  useEventListener('centerclick', () => {\n    handleCenterClick();\n  });\n  useEventListener('centerlongclick', handleCenterLongClick);\n  useEventListener('forwardscroll', handleForwardScroll);\n  useEventListener('backwardscroll', handleBackwardScroll);\n\n  return [index];\n};\n\nexport default useScrollHandler;\n","import { createContext, useState } from 'react';\n\nimport { SelectableListOption } from 'components';\nimport { PREVIEW } from 'components/previews';\nimport ViewOptions, * as Views from 'components/views';\n\ntype SharedOptionProps = {\n  id: string;\n  type: Views.WINDOW_TYPE;\n  /** Fire an event when the window closes. */\n  onClose?: (...args: any[]) => void;\n  /** Any extra styles you want to pass to the window. */\n  styles?: Record<string, any>;\n};\n\ntype ListViewOptionProps<TComponent extends React.ComponentType<any> = any> = {\n  /** These window types allow you to pass in a custom component to render. */\n  type:\n    | Views.WINDOW_TYPE.SPLIT\n    | Views.WINDOW_TYPE.FULL\n    | Views.WINDOW_TYPE.COVER_FLOW;\n  /** The React component that will be rendered in the window. */\n  component: TComponent;\n  /** Props that will be passed to the component. */\n  props?: Omit<React.ComponentProps<TComponent>, 'id'>;\n  /** Fire an event when the window closes. */\n  onClose?: (...args: any[]) => void;\n};\n\ntype ActionSheetViewOptionProps = {\n  type: Views.WINDOW_TYPE.ACTION_SHEET;\n  listOptions: SelectableListOption[];\n};\n\ntype PopupViewOptionProps = {\n  type: Views.WINDOW_TYPE.POPUP;\n  title: string;\n  description?: string;\n  listOptions: SelectableListOption[];\n};\n\nexport type WindowOptions<\n  TComponent extends React.ComponentType<any> = any\n> = SharedOptionProps &\n  (\n    | ListViewOptionProps<TComponent>\n    | ActionSheetViewOptionProps\n    | PopupViewOptionProps\n  );\n\ninterface WindowState {\n  windowStack: WindowOptions[];\n  headerTitle?: string;\n  preview: PREVIEW;\n}\n\ntype WindowContextType = [\n  WindowState,\n  React.Dispatch<React.SetStateAction<WindowState>>\n];\n\nexport const WindowContext = createContext<WindowContextType>([\n  {\n    windowStack: [],\n    headerTitle: 'iPod.js',\n    preview: PREVIEW.MUSIC,\n  },\n  () => {},\n]);\n\ninterface Props {\n  children: React.ReactChild;\n}\n\nconst WindowProvider = ({ children }: Props) => {\n  const windowStack: WindowOptions[] = [\n    {\n      id: ViewOptions.home.id,\n      type: Views.WINDOW_TYPE.SPLIT,\n      component: Views.HomeView,\n    },\n  ];\n  const [windowState, setWindowState] = useState<WindowState>({\n    windowStack,\n    headerTitle: ViewOptions.home.title,\n    preview: PREVIEW.MUSIC,\n  });\n\n  return (\n    <WindowContext.Provider value={[windowState, setWindowState]}>\n      {children}\n    </WindowContext.Provider>\n  );\n};\n\nexport default WindowProvider;\n","import { useCallback, useContext } from 'react';\n\nimport { PREVIEW } from 'components/previews';\nimport ViewOptions from 'components/views';\nimport { WindowContext, WindowOptions } from 'providers/WindowProvider';\n\nexport interface WindowContextHook {\n  /** Push an instance of WindowOptions to the windowStack. */\n  showWindow: (window: WindowOptions) => void;\n  /** Given an id, remove the window from the stack (otherwise, pop the top window). */\n  hideWindow: (id?: string) => void;\n  /** Removes all windows except the first from the windowStack. */\n  resetWindows: () => void;\n  /** Returns an array of WindowOptions. */\n  windowStack: WindowOptions[];\n  /** Checks if the current window's id matches the given id.\n   * Useful for enabling/disabling scrolling if a window is hidden.\n   */\n  headerTitle?: string;\n  preview: PREVIEW;\n  isWindowActive: (id: string) => boolean;\n  setHeaderTitle: (title?: string) => void;\n  setPreview: (preview: PREVIEW) => void;\n}\n\n/**\n * This hook allows any component to access three parameters:\n *   1. showWindow\n *   2. hideWindow\n *   3. windowStack\n *\n *   Use it whenever you want to open a new window (@type WindowOptions).\n *\n *    @example\n *    `const {showWindow, hideWindow, windowStack} = useWindowContext();`\n */\nexport const useWindowContext = (): WindowContextHook => {\n  const [windowState, setWindowState] = useContext(WindowContext);\n\n  const showWindow = useCallback(\n    (window: WindowOptions) => {\n      setWindowState((prevWindowState) => ({\n        ...prevWindowState,\n        windowStack: [...prevWindowState.windowStack, window],\n        headerTitle: ViewOptions[window.id].title,\n      }));\n    },\n    [setWindowState]\n  );\n\n  const hideWindow = useCallback(\n    (id?: string) => {\n      if (windowState.windowStack.length === 1) return;\n      setWindowState((prevWindowState) => {\n        const newWindowStack = id\n          ? prevWindowState.windowStack.filter(\n              (window: WindowOptions) => window.id !== id\n            )\n          : prevWindowState.windowStack.slice(0, -1);\n\n        return {\n          ...prevWindowState,\n          windowStack: newWindowStack,\n          headerTitle:\n            ViewOptions[newWindowStack[newWindowStack.length - 1].id].title,\n        };\n      });\n    },\n    [setWindowState, windowState.windowStack.length]\n  );\n\n  const resetWindows = useCallback(() => {\n    setWindowState((prevState) => ({\n      ...prevState,\n      windowStack: prevState.windowStack.slice(0, 1),\n    }));\n  }, [setWindowState]);\n\n  const isWindowActive = useCallback(\n    (id: string) => {\n      const { windowStack } = windowState;\n      const curWindow = windowStack[windowStack.length - 1];\n      return curWindow.id === id;\n    },\n    [windowState]\n  );\n\n  const setHeaderTitle = useCallback(\n    (title?: string) => {\n      setWindowState((prevState) => ({\n        ...prevState,\n        headerTitle: title,\n      }));\n    },\n    [setWindowState]\n  );\n\n  const setPreview = useCallback(\n    (preview: PREVIEW) => {\n      setWindowState((prevState) => ({\n        ...prevState,\n        preview,\n      }));\n    },\n    [setWindowState]\n  );\n\n  return {\n    showWindow,\n    hideWindow,\n    resetWindows,\n    isWindowActive,\n    windowStack: windowState.windowStack,\n    headerTitle: windowState.headerTitle,\n    preview: windowState.preview,\n    setHeaderTitle,\n    setPreview,\n  };\n};\n\nexport default useWindowContext;\n","import { API_URL } from 'hooks';\n\nconst ACCESS_TOKEN_KEY = 'spotify_access_token';\nconst REFRESH_TOKEN_KEY = 'spotify_refresh_token';\nconst TOKEN_TIMESTAMP_KEY = 'spotify_token_timestamp';\n\nexport type TokenResponse = {\n  accessToken?: string;\n  refreshToken?: string;\n  /** The user has signed in for the first time. */\n  isNew?: boolean;\n};\n\n/** Determines if an access token has been saved at a prior time,\n * and if so, attempts to refresh the token. If no prior tokens\n * have been set, fetch a brand new one and save it to localStorage.\n */\nexport const getTokens = async (): Promise<TokenResponse> => {\n  const { storedAccessToken, storedRefreshToken } = getExistingTokens();\n\n  if (!storedAccessToken || !storedRefreshToken) {\n    return _getNewTokens();\n  }\n\n  if (_shouldRefreshTokens()) {\n    return _getRefreshedTokens(storedRefreshToken);\n  }\n\n  return {\n    accessToken: storedAccessToken,\n    refreshToken: storedRefreshToken,\n  };\n};\n\nexport const getExistingTokens = () => {\n  const storedAccessToken = localStorage.getItem(ACCESS_TOKEN_KEY) ?? undefined;\n  const storedRefreshToken =\n    localStorage.getItem(REFRESH_TOKEN_KEY) ?? undefined;\n\n  return {\n    storedAccessToken,\n    storedRefreshToken,\n  };\n};\n\nexport const removeExistingTokens = () => {\n  localStorage.removeItem(ACCESS_TOKEN_KEY);\n  localStorage.removeItem(REFRESH_TOKEN_KEY);\n  localStorage.removeItem(TOKEN_TIMESTAMP_KEY);\n};\n\n/** Accepts a refresh token and returns a fresh access token.\n * Valid for 1 hour, at which point the token will expire.\n */\nconst _getRefreshedTokens = async (\n  storedRefreshToken: string\n): Promise<TokenResponse> => {\n  try {\n    const response = await fetch(\n      `${API_URL}/refresh_token?refresh_token=${storedRefreshToken}`,\n      {\n        credentials: 'same-origin',\n        mode: 'cors',\n      }\n    );\n\n    const { access_token: accessToken } = await response.json();\n\n    console.log('Got refreshed tokens:', { accessToken, storedRefreshToken });\n\n    _saveTokens(accessToken, storedRefreshToken);\n\n    return { accessToken, refreshToken: storedRefreshToken };\n  } catch (error) {\n    console.error('Error fetchinng refresh token:', { error });\n  }\n\n  return {\n    accessToken: undefined,\n    refreshToken: undefined,\n  };\n};\n\n/** Accepts a `code` and `state` generated from spotify user authorization,\n * and attempts to fetch a new access and refresh token.\n * Valid for 1 hour, at which point the access token will expire.\n */\nconst _getNewTokens = async (): Promise<TokenResponse> => {\n  const url = new URL(window.document.URL);\n  const urlParams = url.searchParams;\n  const code = urlParams.get('code') ?? undefined;\n  const state = urlParams.get('state') ?? undefined;\n\n  if (!code || !state) {\n    return {};\n  }\n\n  try {\n    const response = await fetch(\n      `${API_URL}/callback?state=${state}&code=${code}`,\n      {\n        credentials: 'same-origin',\n        mode: 'cors',\n      }\n    );\n\n    const { accessToken, refreshToken } = await response.json();\n\n    _saveTokens(accessToken, refreshToken);\n\n    urlParams.delete('code');\n    urlParams.delete('state');\n\n    window.history.replaceState({}, '', url.toString());\n\n    return {\n      accessToken,\n      refreshToken,\n      // The user signed in for the first time. We will set the current streaming service to Spotify\n      isNew: true,\n    };\n  } catch (error) {\n    console.error('error fetching token:', { error });\n  }\n\n  return {\n    accessToken: undefined,\n    refreshToken: undefined,\n  };\n};\n\n/** Checks the last time an access token was requested.\n * If a token has never been requested, return true.\n * If the last refresh was > 30 minutes ago, return true.\n */\nconst _shouldRefreshTokens = () => {\n  const lastRefreshTimestamp = parseInt(\n    localStorage.getItem(TOKEN_TIMESTAMP_KEY) ?? ''\n  );\n  const now = Date.now();\n\n  if (!lastRefreshTimestamp) {\n    return true;\n  }\n\n  //Gets the time difference in minutes.\n  const minuteDiff = Math.round((now - lastRefreshTimestamp) / 1000 / 60);\n  console.log(`Last token refresh: ${minuteDiff} minutes ago`);\n\n  return minuteDiff > 30;\n};\n\nconst _saveTokens = (accessToken?: string, refreshToken?: string) => {\n  if (!accessToken || !refreshToken) {\n    console.error('Error: Attempting to save undefined tokens:', {\n      accessToken,\n      refreshToken,\n    });\n\n    return;\n  }\n\n  localStorage.setItem(ACCESS_TOKEN_KEY, accessToken);\n  localStorage.setItem(REFRESH_TOKEN_KEY, refreshToken);\n  localStorage.setItem(TOKEN_TIMESTAMP_KEY, `${Date.now()}`);\n};\n","import {\n  createContext,\n  memo,\n  useCallback,\n  useContext,\n  useRef,\n  useState,\n} from 'react';\n\nimport ViewOptions, { WINDOW_TYPE } from 'components/views';\nimport { useWindowContext } from 'hooks';\nimport * as Utils from 'utils';\nimport * as SpotifyUtils from 'utils/spotify';\n\nimport { useEffectOnce, useSettings } from '../';\n\nexport const API_URL = 'https://b7d1fdb16506.ngrok.io';\n\nexport interface SpotifySDKState {\n  isMounted: boolean;\n  spotifyPlayer: Spotify.SpotifyPlayer;\n  accessToken?: string;\n  deviceId?: string;\n}\n\nexport const SpotifySDKContext = createContext<SpotifySDKState>({} as any);\n\nexport type SpotifySDKHook = SpotifySDKState & {\n  signIn: () => void;\n  signOut: () => void;\n};\n\nexport const useSpotifySDK = (): SpotifySDKHook => {\n  const {\n    isSpotifyAuthorized,\n    setIsSpotifyAuthorized,\n    isAppleAuthorized,\n    setService,\n  } = useSettings();\n  const { showWindow } = useWindowContext();\n  const state = useContext(SpotifySDKContext);\n\n  /**\n   * Open the Spotify OAuth login page. Once authenticated, the user will be\n   * redirected back to the app.\n   */\n  const signIn = useCallback(() => {\n    if (!state.isMounted) {\n      showWindow({\n        type: WINDOW_TYPE.POPUP,\n        id: ViewOptions.spotifyNotSupportedPopup.id,\n        title: ViewOptions.spotifyNotSupportedPopup.title,\n        description:\n          'Spotify sadly only supports web playback on Chrome (desktop)',\n        listOptions: [\n          {\n            type: 'Action',\n            label: 'Okay ',\n            onSelect: () => {},\n          },\n        ],\n      });\n      return;\n    }\n\n    if (!isSpotifyAuthorized) {\n      window.open(\n        `${API_URL}/${Utils.isDev() ? 'login_dev' : 'login'}`,\n        '_self'\n      );\n    } else {\n      setService('spotify');\n    }\n  }, [isSpotifyAuthorized, setService, showWindow, state.isMounted]);\n\n  const signOut = useCallback(() => {\n    state.spotifyPlayer.disconnect();\n    setIsSpotifyAuthorized(false);\n\n    SpotifyUtils.removeExistingTokens();\n\n    // Change to apple music if available.\n    if (isAppleAuthorized) {\n      setService('apple');\n    } else {\n      setService(undefined);\n    }\n  }, [\n    isAppleAuthorized,\n    setIsSpotifyAuthorized,\n    setService,\n    state.spotifyPlayer,\n  ]);\n\n  return {\n    ...state,\n    signIn,\n    signOut,\n  };\n};\n\ninterface Props {\n  children: React.ReactNode;\n}\n\nexport const SpotifySDKProvider = ({ children }: Props) => {\n  const { setIsSpotifyAuthorized, setService } = useSettings();\n  const [token, setToken] = useState<string>();\n  const [deviceId, setDeviceId] = useState<string>();\n  const spotifyPlayerRef = useRef<Spotify.SpotifyPlayer | undefined>();\n  const [isMounted, setIsMounted] = useState(false);\n\n  /** Fetch access tokens and, if successful, then set up the playback sdk. */\n  const handleMount = useCallback(async () => {\n    const { accessToken, refreshToken, isNew } = await SpotifyUtils.getTokens();\n    setIsMounted(true);\n\n    if (accessToken && refreshToken) {\n      setToken(accessToken);\n\n      const player = new window.Spotify.Player({\n        name: 'iPod Classic',\n        getOAuthToken: async (cb: (token: string) => void) => {\n          const { storedAccessToken } = SpotifyUtils.getExistingTokens();\n\n          if (!storedAccessToken) {\n            console.error(\"ERROR: Didn't find stored access token\");\n            return;\n          }\n\n          cb(storedAccessToken);\n        },\n      });\n\n      player.addListener('ready', ({ device_id }: any) => {\n        console.log({ device_id });\n        setDeviceId(device_id);\n        setIsSpotifyAuthorized(true);\n      });\n\n      player.addListener('authentication_error', ({ message }) => {\n        console.error(`Spotify authentication error: ${message}`);\n        setIsSpotifyAuthorized(false);\n      });\n\n      player.addListener('playback_error', ({ message }) => {\n        console.error(message);\n      });\n\n      player.connect();\n\n      spotifyPlayerRef.current = player;\n\n      /** The user has just signed in; configure the app to use Spotify. */\n      if (isNew) {\n        setService('spotify');\n      }\n    }\n  }, [setIsSpotifyAuthorized, setService]);\n\n  useEffectOnce(() => {\n    window.onSpotifyWebPlaybackSDKReady = handleMount;\n  });\n\n  return (\n    <SpotifySDKContext.Provider\n      value={{\n        spotifyPlayer:\n          spotifyPlayerRef.current ?? ({} as Spotify.SpotifyPlayer),\n        accessToken: token,\n        deviceId,\n        isMounted,\n      }}\n    >\n      {children}\n    </SpotifySDKContext.Provider>\n  );\n};\n\nexport default memo(SpotifySDKProvider);\n","import { useCallback } from 'react';\n\nimport { useSpotifySDK } from 'hooks';\nimport * as ConversionUtils from 'utils/conversion';\n\ntype FetchSpotifyApiArgs = {\n  endpoint: string;\n  accessToken?: string;\n  onError: (error: any) => void;\n};\n\nconst fetchSpotifyApi = async <TSpotifyApiType extends object>({\n  endpoint,\n  accessToken,\n  onError,\n}: FetchSpotifyApiArgs) => {\n  try {\n    if (!accessToken) {\n      throw new Error('Provide a Spotify API Access token');\n    }\n\n    const res = await fetch(`https://api.spotify.com/v1/${endpoint}`, {\n      headers: { Authorization: `Bearer ${accessToken}` },\n    });\n    return (await res.json()) as TSpotifyApiType;\n  } catch (error) {\n    onError(error);\n  }\n};\n\nconst useSpotifyDataFetcher = () => {\n  const { accessToken } = useSpotifySDK();\n\n  const fetchAlbums = useCallback(async () => {\n    const response = await fetchSpotifyApi<SpotifyApi.UsersSavedAlbumsResponse>(\n      {\n        endpoint: `me/albums?limit=50`,\n        accessToken,\n        onError: (error) => {\n          throw new Error(error);\n        },\n      }\n    );\n\n    if (response) {\n      return response.items.map((item) =>\n        ConversionUtils.convertSpotifyAlbumFull(item.album)\n      );\n    }\n  }, [accessToken]);\n\n  const fetchAlbum = useCallback(\n    async (userId = '', id: string) => {\n      const response = await fetchSpotifyApi<SpotifyApi.SingleAlbumResponse>({\n        endpoint: `albums/${id}`,\n        accessToken,\n        onError: (error) => {\n          throw new Error(error);\n        },\n      });\n\n      if (response) {\n        return ConversionUtils.convertSpotifyAlbumFull(response);\n      }\n    },\n    [accessToken]\n  );\n\n  const fetchArtists = useCallback(async () => {\n    const response = await fetchSpotifyApi<SpotifyApi.UsersFollowedArtistsResponse>(\n      {\n        endpoint: `me/following?type=artist&limit=50`,\n        accessToken,\n        onError: (error) => {\n          throw new Error(error);\n        },\n      }\n    );\n\n    return response?.artists?.items.map(\n      ConversionUtils.convertSpotifyArtistFull\n    );\n  }, [accessToken]);\n\n  const fetchArtist = useCallback(\n    async (userId = '', id: string) => {\n      const response = await fetchSpotifyApi<SpotifyApi.ArtistsAlbumsResponse>({\n        endpoint: `artists/${id}/albums`,\n        accessToken,\n        onError: (error) => {\n          throw new Error(error);\n        },\n      });\n\n      if (response) {\n        return response.items.map(\n          ConversionUtils.convertSpotifyAlbumSimplified\n        );\n      }\n    },\n    [accessToken]\n  );\n\n  const fetchPlaylists = useCallback(async () => {\n    const response = await fetchSpotifyApi<SpotifyApi.ListOfCurrentUsersPlaylistsResponse>(\n      {\n        endpoint: 'me/playlists?limit=50',\n        accessToken,\n        onError: (error) => {\n          throw new Error(error);\n        },\n      }\n    );\n\n    return response?.items?.map(\n      ConversionUtils.convertSpotifyPlaylistSimplified\n    );\n  }, [accessToken]);\n\n  const fetchPlaylist = useCallback(\n    async (userId = '', id: string) => {\n      const response = await fetchSpotifyApi<SpotifyApi.PlaylistObjectFull>({\n        endpoint: `users/${userId}/playlists/${id}`,\n        accessToken,\n        onError: (error) => {\n          throw new Error(error);\n        },\n      });\n\n      if (response) {\n        return ConversionUtils.convertSpotifyPlaylistFull(response);\n      }\n    },\n    [accessToken]\n  );\n\n  return {\n    fetchAlbums,\n    fetchAlbum,\n    fetchArtists,\n    fetchArtist,\n    fetchPlaylists,\n    fetchPlaylist,\n  };\n};\n\nexport default useSpotifyDataFetcher;\n","import { createContext, memo, useCallback, useContext, useState } from 'react';\n\ntype StreamingService = 'apple' | 'spotify';\n\nexport const SELECTED_SERVICE_KEY = 'ipodSelectedService';\nexport const VOLUME_KEY = 'ipodVolume';\n\nexport interface SettingsState {\n  service?: StreamingService;\n  isSpotifyAuthorized: boolean;\n  isAppleAuthorized: boolean;\n}\n\ntype SettingsContextType = [\n  SettingsState,\n  React.Dispatch<React.SetStateAction<SettingsState>>\n];\n\nexport const SettingsContext = createContext<SettingsContextType>([\n  {} as any,\n  () => {},\n]);\n\nexport type SettingsHook = SettingsState & {\n  isAuthorized: boolean;\n  setIsSpotifyAuthorized: (val: boolean) => void;\n  setIsAppleAuthorized: (val: boolean) => void;\n  setService: (service?: StreamingService) => void;\n};\n\nexport const useSettings = (): SettingsHook => {\n  const [state, setState] = useContext(SettingsContext);\n\n  const setIsSpotifyAuthorized = useCallback(\n    (val: boolean) =>\n      setState((prevState) => ({\n        ...prevState,\n        isSpotifyAuthorized: val,\n      })),\n    [setState]\n  );\n\n  const setIsAppleAuthorized = useCallback(\n    (val: boolean) =>\n      setState((prevState) => ({\n        ...prevState,\n        isAppleAuthorized: val,\n      })),\n    [setState]\n  );\n\n  const setService = useCallback(\n    (service?: StreamingService) => {\n      setState((prevState) => ({\n        ...prevState,\n        service,\n      }));\n\n      if (service) {\n        localStorage.setItem(SELECTED_SERVICE_KEY, service);\n      } else {\n        localStorage.removeItem(SELECTED_SERVICE_KEY);\n      }\n    },\n    [setState]\n  );\n\n  return {\n    ...state,\n    isAuthorized: state.isAppleAuthorized || state.isSpotifyAuthorized,\n    setIsSpotifyAuthorized,\n    setIsAppleAuthorized,\n    setService,\n  };\n};\n\ninterface Props {\n  children: React.ReactNode;\n}\n\nexport const SettingsProvider = memo(({ children }: Props) => {\n  const [settingsState, setSettingsState] = useState<SettingsState>({\n    isAppleAuthorized: false,\n    isSpotifyAuthorized: false,\n    service:\n      (localStorage.getItem(SELECTED_SERVICE_KEY) as StreamingService) ??\n      undefined,\n  });\n\n  return (\n    <SettingsContext.Provider value={[settingsState, setSettingsState]}>\n      {children}\n    </SettingsContext.Provider>\n  );\n});\n\nexport default useSettings;\n","import { useCallback, useEffect, useState } from 'react';\n\nimport { useMusicKit, useSettings, useSpotifyDataFetcher } from 'hooks';\nimport * as ConversionUtils from 'utils/conversion';\n\ninterface UserLibraryProps {\n  inLibrary?: boolean;\n  userId?: string;\n}\n\ninterface CommonFetcherProps {\n  name: string;\n}\n\ninterface PlaylistsFetcherProps {\n  name: 'playlists';\n}\n\ninterface PlaylistFetcherProps extends UserLibraryProps {\n  name: 'playlist';\n  id: string;\n}\n\ninterface AlbumsFetcherProps {\n  name: 'albums';\n  artworkSize?: number;\n}\n\ninterface AlbumFetcherProps extends UserLibraryProps {\n  name: 'album';\n  id: string;\n}\n\ninterface ArtistsFetcherProps {\n  name: 'artists';\n}\n\ninterface ArtistFetcherProps extends UserLibraryProps {\n  name: 'artist';\n  id: string;\n  artworkSize?: number;\n}\n\ntype Props = CommonFetcherProps &\n  (\n    | PlaylistsFetcherProps\n    | PlaylistFetcherProps\n    | AlbumsFetcherProps\n    | AlbumFetcherProps\n    | ArtistsFetcherProps\n    | ArtistFetcherProps\n  );\n\nconst useDataFetcher = <TType extends object>(props: Props) => {\n  const spotifyDataFetcher = useSpotifyDataFetcher();\n  const { service, isAppleAuthorized, isSpotifyAuthorized } = useSettings();\n  const { music } = useMusicKit();\n  const [isLoading, setIsLoading] = useState(true);\n  const [hasError, setHasError] = useState(false);\n  const [data, setData] = useState<TType>();\n  const [isMounted, setIsMounted] = useState(false);\n\n  const fetchAlbums = useCallback(\n    async (options: AlbumsFetcherProps) => {\n      let albums: IpodApi.Album[] | undefined;\n\n      if (service === 'apple') {\n        const response = await music.api.library.albums(null, {\n          include: 'library-albums',\n        });\n\n        albums = response.map((item) =>\n          ConversionUtils.convertAppleAlbum(item, options.artworkSize)\n        );\n      } else if (service === 'spotify') {\n        albums = await spotifyDataFetcher.fetchAlbums();\n      }\n      setData(albums as TType);\n      setIsLoading(false);\n    },\n    [music.api, service, spotifyDataFetcher]\n  );\n\n  const fetchAlbum = useCallback(\n    async (options: AlbumFetcherProps) => {\n      let album: IpodApi.Album | undefined;\n\n      if (service === 'apple') {\n        const response = options.inLibrary\n          ? await music.api.library.album(options.id)\n          : await music.api.album(options.id);\n\n        album = ConversionUtils.convertAppleAlbum(response);\n      } else if (service === 'spotify') {\n        album = await spotifyDataFetcher.fetchAlbum(options.userId, options.id);\n      }\n      setData(album as TType);\n      setIsLoading(false);\n    },\n    [music.api, service, spotifyDataFetcher]\n  );\n\n  const fetchArtists = useCallback(async () => {\n    let artists: IpodApi.Artist[] | undefined;\n\n    if (service === 'apple') {\n      const response = await music.api.library.artists(null, {\n        include: 'catalog',\n        limit: 100,\n      });\n\n      artists = response.map(ConversionUtils.convertAppleArtist);\n    } else if (service === 'spotify') {\n      artists = await spotifyDataFetcher.fetchArtists();\n    }\n    setData(artists as TType);\n    setIsLoading(false);\n  }, [music.api, service, spotifyDataFetcher]);\n\n  const fetchArtistAlbums = useCallback(\n    async (options: ArtistFetcherProps) => {\n      let albums: IpodApi.Album[] | undefined;\n\n      if (service === 'apple') {\n        const response = options.inLibrary\n          ? await music.api.library.artistRelationship(options.id, 'albums')\n          : await music.api.artistRelationship(options.id, 'albums');\n\n        albums = response.map((item) =>\n          ConversionUtils.convertAppleAlbum(item, options.artworkSize)\n        );\n      } else if (service === 'spotify') {\n        albums = await spotifyDataFetcher.fetchArtist(\n          options.userId,\n          options.id\n        );\n      }\n      setData(albums as TType);\n      setIsLoading(false);\n    },\n    [music.api, service, spotifyDataFetcher]\n  );\n\n  const fetchPlaylists = useCallback(async () => {\n    let playlists: IpodApi.Playlist[] | undefined;\n\n    if (service === 'apple') {\n      const response = await music.api.library.playlists(null, {\n        limit: 100,\n      });\n\n      playlists = response.map(ConversionUtils.convertApplePlaylist);\n    } else if (service === 'spotify') {\n      playlists = await spotifyDataFetcher.fetchPlaylists();\n    }\n    setData(playlists as TType);\n    setIsLoading(false);\n  }, [music.api.library, service, spotifyDataFetcher]);\n\n  const fetchPlaylist = useCallback(\n    async (options: PlaylistFetcherProps) => {\n      let playlist: IpodApi.Playlist | undefined;\n\n      if (service === 'apple') {\n        const response = options.inLibrary\n          ? await music.api.library.playlist(options.id)\n          : await music.api.playlist(options.id);\n\n        playlist = ConversionUtils.convertApplePlaylist(response);\n      } else if (service === 'spotify') {\n        playlist = await spotifyDataFetcher.fetchPlaylist(\n          options.userId,\n          options.id\n        );\n      }\n      setData(playlist as TType);\n      setIsLoading(false);\n    },\n    [music.api, service, spotifyDataFetcher]\n  );\n\n  const handleMount = useCallback(async () => {\n    setHasError(false);\n    setIsLoading(true);\n\n    switch (props.name) {\n      case 'albums':\n        await fetchAlbums(props);\n        break;\n      case 'album':\n        await fetchAlbum(props);\n        break;\n      case 'artists':\n        await fetchArtists();\n        break;\n      case 'artist':\n        await fetchArtistAlbums(props);\n        break;\n      case 'playlists':\n        await fetchPlaylists();\n        break;\n      case 'playlist':\n        await fetchPlaylist(props);\n        break;\n    }\n\n    setIsMounted(true);\n  }, [\n    fetchAlbum,\n    fetchAlbums,\n    fetchArtistAlbums,\n    fetchArtists,\n    fetchPlaylist,\n    fetchPlaylists,\n    props,\n  ]);\n\n  useEffect(() => {\n    if (\n      !isMounted &&\n      ((service === 'apple' && isAppleAuthorized) ||\n        (service === 'spotify' && isSpotifyAuthorized))\n    ) {\n      handleMount();\n    } else {\n      setIsLoading(false);\n    }\n  }, [handleMount, isAppleAuthorized, isMounted, isSpotifyAuthorized, service]);\n\n  return {\n    isLoading,\n    data,\n    hasError,\n  };\n};\n\nexport default useDataFetcher;\n","import { useEffect } from 'react';\n\n/**\n * Run an effect only once upon component mount/unmount.\n */\nconst useEffectOnce = (effect: React.EffectCallback) =>\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(effect, []);\n\nexport default useEffectOnce;\n","import { useEffect, useRef } from \"react\";\n\nconst useInterval = (callback: (...args: any) => any, delay: number) => {\n  const savedCallback = useRef<any>();\n\n  // Remember the latest callback.\n  useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  // Set up the interval.\n  useEffect(() => {\n    const tick = () => {\n      savedCallback.current();\n    };\n    if (delay !== null) {\n      let id = setInterval(tick, delay);\n      return () => clearInterval(id);\n    }\n  }, [delay]);\n};\n\nexport default useInterval;\n","import { useCallback, useEffect, useRef } from 'react';\n\n// React hook for delaying calls with time\n// returns callback to use for cancelling\n\nconst useTimeout = (\n  callback: () => void, // function to call. No args passed.\n  // if you create a new callback each render, then previous callback will be cancelled on render.\n  timeout: number = 0 // delay, ms (default: immediately put into JS Event Queue)\n): (() => void) => {\n  const timeoutIdRef = useRef<any>();\n\n  const cancel = useCallback(() => {\n    const timeoutId = timeoutIdRef.current;\n    if (timeoutId) {\n      timeoutIdRef.current = undefined;\n      clearTimeout(timeoutId);\n    }\n  }, [timeoutIdRef]);\n\n  useEffect(() => {\n    timeoutIdRef.current = setTimeout(callback, timeout);\n    return cancel;\n  }, [callback, timeout, cancel]);\n\n  return cancel;\n};\n\nexport default useTimeout;\n","import styled, { css } from 'styled-components';\nimport { Unit } from 'utils/constants';\n\nimport { SelectableListOption } from './';\n\nconst LabelContainer = styled.div`\n  flex: 1;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-right: ${Unit.MD};\n`;\n\nconst Label = styled.h3`\n  margin: 0;\n  padding: ${Unit.XXS};\n  font-size: 14px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`;\n\nconst Sublabel = styled(Label)`\n  padding: 0 ${Unit.XXS} ${Unit.XXS};\n  margin-top: -4px;\n  font-weight: normal;\n  font-size: 12px;\n  color: rgb(100, 100, 100);\n`;\n\nconst Container = styled.div<{ isActive?: boolean }>`\n  display: flex;\n  align-items: center;\n  overflow: auto;\n\n  ${(props) =>\n    props.isActive &&\n    css`\n      ${LabelContainer} {\n        padding-right: 0;\n      }\n\n      ${Label}, ${Sublabel} {\n        color: white;\n      }\n      background: linear-gradient(rgb(60, 184, 255) 0%, rgb(52, 122, 181) 100%);\n    `};\n`;\n\nconst Image = styled.img`\n  height: 3rem;\n  width: 3rem;\n  margin-right: ${Unit.XXS};\n`;\n\nconst Icon = styled.img`\n  margin-left: auto;\n`;\n\ninterface Props {\n  option: SelectableListOption;\n  isActive: boolean;\n}\n\nconst SelectableListItem = ({ option, isActive }: Props) => {\n  return (\n    <Container isActive={isActive}>\n      {option.imageUrl && <Image src={option.imageUrl} />}\n      <LabelContainer>\n        <Label>{option.label}</Label>\n        {option.sublabel && <Sublabel>{option.sublabel}</Sublabel>}\n      </LabelContainer>\n      {isActive && <Icon src=\"arrow_right.svg\" />}\n    </Container>\n  );\n};\n\nexport default SelectableListItem;\n","import { useEffect, useRef, useState } from 'react';\n\nimport { LoadingScreen } from 'components';\nimport ErrorScreen from 'components/ErrorScreen';\nimport { PREVIEW } from 'components/previews';\nimport { WINDOW_TYPE } from 'components/views';\nimport { AnimatePresence } from 'framer-motion';\nimport { useTimeout } from 'hooks';\nimport styled from 'styled-components';\n\nimport SelectableListItem from './SelectableListItem';\n\nexport const getConditionalOption = (\n  condition?: boolean,\n  option?: SelectableListOption\n) => (option && condition ? [option] : []);\n\nexport type SelectableListOptionType =\n  | 'View'\n  | 'Link'\n  | 'Song'\n  | 'Action'\n  | 'ActionSheet'\n  | 'Popup';\n\ntype SharedOptionProps = {\n  type?: SelectableListOptionType;\n  label: string;\n  sublabel?: string;\n  preview?: PREVIEW;\n  imageUrl?: string;\n  longPressOptions?: SelectableListOption[];\n};\n\ntype ViewOptionProps = {\n  type: 'View';\n  /** A unique identifier for the next screen. */\n  viewId: string;\n  /** The component that will be displayed in the next view. */\n  component: React.ReactNode;\n  /** Whether to display the default full size view, split view, or in some cases Cover Flow View. */\n  windowType?: WINDOW_TYPE.SPLIT | WINDOW_TYPE.FULL | WINDOW_TYPE.COVER_FLOW;\n};\n\ntype LinkOptionProps = {\n  type: 'Link';\n  url: string;\n};\n\ntype SongOptionProps = {\n  type: 'Song';\n  /** Options that will be used to fetch and play a song. */\n  queueOptions: IpodApi.QueueOptions;\n  /**\n   * Show the Now Playing view after starting the song.\n   * @default false\n   */\n  showNowPlayingView?: boolean;\n};\n\ntype ActionOptionProps = {\n  type: 'Action';\n  onSelect: () => void;\n};\n\nexport type PopupOptionProps = {\n  type: 'Popup';\n  /** A unique identifier for the popup. */\n  popupId: string;\n  listOptions: SelectableListOption[];\n  title: string;\n  description?: string;\n};\n\nexport type ActionSheetOptionProps = {\n  type: 'ActionSheet';\n  /** A unique identifier for the action sheet. */\n  id: string;\n  listOptions: SelectableListOption[];\n};\n\n/** Depending on the option type, certain properties will be available. */\nexport type SelectableListOption = SharedOptionProps &\n  (\n    | ViewOptionProps\n    | LinkOptionProps\n    | SongOptionProps\n    | ActionOptionProps\n    | ActionSheetOptionProps\n    | PopupOptionProps\n  );\n\nconst Container = styled.div`\n  width: 100%;\n  overflow: auto;\n  -webkit-overflow-scrolling: touch;\n`;\n\ninterface Props {\n  options: SelectableListOption[];\n  activeIndex: number;\n  loading?: boolean;\n  emptyMessage?: string;\n}\n\nconst SelectableList = ({\n  options,\n  activeIndex,\n  loading,\n  emptyMessage = 'Nothing to see here',\n}: Props) => {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [isMounted, setIsMounted] = useState(false);\n\n  useTimeout(() => setIsMounted(true), 350);\n\n  /** Always make sure the selected item is within the screen's view. */\n  useEffect(() => {\n    // Delay \"isMounted\" so that the enter animation doesn't get interrupted.\n    // I was stuck on this for like 12 hours and was wondering why\n    // the animation wasn't finishing...\n    if (isMounted && containerRef.current && options.length) {\n      const { children } = containerRef.current;\n      children[activeIndex]?.scrollIntoView({\n        block: 'nearest',\n      });\n    }\n  }, [activeIndex, isMounted, options.length]);\n\n  return (\n    <AnimatePresence>\n      {loading ? (\n        <LoadingScreen backgroundColor=\"white\" />\n      ) : options.length > 0 ? (\n        <Container ref={containerRef}>\n          {options.map((option, index) => (\n            <SelectableListItem\n              key={`option-${option.label}-${index}`}\n              option={option}\n              isActive={index === activeIndex}\n            />\n          ))}\n        </Container>\n      ) : (\n        <ErrorScreen showImage={false} message={emptyMessage} />\n      )}\n    </AnimatePresence>\n  );\n};\n\nexport default SelectableList;\n","import { useState } from 'react';\n\nimport { useInterval } from 'hooks';\nimport styled, { css } from 'styled-components';\nimport { Unit } from 'utils/constants';\n\nconst RootContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n  height: 100%;\n  background: white;\n`;\n\nconst StyledImg = styled.img<{ isHidden: boolean }>`\n  height: 60px;\n  width: 60px;\n  transition: all 0.5s ease-in-out;\n\n  ${({ isHidden }) =>\n    isHidden &&\n    css`\n      opacity: 0;\n    `};\n\n  :last-of-type {\n    margin-top: -60px;\n  }\n`;\n\nconst Title = styled.h3`\n  margin: ${Unit.XS} 0 ${Unit.XXS};\n  font-weight: bold;\n  font-size: 18px;\n`;\n\nconst Text = styled.p`\n  font-size: 14px;\n  margin: 0;\n  max-width: 120px;\n  color: rgb(100, 100, 100);\n`;\n\nconst strings = {\n  title: {\n    apple: 'Apple Music',\n    spotify: 'Spotify',\n  },\n  defaultMessage: 'Sign into view this content',\n};\n\ninterface Props {\n  message?: string;\n}\n\nconst AuthPrompt = ({ message }: Props) => {\n  const [icon, setIcon] = useState<'apple' | 'spotify'>('apple');\n\n  useInterval(\n    () => setIcon((prevState) => (prevState === 'apple' ? 'spotify' : 'apple')),\n    4000\n  );\n\n  return (\n    <RootContainer>\n      <StyledImg\n        isHidden={icon === 'spotify'}\n        alt=\"app_icon\"\n        src=\"apple_music_icon.svg\"\n      />\n      <StyledImg\n        isHidden={icon === 'apple'}\n        alt=\"app_icon\"\n        src=\"spotify_icon.svg\"\n      />\n      <Title>{strings.title[icon]}</Title>\n      <Text>{message ?? strings.defaultMessage}</Text>\n    </RootContainer>\n  );\n};\n\nexport default AuthPrompt;\n","import styled from 'styled-components';\n\nconst Container = styled.div`\n  position: relative;\n  display: flex;\n  flex: 1;\n  height: 1em;\n  -webkit-box-reflect: below 0px -webkit-gradient(linear, left top, left bottom, from(transparent), color-stop(60%, transparent), to(rgba(250, 250, 250, 0.1)));\n`;\n\nconst ProgressContainer = styled.div`\n  position: relative;\n  flex: 1;\n  margin: 0 8px;\n`;\n\nconst Gloss = styled.div`\n  position: absolute;\n  width: 100%;\n  background: url(\"gloss-overlay.svg\") repeat-x;\n  background-size: contain;\n  height: 100%;\n`;\n\ninterface ProgressProps {\n  percent: number;\n  transparent?: boolean;\n}\n\nconst Progress = styled.div.attrs((props: ProgressProps) => ({\n  // This is the recommended syntax for when things change often.\n  style: {\n    width: `${props.percent}%`\n  }\n}))<ProgressProps>`\n  position: relative;\n  height: 100%;\n  background: ${props =>\n    !props.transparent && 'url(\"gloss-blue.svg\") repeat-x'};\n  transition: width 0.1s;\n`;\n\n/** The icon that is displayed when scrubbing. */\nconst Diamond = styled.img`\n  position: absolute;\n  height: 100%;\n  right: -8px;\n  filter: brightness(0.85);\n`;\n\ninterface Props {\n  percent: number;\n  isScrubber?: boolean;\n}\n\nconst ProgressBar = ({ percent, isScrubber }: Props) => {\n  return (\n    <Container>\n      <ProgressContainer>\n        <Gloss />\n        <Progress percent={percent} transparent={isScrubber}>\n          {isScrubber && <Diamond src=\"scrubber.svg\" />}\n        </Progress>\n      </ProgressContainer>\n    </Container>\n  );\n};\n\nexport default ProgressBar;\n","import { useCallback, useMemo, useState } from 'react';\n\nimport { useAudioPlayer, useEventListener, useInterval } from 'hooks';\nimport styled from 'styled-components';\nimport { useDebouncedCallback } from 'use-debounce/lib';\nimport { formatTime } from 'utils';\nimport { Unit } from 'utils/constants';\n\nimport ProgressBar from './ProgressBar';\n\nconst Container = styled.div`\n  position: relative;\n  display: flex;\n  flex: 1;\n  height: 1em;\n  padding: 0 ${Unit.SM};\n  -webkit-box-reflect: below 0px -webkit-gradient(linear, left top, left bottom, from(transparent), color-stop(60%, transparent), to(rgba(250, 250, 250, 0.1)));\n`;\n\ninterface LabelProps {\n  textAlign: 'left' | 'right';\n}\n\nconst Label = styled.h3<LabelProps>`\n  font-size: 12px;\n  margin: auto 0;\n  width: 30px;\n  text-align: ${(props) => props.textAlign};\n  white-space: nowrap;\n`;\n\ninterface Props {\n  isScrubbing: boolean;\n}\n\nconst Scrubber = ({ isScrubbing }: Props) => {\n  const { playbackInfo, seekToTime } = useAudioPlayer();\n  const { currentTime, duration, isPlaying } = playbackInfo;\n  const [scrubberTime, setScrubberTime] = useState(currentTime);\n  const scrubberPercent = useMemo(\n    () => Math.round((scrubberTime / duration) * 100),\n    [duration, scrubberTime]\n  );\n  const scrubberTimeRemaining = useMemo(() => duration - scrubberTime, [\n    duration,\n    scrubberTime,\n  ]);\n\n  /** The user is actively scrubbing. We disable the 1s update interval in this case. */\n  const [isActive, setIsActive] = useState(false);\n\n  /** Wait until the user is finished scrubbing before seeking. */\n  const handleSeek = useDebouncedCallback((newTime: number) => {\n    seekToTime(newTime);\n    setIsActive(false);\n  }, 300);\n\n  const scrubForward = useCallback(() => {\n    if (scrubberTime === duration || !isScrubbing) return;\n    const newTime = scrubberTime + 1;\n\n    if (newTime < duration) {\n      setIsActive(true);\n      handleSeek(newTime);\n      setScrubberTime(newTime);\n    }\n  }, [scrubberTime, duration, isScrubbing, handleSeek]);\n\n  const scrubBackward = useCallback(() => {\n    if (scrubberTime === 0 || !isScrubbing) return;\n    const newTime = scrubberTime - 1;\n\n    if (newTime >= 0) {\n      setIsActive(true);\n      handleSeek(newTime);\n      setScrubberTime(newTime);\n    }\n  }, [scrubberTime, handleSeek, isScrubbing]);\n\n  const refresh = useCallback(\n    (force = false) => {\n      if ((!isActive && isPlaying) || force) {\n        setScrubberTime(currentTime);\n      }\n    },\n    [currentTime, isActive, isPlaying]\n  );\n\n  useEventListener('forwardscroll', scrubForward);\n  useEventListener('backwardscroll', scrubBackward);\n\n  /** Update the progress bar every second. */\n  useInterval(refresh, 1000);\n\n  return (\n    <Container>\n      <Label textAlign=\"left\">{formatTime(scrubberTime)}</Label>\n      <ProgressBar percent={scrubberPercent} isScrubber />\n      <Label textAlign=\"right\">-{formatTime(scrubberTimeRemaining)}</Label>\n    </Container>\n  );\n};\n\nexport default Scrubber;\n","import styled from 'styled-components';\n\nconst Svg = styled.svg``;\n\ninterface Props {\n  size?: number;\n  className?: string;\n}\n\nconst LoadingIndicator = ({ size = 24, className }: Props) => {\n  return (\n    <Svg\n      className={className}\n      version=\"1.1\"\n      x=\"0px\"\n      y=\"0px\"\n      viewBox=\"0 0 2400 2400\"\n      width={size}\n      height={size}\n    >\n      <g\n        strokeWidth=\"200\"\n        strokeLinecap=\"round\"\n        stroke=\"#000000\"\n        fill=\"none\"\n        id=\"spinner\"\n      >\n        <line x1=\"1200\" y1=\"600\" x2=\"1200\" y2=\"100\" />\n        <line opacity=\"0.5\" x1=\"1200\" y1=\"2300\" x2=\"1200\" y2=\"1800\" />\n        <line opacity=\"0.917\" x1=\"900\" y1=\"680.4\" x2=\"650\" y2=\"247.4\" />\n        <line opacity=\"0.417\" x1=\"1750\" y1=\"2152.6\" x2=\"1500\" y2=\"1719.6\" />\n        <line opacity=\"0.833\" x1=\"680.4\" y1=\"900\" x2=\"247.4\" y2=\"650\" />\n        <line opacity=\"0.333\" x1=\"2152.6\" y1=\"1750\" x2=\"1719.6\" y2=\"1500\" />\n        <line opacity=\"0.75\" x1=\"600\" y1=\"1200\" x2=\"100\" y2=\"1200\" />\n        <line opacity=\"0.25\" x1=\"2300\" y1=\"1200\" x2=\"1800\" y2=\"1200\" />\n        <line opacity=\"0.667\" x1=\"680.4\" y1=\"1500\" x2=\"247.4\" y2=\"1750\" />\n        <line opacity=\"0.167\" x1=\"2152.6\" y1=\"650\" x2=\"1719.6\" y2=\"900\" />\n        <line opacity=\"0.583\" x1=\"900\" y1=\"1719.6\" x2=\"650\" y2=\"2152.6\" />\n        <line opacity=\"0.083\" x1=\"1750\" y1=\"247.4\" x2=\"1500\" y2=\"680.4\" />\n        <animateTransform\n          attributeName=\"transform\"\n          attributeType=\"XML\"\n          type=\"rotate\"\n          keyTimes=\"0;0.08333;0.16667;0.25;0.33333;0.41667;0.5;0.58333;0.66667;0.75;0.83333;0.91667\"\n          values=\"0 1199 1199;30 1199 1199;60 1199 1199;90 1199 1199;120 1199 1199;150 1199 1199;180 1199 1199;210 1199 1199;240 1199 1199;270 1199 1199;300 1199 1199;330 1199 1199\"\n          dur=\"0.83333s\"\n          begin=\"0s\"\n          repeatCount=\"indefinite\"\n          calcMode=\"discrete\"\n        />\n      </g>\n    </Svg>\n  );\n};\n\nexport default LoadingIndicator;\n","import LoadingIndicator from 'components/LoadingIndicator';\nimport { useAudioPlayer, useInterval } from 'hooks';\nimport styled from 'styled-components';\nimport * as Utils from 'utils';\nimport { Unit } from 'utils/constants';\n\nimport ProgressBar from './ProgressBar';\n\nconst Container = styled.div`\n  position: relative;\n  display: flex;\n  flex: 1;\n  height: 1em;\n  padding: 0 ${Unit.SM};\n  -webkit-box-reflect: below 0px -webkit-gradient(linear, left top, left bottom, from(transparent), color-stop(60%, transparent), to(rgba(250, 250, 250, 0.1)));\n`;\n\ninterface LabelProps {\n  textAlign: 'left' | 'right';\n}\n\nconst Label = styled.h3<LabelProps>`\n  font-size: 12px;\n  margin: auto 0;\n  width: 30px;\n  text-align: ${(props) => props.textAlign};\n`;\n\nconst TrackProgress = () => {\n  const { playbackInfo, updatePlaybackInfo } = useAudioPlayer();\n\n  const {\n    isLoading,\n    isPlaying,\n    isPaused,\n    currentTime,\n    percent,\n    timeRemaining,\n  } = playbackInfo;\n\n  /** Update the progress bar every second. */\n  useInterval(() => {\n    if (isPlaying && !isPaused) {\n      updatePlaybackInfo();\n    }\n  }, 1000);\n\n  return (\n    <Container>\n      {isLoading ? (\n        <LoadingIndicator size={14} />\n      ) : (\n        <Label textAlign=\"left\">{Utils.formatTime(currentTime)}</Label>\n      )}\n      <ProgressBar percent={percent} />\n      <Label textAlign=\"right\">-{Utils.formatTime(timeRemaining)}</Label>\n    </Container>\n  );\n};\n\nexport default TrackProgress;\n","import styled from 'styled-components';\nimport { Unit } from 'utils/constants';\n\nimport ProgressBar from './ProgressBar';\n\nconst Container = styled.div`\n  position: relative;\n  display: flex;\n  flex: 1;\n  height: 1em;\n  padding: 0 ${Unit.SM};\n  -webkit-box-reflect: below 0px -webkit-gradient(linear, left top, left bottom, from(transparent), color-stop(60%, transparent), to(rgba(250, 250, 250, 0.1)));\n`;\n\nconst Icon = styled.img`\n  font-size: 12px;\n  margin: auto 0;\n  width: 30px;\n  height: 16px;\n`;\n\ninterface Props {\n  percent: number;\n}\n\nconst VolumeBar = ({ percent }: Props) => {\n  return (\n    <Container>\n      <Icon src=\"volume_mute.svg\" />\n      <ProgressBar percent={percent} />\n      <Icon src=\"volume_full.svg\" />\n    </Container>\n  );\n};\n\nexport default VolumeBar;\n","import { useCallback, useState } from 'react';\n\nimport { useEventListener, useVolumeHandler } from 'hooks';\nimport styled from 'styled-components';\nimport { Unit } from 'utils/constants';\n\nimport Scrubber from './Scrubber';\n// import Scrubber from './Scrubber';\nimport TrackProgress from './TrackProgress';\nimport VolumeBar from './VolumeBar';\n\n// import VolumeBar from './VolumeBar';\n\nconst Container = styled.div`\n  position: relative;\n  width: 100%;\n  padding: 0 ${Unit.MD} ${Unit.MD};\n`;\n\ninterface ContainerProps {\n  isHidden: boolean;\n}\n\nconst MainContainer = styled.div<ContainerProps>`\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: ${Unit.XS};\n  right: ${Unit.XS};\n  transition: transform 0.3s;\n\n  transform: ${(props) => props.isHidden && 'translateX(-110%)'};\n`;\n\nconst ScrubberContainer = styled.div<ContainerProps>`\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: ${Unit.XS};\n  right: ${Unit.XS};\n  transition: transform 0.3s;\n\n  transform: ${(props) => props.isHidden && 'translateX(110%)'};\n`;\n\nconst Controls = () => {\n  const { volume, active, setEnabled } = useVolumeHandler();\n  const [isScrubbing, setIsScrubbing] = useState(false);\n\n  const handleCenterClick = useCallback(() => {\n    if (isScrubbing) {\n      // Enable the volume controls.\n      setEnabled(true);\n      setIsScrubbing(false);\n    } else {\n      // Disable the volume controls.\n      setEnabled(false);\n      setIsScrubbing(true);\n    }\n  }, [isScrubbing, setEnabled]);\n\n  useEventListener('centerclick', handleCenterClick);\n\n  return (\n    <Container>\n      <MainContainer isHidden={isScrubbing}>\n        {active && !isScrubbing && <VolumeBar percent={volume * 100} />}\n      </MainContainer>\n      <MainContainer hidden={active && !isScrubbing} isHidden={isScrubbing}>\n        <TrackProgress />\n      </MainContainer>\n      <ScrubberContainer isHidden={!isScrubbing}>\n        <Scrubber isScrubbing={isScrubbing} />\n      </ScrubberContainer>\n    </Container>\n  );\n};\n\nexport default Controls;\n","import LoadingIndicator from 'components/LoadingIndicator';\nimport { useAudioPlayer, useWindowContext } from 'hooks';\nimport styled from 'styled-components';\n\nconst Container = styled.div`\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0 6px;\n  height: 20px;\n  background: linear-gradient(180deg, #feffff 0%, #b1b6b9 100%);\n  border-bottom: 1px solid #7995a3;\n  box-sizing: border-box;\n`;\n\nconst Text = styled.h3`\n  margin: 0;\n  font-size: 13px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n`;\n\nconst IconContainer = styled.div`\n  display: flex;\n`;\n\nconst Icon = styled.img`\n  max-height: 12px;\n  margin-left: 8px;\n`;\n\nconst Header = () => {\n  const { headerTitle } = useWindowContext();\n  const { playbackInfo } = useAudioPlayer();\n\n  const { isPlaying, isPaused, isLoading } = playbackInfo;\n\n  return headerTitle ? (\n    <Container>\n      <Text>{headerTitle}</Text>\n      <IconContainer>\n        {isLoading && (\n          <IconContainer>\n            <LoadingIndicator size={10} />\n          </IconContainer>\n        )}\n        {isPlaying && !isPaused && <Icon src=\"play.svg\" />}\n        {isPaused && <Icon src=\"pause.svg\" />}\n        <Icon src=\"battery.svg\" />\n      </IconContainer>\n    </Container>\n  ) : null;\n};\n\nexport default Header;\n","import { useCallback, useEffect, useRef, useState } from 'react';\n\nimport { useInterval } from 'hooks';\nimport styled from 'styled-components';\n\nconst Container = styled.div``;\n\ninterface ImageProps {\n  zIndex: number;\n  startedAnimation: boolean;\n  isHidden: boolean;\n}\n\nconst Image = styled.img<ImageProps>`\n  z-index: ${(props) => props.zIndex};\n  position: absolute;\n  height: 100%;\n  right: 0;\n  animation: ${(props) => props.startedAnimation && 'kenBurns'} 20s;\n  opacity: ${(props) => props.isHidden && 0};\n  transition: opacity 2s;\n\n  @keyframes kenBurns {\n    0% {\n      transform: translateX(0%);\n    }\n\n    100% {\n      transform: translateX(10%);\n    }\n  }\n`;\n\ninterface Props {\n  urls: string[];\n}\n\nconst KenBurns = ({ urls }: Props) => {\n  const [stack, setStack] = useState<string[]>([]);\n  const [transitioning, setTransitioning] = useState(false);\n  const timeoutIdRef = useRef<any>();\n\n  useEffect(() => {\n    setStack(urls);\n  }, [urls]);\n\n  /** Move the currently displayed image to the bottom of the stack. */\n  const cycleImage = useCallback(() => {\n    setTransitioning(true);\n\n    timeoutIdRef.current = setTimeout(() => {\n      const newStack = stack.slice(1);\n\n      setStack([...newStack, stack[0]]);\n      setTransitioning(false);\n    }, 2000);\n\n    return () => {\n      if (timeoutIdRef.current) {\n        clearTimeout(timeoutIdRef.current);\n      }\n    };\n  }, [stack]);\n\n  /** Cycle through an image every 5 seconds. */\n  useInterval(cycleImage, 5000);\n\n  return (\n    <Container>\n      {stack.slice(0, 2).map((path, index) => (\n        <Image\n          key={`ken-burns-${path}`}\n          zIndex={3 - index}\n          src={path}\n          startedAnimation={index === 0 || transitioning}\n          isHidden={transitioning && index === 0}\n        />\n      ))}\n    </Container>\n  );\n};\n\nexport default KenBurns;\n","import { fade } from 'animation';\nimport { motion } from 'framer-motion';\nimport styled from 'styled-components';\n\ninterface ContainerProps {\n  backgroundColor?: string;\n}\n\nconst Container = styled(motion.div)<ContainerProps>`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: auto;\n  background: ${(props) => props.backgroundColor};\n`;\n\ninterface Props {\n  size?: number;\n  backgroundColor?: string;\n}\n\nconst LoadingScreen = ({ size, backgroundColor }: Props) => {\n  return (\n    <Container {...fade} backgroundColor={backgroundColor}>\n      <svg\n        version=\"1.1\"\n        x=\"0px\"\n        y=\"0px\"\n        viewBox=\"0 0 2400 2400\"\n        width={size || 24}\n        height={size || 24}\n      >\n        <g\n          strokeWidth=\"200\"\n          strokeLinecap=\"round\"\n          stroke=\"#000000\"\n          fill=\"none\"\n          id=\"spinner\"\n        >\n          <line x1=\"1200\" y1=\"600\" x2=\"1200\" y2=\"100\" />\n          <line opacity=\"0.5\" x1=\"1200\" y1=\"2300\" x2=\"1200\" y2=\"1800\" />\n          <line opacity=\"0.917\" x1=\"900\" y1=\"680.4\" x2=\"650\" y2=\"247.4\" />\n          <line opacity=\"0.417\" x1=\"1750\" y1=\"2152.6\" x2=\"1500\" y2=\"1719.6\" />\n          <line opacity=\"0.833\" x1=\"680.4\" y1=\"900\" x2=\"247.4\" y2=\"650\" />\n          <line opacity=\"0.333\" x1=\"2152.6\" y1=\"1750\" x2=\"1719.6\" y2=\"1500\" />\n          <line opacity=\"0.75\" x1=\"600\" y1=\"1200\" x2=\"100\" y2=\"1200\" />\n          <line opacity=\"0.25\" x1=\"2300\" y1=\"1200\" x2=\"1800\" y2=\"1200\" />\n          <line opacity=\"0.667\" x1=\"680.4\" y1=\"1500\" x2=\"247.4\" y2=\"1750\" />\n          <line opacity=\"0.167\" x1=\"2152.6\" y1=\"650\" x2=\"1719.6\" y2=\"900\" />\n          <line opacity=\"0.583\" x1=\"900\" y1=\"1719.6\" x2=\"650\" y2=\"2152.6\" />\n          <line opacity=\"0.083\" x1=\"1750\" y1=\"247.4\" x2=\"1500\" y2=\"680.4\" />\n          <animateTransform\n            attributeName=\"transform\"\n            attributeType=\"XML\"\n            type=\"rotate\"\n            keyTimes=\"0;0.08333;0.16667;0.25;0.33333;0.41667;0.5;0.58333;0.66667;0.75;0.83333;0.91667\"\n            values=\"0 1199 1199;30 1199 1199;60 1199 1199;90 1199 1199;120 1199 1199;150 1199 1199;180 1199 1199;210 1199 1199;240 1199 1199;270 1199 1199;300 1199 1199;330 1199 1199\"\n            dur=\"0.83333s\"\n            begin=\"0s\"\n            repeatCount=\"indefinite\"\n            calcMode=\"discrete\"\n          />\n        </g>\n      </svg>\n    </Container>\n  );\n};\n\nexport default LoadingScreen;\n","import { useCallback } from 'react';\n\nimport { Controls } from 'components';\nimport { useAudioPlayer, useEffectOnce, useMKEventListener } from 'hooks';\nimport styled from 'styled-components';\nimport { Unit } from 'utils/constants';\n\nconst Container = styled.div`\n  height: 100%;\n  overflow: hidden;\n`;\n\nconst MetadataContainer = styled.div`\n  display: flex;\n  height: 70%;\n  padding: 0 ${Unit.XS};\n`;\n\ninterface ArtworkContainerProps {\n  isHidden?: boolean;\n}\n\nconst ArtworkContainer = styled.div<ArtworkContainerProps>`\n  height: 8em;\n  width: 8em;\n  margin: auto ${Unit.SM};\n  -webkit-box-reflect: below 0px -webkit-gradient(linear, left top, left bottom, from(transparent), color-stop(70%, transparent), to(rgba(250, 250, 250, 0.1)));\n  transform-style: preserve-3d;\n  perspective: 500px;\n  opacity: ${(props) => props.isHidden && 0};\n`;\n\nconst Artwork = styled.img`\n  height: 100%;\n  width: 100%;\n  transform: rotateY(18deg);\n  border: 1px solid #f3f3f3;\n`;\n\nconst InfoContainer = styled.div`\n  flex: 1;\n  margin: auto 0 auto ${Unit.XS};\n`;\n\nconst Text = styled.h3`\n  margin: 0;\n  font-size: 0.92rem;\n`;\n\nconst Subtext = styled(Text)`\n  color: rgb(99, 101, 103);\n  font-size: 0.75rem;\n`;\n\nconst ControlsContainer = styled.div`\n  display: flex;\n  align-items: center;\n  height: 30%;\n`;\n\ninterface Props {\n  hideArtwork?: boolean;\n  onHide: () => void;\n}\n\nconst NowPlaying = ({ hideArtwork, onHide }: Props) => {\n  const {\n    nowPlayingItem,\n    updateNowPlayingItem,\n    updatePlaybackInfo,\n  } = useAudioPlayer();\n\n  const handlePlaybackChange = useCallback(\n    ({ state }: { state: MusicKit.PlaybackStates }) => {\n      /** Hide the now playing view if the playback state is \"Completed\" */\n      if (state === MusicKit.PlaybackStates.completed) {\n        onHide();\n      }\n    },\n    [onHide]\n  );\n\n  useEffectOnce(() => {\n    updateNowPlayingItem();\n    updatePlaybackInfo();\n  });\n\n  useMKEventListener('playbackStateDidChange', handlePlaybackChange);\n\n  return (\n    <Container>\n      <MetadataContainer>\n        <ArtworkContainer isHidden={hideArtwork}>\n          <Artwork src={nowPlayingItem?.artwork?.url} />\n        </ArtworkContainer>\n        <InfoContainer>\n          <Text>{nowPlayingItem?.name}</Text>\n          <Subtext>{nowPlayingItem?.artistName}</Subtext>\n          <Subtext>{nowPlayingItem?.albumName}</Subtext>\n        </InfoContainer>\n      </MetadataContainer>\n      <ControlsContainer>\n        <Controls />\n      </ControlsContainer>\n    </Container>\n  );\n};\n\nexport default NowPlaying;\n","import { createRef, Component } from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\n// NOTE: This is a legacy file that I pulled from an\n//       older version of this same project.\n\nconst Container = styled.div`\n  user-select: none;\n  position: relative;\n  display: flex;\n  justify-content: center;\n  margin: auto 0;\n  touch-action: none;\n  transform: translate3d(0, 0, 0);\n`;\n\nconst CanvasContainer = styled.div`\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: ${(props) => props.width}px;\n  height: ${(props) => props.height}px;\n`;\n\nconst Canvas = styled.canvas`\n  border-radius: 50%;\n  border: 1px solid #b9b9b9;\n  background: white;\n`;\n\nconst CenterButton = styled.div`\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: auto;\n  width: ${(props) => props.size / 2.5}px;\n  height: ${(props) => props.size / 2.5}px;\n  border-radius: 50%;\n  box-shadow: rgb(191, 191, 191) 0px 1em 3em inset;\n  background: rgb(225, 225, 225);\n  border: 1px solid #b9b9b9;\n\n  :active {\n    filter: brightness(0.9);\n  }\n`;\n\nconst WheelButton = styled.img`\n  position: absolute;\n  margin: ${(props) => props.margin};\n  top: ${(props) => props.top};\n  bottom: ${(props) => props.bottom};\n  left: ${(props) => props.left};\n  right: ${(props) => props.right};\n  user-select: none;\n  pointer-events: none;\n  max-height: 13px;\n`;\n\nclass Knob extends Component {\n  static propTypes = {\n    value: PropTypes.number.isRequired,\n    onChange: PropTypes.func.isRequired,\n    onClick: PropTypes.func,\n    onLongPress: PropTypes.func,\n    onMenuLongPress: PropTypes.func,\n    onWheelClick: PropTypes.func,\n    onChangeEnd: PropTypes.func,\n    min: PropTypes.number,\n    max: PropTypes.number,\n    step: PropTypes.number,\n    log: PropTypes.bool,\n    width: PropTypes.number,\n    height: PropTypes.number,\n    thickness: PropTypes.number,\n    lineCap: PropTypes.oneOf(['butt', 'round']),\n    bgColor: PropTypes.string,\n    fgColor: PropTypes.string,\n    inputColor: PropTypes.string,\n    font: PropTypes.string,\n    fontWeight: PropTypes.string,\n    clockwise: PropTypes.bool,\n    cursor: PropTypes.oneOfType([PropTypes.number, PropTypes.bool]),\n    stopper: PropTypes.bool,\n    disableTextInput: PropTypes.bool,\n    displayInput: PropTypes.bool,\n    displayCustom: PropTypes.func,\n    angleArc: PropTypes.number,\n    angleOffset: PropTypes.number,\n    className: PropTypes.string,\n    canvasClassName: PropTypes.string,\n  };\n\n  static defaultProps = {\n    onChangeEnd: () => {},\n    onWheelClick: () => {},\n    onClick: () => {},\n    onLongPress: () => {},\n    onMenuLongPress: () => {},\n    min: 0,\n    max: 100,\n    step: 1,\n    log: false,\n    width: 200,\n    height: 200,\n    thickness: 0.35,\n    lineCap: 'butt',\n    bgColor: '#EEE',\n    fgColor: '#EA2',\n    inputColor: '',\n    font: 'Arial',\n    fontWeight: 'bold',\n    clockwise: true,\n    cursor: false,\n    stopper: true,\n    disableTextInput: false,\n    displayInput: true,\n    angleArc: 360,\n    angleOffset: 0,\n    className: null,\n    canvasClassName: null,\n  };\n\n  constructor(props) {\n    super(props);\n    this.w = this.props.width || 200;\n    this.h = this.props.height || this.w;\n    this.cursorExt = this.props.cursor === true ? 0.3 : this.props.cursor / 100;\n    this.angleArc = (this.props.angleArc * Math.PI) / 180;\n    this.angleOffset = (this.props.angleOffset * Math.PI) / 180;\n    this.startAngle = 1.5 * Math.PI + this.angleOffset;\n    this.endAngle = 1.5 * Math.PI + this.angleOffset + this.angleArc;\n    this.digits =\n      Math.max(\n        String(Math.abs(this.props.min)).length,\n        String(Math.abs(this.props.max)).length,\n        2\n      ) + 2;\n    this.centerButtonRef = createRef();\n  }\n\n  handleLongPress = (e) => {\n    e.preventDefault();\n    e.target.setAttribute('longpress', new Date().getTime());\n    this.props.onLongPress(e);\n    return false;\n  };\n\n  handleMenuLongPress = (e) => {\n    this.props.onMenuLongPress(e);\n  };\n\n  handleWheelLongPress = (e) => {\n    e.preventDefault();\n    e.target.setAttribute('longpress', new Date().getTime());\n\n    const rect = e.target.getBoundingClientRect();\n    const x = e.detail.clientX - rect.left;\n    const y = e.detail.clientY - rect.top;\n    const rectWidth = rect.width;\n    const quadrant = this.findClickQuadrant(rectWidth, x, y);\n\n    if (quadrant === 1) {\n      this.handleMenuLongPress(e);\n    }\n  };\n\n  componentDidMount() {\n    const isTouchEnabled =\n      'ontouchstart' in window ||\n      navigator.maxTouchPoints > 0 ||\n      navigator.msMaxTouchPoints > 0;\n\n    this.drawCanvas();\n    if (isTouchEnabled) {\n      this.canvasRef.addEventListener('touchstart', this.handleTouchStart);\n    } else {\n      this.canvasRef.addEventListener('mousedown', this.handleMouseDown);\n    }\n    this.centerButtonRef.current.addEventListener(\n      'long-press',\n      this.handleLongPress\n    );\n\n    this.canvasRef.addEventListener('long-press', this.handleWheelLongPress);\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.width && this.w !== nextProps.width) {\n      this.w = nextProps.width;\n    }\n    if (nextProps.height && this.h !== nextProps.height) {\n      this.h = nextProps.height;\n    }\n  }\n\n  componentDidUpdate() {\n    this.drawCanvas();\n  }\n\n  componentWillUnmount() {\n    this.canvasRef.removeEventListener('touchstart', this.handleTouchStart);\n    this.centerButtonRef.current.removeEventListener(\n      'long-press',\n      this.handleLongPress\n    );\n  }\n\n  getArcToValue = (v) => {\n    let startAngle;\n    let endAngle;\n    const angle = !this.props.log\n      ? ((v - this.props.min) * this.angleArc) /\n        (this.props.max - this.props.min)\n      : Math.log(Math.pow(v / this.props.min, this.angleArc)) /\n        Math.log(this.props.max / this.props.min);\n    if (!this.props.clockwise) {\n      startAngle = this.endAngle + 0.00001;\n      endAngle = startAngle - angle - 0.00001;\n    } else {\n      startAngle = this.startAngle - 0.00001;\n      endAngle = startAngle + angle + 0.00001;\n    }\n    if (this.props.cursor) {\n      startAngle = endAngle - this.cursorExt;\n      endAngle += this.cursorExt;\n    }\n    return {\n      startAngle,\n      endAngle,\n      acw: !this.props.clockwise && !this.props.cursor,\n    };\n  };\n\n  // Calculate ratio to scale canvas to avoid blurriness on HiDPI devices\n  getCanvasScale = (ctx) => {\n    const devicePixelRatio =\n      window.devicePixelRatio ||\n      window.screen.deviceXDPI / window.screen.logicalXDPI || // IE10\n      1;\n    const backingStoreRatio = ctx.webkitBackingStorePixelRatio || 1;\n    return devicePixelRatio / backingStoreRatio;\n  };\n\n  coerceToStep = (v) => {\n    let val = !this.props.log\n      ? ~~((v < 0 ? -0.5 : 0.5) + v / this.props.step) * this.props.step\n      : Math.pow(\n          this.props.step,\n          ~~(\n            (Math.abs(v) < 1 ? -0.5 : 0.5) +\n            Math.log(v) / Math.log(this.props.step)\n          )\n        );\n    val = Math.max(Math.min(val, this.props.max), this.props.min);\n    if (isNaN(val)) {\n      val = 0;\n    }\n    return Math.round(val * 1000) / 1000;\n  };\n\n  eventToValue = (e) => {\n    const bounds = this.canvasRef.getBoundingClientRect();\n    const x = e.clientX - bounds.left;\n    const y = e.clientY - bounds.top;\n    let a = Math.atan2(x - this.w / 2, this.w / 2 - y) - this.angleOffset;\n    if (!this.props.clockwise) {\n      a = this.angleArc - a - 2 * Math.PI;\n    }\n    if (this.angleArc !== Math.PI * 2 && a < 0 && a > -0.5) {\n      a = 0;\n    } else if (a < 0) {\n      a += Math.PI * 2;\n    }\n    const val = !this.props.log\n      ? (a * (this.props.max - this.props.min)) / this.angleArc + this.props.min\n      : Math.pow(this.props.max / this.props.min, a / this.angleArc) *\n        this.props.min;\n    return this.coerceToStep(val);\n  };\n\n  handleMouseDown = (e) => {\n    this.props.onChange(this.eventToValue(e));\n    document.addEventListener('mousemove', this.handleMouseMove);\n    document.addEventListener('mouseup', this.handleMouseUpNoMove);\n  };\n\n  handleTouchStart = (e) => {\n    this.props.onChange(this.eventToValue(e));\n    document.addEventListener('touchmove', this.handleTouchMove);\n    document.addEventListener('touchend', this.handleTouchEndNoMove);\n    document.removeEventListener('mousedown', this.handleMouseDown);\n  };\n\n  handleMouseMove = (e) => {\n    e.preventDefault();\n    const val = this.eventToValue(e);\n\n    if (val !== this.props.value) {\n      this.props.onChange(this.eventToValue(e));\n    }\n\n    document.removeEventListener('mouseup', this.handleMouseUpNoMove);\n    document.addEventListener('mouseup', this.handleMouseUp);\n  };\n\n  handleTouchMove = (e) => {\n    e.preventDefault();\n    const touchIndex = e.targetTouches.length - 1;\n    const val = this.eventToValue(e.targetTouches[touchIndex]);\n\n    if (val !== this.props.value) {\n      this.props.onChange(val);\n    }\n\n    this.canvasRef.removeEventListener('long-press', this.handleWheelLongPress);\n    document.removeEventListener('touchend', this.handleTouchEndNoMove);\n    document.addEventListener('touchend', this.handleTouchEnd);\n  };\n\n  handleMouseUp = (e) => {\n    this.props.onChangeEnd(this.eventToValue(e));\n    document.removeEventListener('mousemove', this.handleMouseMove);\n    document.removeEventListener('mouseup', this.handleMouseUp);\n  };\n\n  handleTouchEnd = (e) => {\n    const touchIndex = e.targetTouches.length - 1;\n    this.props.onChangeEnd(e.targetTouches[touchIndex]);\n    document.removeEventListener('touchmove', this.handleTouchMove);\n    document.removeEventListener('touchend', this.handleTouchEnd);\n\n    this.canvasRef.addEventListener('long-press', this.handleWheelLongPress);\n  };\n\n  findClickQuadrant = (rectSize, x, y) => {\n    if (y < rectSize / 4) {\n      return 1;\n    } else if (y > rectSize * 0.75) {\n      return 2;\n    } else if (x < rectSize / 4) {\n      return 3;\n    } else if (x > rectSize * 0.75) {\n      return 4;\n    }\n    return -1;\n  };\n\n  handleMouseUpNoMove = (e) => {\n    const rect = e.target.getBoundingClientRect();\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n    const rectWidth = rect.width;\n    const quadrant = this.findClickQuadrant(rectWidth, x, y);\n    if (quadrant > 0 && quadrant <= 4) {\n      this.props.onWheelClick(quadrant);\n    }\n\n    document.removeEventListener('mousemove', this.handleMouseMove);\n    document.removeEventListener('mouseup', this.handleMouseUp);\n    document.removeEventListener('mouseup', this.handleMouseUpNoMove);\n  };\n\n  handleTouchEndNoMove = (e) => {\n    const rect = e.target.getBoundingClientRect();\n    const touch = e.changedTouches[e.changedTouches.length - 1];\n    const x = touch.pageX - rect.left;\n    const y = touch.pageY - rect.top;\n    const rectWidth = rect.width;\n    const quadrant = this.findClickQuadrant(rectWidth, x, y);\n\n    if (quadrant > 0 && quadrant <= 4) {\n      this.props.onWheelClick(quadrant);\n    }\n\n    document.removeEventListener('touchmove', this.handleTouchMove);\n    document.removeEventListener('touchend', this.handleTouchEnd);\n    document.removeEventListener('touchend', this.handleTouchEndNoMove);\n  };\n\n  handleEsc = (e) => {\n    if (e.keyCode === 27) {\n      e.preventDefault();\n      this.handleMouseUp();\n    }\n  };\n\n  handleTextInput = (e) => {\n    const val =\n      Math.max(Math.min(+e.target.value, this.props.max), this.props.min) ||\n      this.props.min;\n    this.props.onChange(val);\n  };\n\n  handleWheel = (e) => {\n    e.preventDefault();\n    if (e.deltaX > 0 || e.deltaY > 0) {\n      this.props.onChange(\n        this.coerceToStep(\n          !this.props.log\n            ? this.props.value + this.props.step\n            : this.props.value * this.props.step\n        )\n      );\n    } else if (e.deltaX < 0 || e.deltaY < 0) {\n      this.props.onChange(\n        this.coerceToStep(\n          !this.props.log\n            ? this.props.value - this.props.step\n            : this.props.value / this.props.step\n        )\n      );\n    }\n  };\n\n  handleArrowKey = (e) => {\n    if (e.keyCode === 37 || e.keyCode === 40) {\n      e.preventDefault();\n      this.props.onChange(\n        this.coerceToStep(\n          !this.props.log\n            ? this.props.value - this.props.step\n            : this.props.value / this.props.step\n        )\n      );\n    } else if (e.keyCode === 38 || e.keyCode === 39) {\n      e.preventDefault();\n      this.props.onChange(\n        this.coerceToStep(\n          !this.props.log\n            ? this.props.value + this.props.step\n            : this.props.value * this.props.step\n        )\n      );\n    }\n  };\n\n  inputStyle = () => ({\n    width: `${(this.w / 2 + 4) >> 0}px`,\n    height: `${(this.w / 3) >> 0}px`,\n    position: 'absolute',\n    verticalAlign: 'middle',\n    marginTop: `${(this.w / 3) >> 0}px`,\n    marginLeft: `-${((this.w * 3) / 4 + 2) >> 0}px`,\n    border: 0,\n    outline: 'none',\n    background: 'none',\n    font: `${this.props.fontWeight} ${(this.w / this.digits) >> 0}px ${\n      this.props.font\n    }`,\n    textAlign: 'center',\n    color: this.props.inputColor || this.props.fgColor,\n    padding: '0px',\n    WebkitAppearance: 'none',\n    cursor: 'pointer',\n  });\n\n  drawCanvas() {\n    const ctx = this.canvasRef.getContext('2d');\n    const scale = this.getCanvasScale(ctx);\n    this.canvasRef.width = this.w * scale; // clears the canvas\n    this.canvasRef.height = this.h * scale;\n    ctx.scale(scale, scale);\n    this.xy = this.w / 2; // coordinates of canvas center\n    this.lineWidth = this.xy * this.props.thickness;\n    this.radius = this.xy - this.lineWidth / 2;\n    ctx.lineWidth = this.lineWidth;\n    ctx.lineCap = this.props.lineCap;\n    // background arc\n    ctx.beginPath();\n    ctx.strokeStyle = this.props.bgColor;\n    ctx.arc(\n      this.xy,\n      this.xy,\n      this.radius,\n      this.endAngle - 0.00001,\n      this.startAngle + 0.00001,\n      true\n    );\n    ctx.stroke();\n    // foreground arc\n    const a = this.getArcToValue(this.props.value);\n    ctx.beginPath();\n    ctx.strokeStyle = this.props.fgColor;\n    ctx.arc(this.xy, this.xy, this.radius, a.startAngle, a.endAngle, a.acw);\n    ctx.stroke();\n  }\n\n  render() {\n    const { canvasClassName, onClick } = this.props;\n\n    return (\n      <Container>\n        <CanvasContainer width={this.w} height={this.h}>\n          <Canvas\n            ref={(ref) => {\n              this.canvasRef = ref;\n            }}\n            className={canvasClassName}\n            style={{ width: '100%', height: '100%' }}\n          />\n          <CenterButton\n            ref={this.centerButtonRef}\n            onClick={onClick}\n            size={this.w}\n          />\n          <WheelButton top=\"8%\" margin=\"0 auto\" src=\"menu.svg\" />\n          <WheelButton right=\"8%\" margin=\"auto 0\" src=\"fast_forward.svg\" />\n          <WheelButton left=\"8%\" margin=\"auto 0\" src=\"rewind.svg\" />\n          <WheelButton bottom=\"8%\" margin=\"0 auto\" src=\"play_pause.svg\" />\n        </CanvasContainer>\n      </Container>\n    );\n  }\n}\n\nexport default Knob;\n","import { useCallback, useRef, useState } from 'react';\n\nimport { useEffectOnce, useEventListener } from 'hooks';\n\nimport Knob from './Knob';\n\nenum WHEEL_QUADRANT {\n  TOP = 1,\n  BOTTOM = 2,\n  LEFT = 3,\n  RIGHT = 4,\n}\n\nenum KEY_CODE {\n  ARROW_UP = 38,\n  ARROW_DOWN = 40,\n  ARROW_LEFT = 37,\n  ARROW_RIGHT = 39,\n  ESC = 27,\n  ENTER = 13,\n  SPACE = 32,\n}\n\nconst centerClickEvent = new Event('centerclick');\nconst centerLongClickEvent = new Event('centerlongclick');\nconst forwardScrollEvent = new Event('forwardscroll');\nconst backwardScrollEvent = new Event('backwardscroll');\nconst wheelClickEvent = new Event('wheelclick');\nconst menuClickEvent = new Event('menuclick');\nconst menuLongPressEvent = new Event('menulongpress');\nconst backClickEvent = new Event('backclick');\nconst forwardClickEvent = new Event('forwardclick');\nconst playPauseClickEvent = new Event('playpauseclick');\nconst idleEvent = new Event('idle');\n\nconst ScrollWheel = () => {\n  const [count, setCount] = useState(0);\n  const timeoutIdRef = useRef<any>();\n\n  const handleCenterClick = useCallback(\n    () => window.dispatchEvent(centerClickEvent),\n    []\n  );\n\n  const handleCenterLongPress = useCallback((e: any) => {\n    e.preventDefault();\n    window.dispatchEvent(centerLongClickEvent);\n  }, []);\n\n  const handleMenuLongPress = useCallback((e: any) => {\n    e.preventDefault();\n    window.dispatchEvent(menuLongPressEvent);\n  }, []);\n\n  const handleClockwiseScroll = useCallback(\n    () => window.dispatchEvent(forwardScrollEvent),\n    []\n  );\n\n  const handleCounterClockwiseScroll = useCallback(() => {\n    window.dispatchEvent(backwardScrollEvent);\n  }, []);\n\n  const handleResetIdleCheck = useCallback(() => {\n    clearTimeout(timeoutIdRef.current);\n\n    timeoutIdRef.current = setTimeout(() => {\n      window.dispatchEvent(idleEvent);\n    }, 10000);\n  }, []);\n\n  const handleWheelClick = useCallback(\n    (quadrant: number) => {\n      window.dispatchEvent(wheelClickEvent);\n\n      switch (quadrant) {\n        case WHEEL_QUADRANT.TOP:\n          window.dispatchEvent(menuClickEvent);\n          break;\n        case WHEEL_QUADRANT.BOTTOM:\n          window.dispatchEvent(playPauseClickEvent);\n          break;\n        case WHEEL_QUADRANT.LEFT:\n          window.dispatchEvent(backClickEvent);\n          break;\n        case WHEEL_QUADRANT.RIGHT:\n          window.dispatchEvent(forwardClickEvent);\n          break;\n      }\n\n      handleResetIdleCheck();\n    },\n    [handleResetIdleCheck]\n  );\n\n  /** Allows for keyboard navigation. */\n  const handleKeyPress = useCallback(\n    (event: React.KeyboardEvent<HTMLDivElement>) => {\n      switch (event.keyCode) {\n        case KEY_CODE.ARROW_UP:\n        case KEY_CODE.ARROW_LEFT:\n          handleCounterClockwiseScroll();\n          break;\n        case KEY_CODE.ARROW_DOWN:\n        case KEY_CODE.ARROW_RIGHT:\n          handleClockwiseScroll();\n          break;\n        case KEY_CODE.ENTER:\n          handleCenterClick();\n          break;\n        case KEY_CODE.SPACE:\n          handleWheelClick(WHEEL_QUADRANT.BOTTOM);\n          break;\n        case KEY_CODE.ESC:\n          handleWheelClick(WHEEL_QUADRANT.TOP);\n          break;\n      }\n\n      handleResetIdleCheck();\n    },\n    [\n      handleResetIdleCheck,\n      handleCounterClockwiseScroll,\n      handleClockwiseScroll,\n      handleCenterClick,\n      handleWheelClick,\n    ]\n  );\n\n  /** Determine if clockwise/counter-clockwise based on the Knob onChange value. */\n  const handleScroll = useCallback(\n    (val: number) => {\n      if (val === 0 && count === 100) {\n        handleClockwiseScroll();\n      } else if (val === 100 && count === 0) {\n        handleCounterClockwiseScroll();\n      } else if (val > count) {\n        handleClockwiseScroll();\n      } else if (val < count) {\n        handleCounterClockwiseScroll();\n      }\n      setCount(val);\n\n      handleResetIdleCheck();\n    },\n    [\n      count,\n      handleClockwiseScroll,\n      handleCounterClockwiseScroll,\n      handleResetIdleCheck,\n    ]\n  );\n\n  useEventListener('keydown', handleKeyPress);\n\n  /**\n   * Start the countdown for detecting when the user is idle,\n   * in which case we'll show the Now Playing view if music is playing\n   */\n  useEffectOnce(handleResetIdleCheck);\n\n  return (\n    <Knob\n      value={count}\n      min={0}\n      max={100}\n      width={220}\n      height={220}\n      step={5}\n      fgColor=\"transparent\"\n      bgColor={'white'}\n      thickness={0.6}\n      onClick={handleCenterClick}\n      onLongPress={handleCenterLongPress}\n      onMenuLongPress={handleMenuLongPress}\n      onWheelClick={handleWheelClick}\n      onChange={handleScroll}\n    />\n  );\n};\n\nexport default ScrollWheel;\n","import { useMemo } from 'react';\n\nimport { slideUpAnimation } from 'animation';\nimport { SelectableListOption } from 'components';\nimport { WINDOW_TYPE } from 'components/views';\nimport { motion } from 'framer-motion';\nimport {\n  useEventListener,\n  useMenuHideWindow,\n  useScrollHandler,\n  useWindowContext,\n} from 'hooks';\nimport { WindowOptions } from 'providers/WindowProvider';\nimport styled, { css } from 'styled-components';\nimport { Unit } from 'utils/constants';\n\ninterface RootContainerProps {\n  index: number;\n}\n\n/** Responsible for putting the window at the proper z-index. */\nexport const RootContainer = styled(motion.div)<RootContainerProps>`\n  z-index: ${(props) => props.index};\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n`;\n\ninterface ContentTransitionContainerProps {\n  isHidden: boolean;\n}\n\n/** Slides the view in from the bottom if it is at the top of the stack. */\nconst ContentTransitionContainer = styled.div<ContentTransitionContainerProps>`\n  position: relative;\n  width: 100%;\n  padding: ${Unit.XS} 0;\n  background: linear-gradient(180deg, #bbbcbf 0%, #626770 11.69%, #626770 100%);\n  box-shadow: 0 0px 4px black;\n`;\n\nconst OptionText = styled.h3`\n  margin: 0;\n  padding: ${Unit.XS} ${Unit.XXS};\n  font-size: 16px;\n  background: linear-gradient(180deg, #ffffff 0%, #cbccce 48.44%, #dfdfdf 100%);\n  border: 3px solid #3e4249;\n  border-radius: 12px;\n  text-shadow: 0px 0px 1px #505050;\n`;\n\nconst OptionContainer = styled.div<{ highlighted: boolean }>`\n  padding: ${Unit.XXS} ${Unit.MD};\n  text-align: center;\n  border: 3px solid transparent;\n\n  ${({ highlighted }) =>\n    highlighted &&\n    css`\n      ${OptionText} {\n        background: linear-gradient(\n          rgb(60, 184, 255) 0%,\n          rgb(52, 122, 181) 100%\n        ) !important;\n        color: white !important;\n        border: 3px solid #ececec;\n      }\n    `};\n\n  :last-of-type {\n    margin-top: ${Unit.XXS};\n\n    ${OptionText} {\n      background: linear-gradient(\n        180deg,\n        #707379 0%,\n        #3b3f46 48.44%,\n        #363c44 100%\n      );\n      color: white;\n    }\n  }\n`;\n\ninterface Props {\n  windowStack: WindowOptions[];\n  index: number;\n  isHidden: boolean;\n}\n\nconst ActionSheet = ({ windowStack, index, isHidden }: Props) => {\n  const { hideWindow } = useWindowContext();\n  const windowOptions = windowStack[index];\n  useMenuHideWindow(windowOptions.id);\n\n  const options: SelectableListOption[] = useMemo(() => {\n    const listOptions =\n      windowOptions.type === WINDOW_TYPE.ACTION_SHEET\n        ? windowOptions.listOptions\n        : [];\n\n    return [\n      ...listOptions,\n      {\n        type: 'Action',\n        label: 'Cancel',\n        onSelect: () => {},\n      },\n    ];\n  }, [windowOptions]);\n\n  useEventListener('centerclick', () => {\n    hideWindow();\n  });\n\n  const [scrollIndex] = useScrollHandler(windowOptions.id, options);\n\n  return (\n    <RootContainer\n      data-window-id={windowOptions.id}\n      index={index}\n      {...slideUpAnimation}\n    >\n      <ContentTransitionContainer isHidden={isHidden}>\n        {options.map((option, i) => (\n          <OptionContainer\n            key={`popup-option-${option.label}`}\n            highlighted={scrollIndex === i}\n          >\n            <OptionText>{option.label}</OptionText>\n          </OptionContainer>\n        ))}\n      </ContentTransitionContainer>\n    </RootContainer>\n  );\n};\n\nexport default ActionSheet;\n","import { AnimatePresence } from 'framer-motion';\nimport { WindowOptions } from 'providers/WindowProvider';\nimport styled from 'styled-components';\n\nimport ActionSheet from '../components/ActionSheet';\n\ninterface ContainerProps {\n  isHidden: boolean;\n}\n\nconst RootContainer = styled.div<ContainerProps>`\n  z-index: 4;\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  background: ${({ isHidden }) =>\n    isHidden ? 'transparent' : 'rgba(0, 0, 0, 0.5)'};\n  transition: all 0.25s ease;\n`;\n\ninterface Props {\n  windowStack: WindowOptions[];\n}\n\nconst ActionSheetWindowManager = ({ windowStack }: Props) => {\n  const isHidden = windowStack.length === 0;\n\n  return (\n    <RootContainer data-stack-type=\"action-sheet\" isHidden={isHidden}>\n      <AnimatePresence>\n        {windowStack.map((window, index) => (\n          <ActionSheet\n            key={`window-${window.id}`}\n            windowStack={windowStack}\n            index={index}\n            isHidden={index < windowStack.length - 1}\n          />\n        ))}\n      </AnimatePresence>\n    </RootContainer>\n  );\n};\n\nexport default ActionSheetWindowManager;\n","import { fade } from 'animation';\nimport { Header } from 'components';\nimport { WINDOW_TYPE } from 'components/views';\nimport { AnimatePresence, motion } from 'framer-motion';\nimport { WindowOptions } from 'providers/WindowProvider';\nimport styled from 'styled-components';\n\nconst Container = styled(motion.div)`\n  z-index: 0;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n`;\n\ninterface Props {\n  window?: WindowOptions;\n}\n\nconst CoverFlowWindowManager = ({ window }: Props) => {\n  const WindowComponent =\n    window?.type === WINDOW_TYPE.COVER_FLOW ? window.component : null;\n\n  return (\n    <AnimatePresence>\n      {!!WindowComponent && (\n        <Container {...fade} data-stack-type=\"coverflow\">\n          <Header />\n          <WindowComponent />\n        </Container>\n      )}\n    </AnimatePresence>\n  );\n};\n\nexport default CoverFlowWindowManager;\n","import { useMemo } from 'react';\n\nimport { popInAnimation } from 'animation';\nimport { SelectableListOption } from 'components';\nimport { WINDOW_TYPE } from 'components/views';\nimport { motion } from 'framer-motion';\nimport {\n  useEventListener,\n  useMenuHideWindow,\n  useScrollHandler,\n  useWindowContext,\n} from 'hooks';\nimport { WindowOptions } from 'providers/WindowProvider';\nimport styled, { css } from 'styled-components';\nimport { Unit } from 'utils/constants';\n\ninterface RootContainerProps {\n  index: number;\n}\n\n/** Responsible for putting the window at the proper z-index. */\nexport const RootContainer = styled(motion.div)<RootContainerProps>`\n  z-index: ${(props) => props.index};\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\ninterface ContentTransitionContainerProps {\n  isHidden: boolean;\n}\n\n/** Slides the view in from the bottom if it is at the top of the stack. */\nconst ContentTransitionContainer = styled.div<ContentTransitionContainerProps>`\n  position: relative;\n  background: linear-gradient(\n    180deg,\n    #a2a8b7 0%,\n    rgba(38, 52, 88, 0.92) 20.6%,\n    #28365a 100%\n  );\n  width: 80%;\n  padding: ${Unit.XXS};\n  box-shadow: 0px 6px 5px rgba(0, 0, 0, 0.39);\n  border: 2.5px solid white;\n  border-radius: 12px;\n  color: white;\n  font-weight: 500;\n  text-align: center;\n`;\n\nconst TitleText = styled.h3`\n  margin: ${Unit.XS} 0 ${Unit.XS};\n  font-size: 16px;\n`;\n\nconst DescriptionText = styled(TitleText)`\n  margin: ${Unit.XS} 0 ${Unit.XS};\n  font-size: 14px;\n  font-weight: 400;\n`;\n\nconst OptionsContainer = styled.div`\n  display: flex;\n`;\n\nconst OptionText = styled.h3`\n  margin: 0;\n  padding: ${Unit.XS} ${Unit.XXS};\n  font-size: 16px;\n  background: linear-gradient(180deg, #8c94a8 0%, #334164 44.97%, #445070 100%);\n  border: 2px solid #242e47;\n  border-radius: 8px;\n\n  text-shadow: 0px 0px 1px #505050;\n`;\n\nconst OptionContainer = styled.div<{ highlighted: boolean }>`\n  flex: 1;\n  text-align: center;\n  border: 2px solid transparent;\n  margin-top: 8px;\n\n  ${({ highlighted }) =>\n    highlighted &&\n    css`\n      ${OptionText} {\n        border: 2px solid #ececec;\n        filter: brightness(120%);\n      }\n    `};\n`;\n\ninterface Props {\n  windowStack: WindowOptions[];\n  index: number;\n  isHidden: boolean;\n}\n\nconst Popup = ({ windowStack, index, isHidden }: Props) => {\n  const windowOptions = windowStack[index];\n  useMenuHideWindow(windowOptions.id);\n  const { hideWindow } = useWindowContext();\n\n  if (windowOptions.type !== WINDOW_TYPE.POPUP) {\n    throw new Error('Popup option not supplied');\n  }\n\n  const listOptions: SelectableListOption[] = useMemo(() => {\n    const listOptions =\n      windowOptions.type === WINDOW_TYPE.POPUP ? windowOptions.listOptions : [];\n\n    return listOptions.length\n      ? listOptions\n      : [\n          {\n            type: 'Action',\n            label: 'Done',\n            onSelect: () => {},\n          },\n        ];\n  }, [windowOptions.listOptions, windowOptions.type]);\n\n  const [scrollIndex] = useScrollHandler(windowOptions.id, listOptions);\n\n  useEventListener('centerclick', () => {\n    hideWindow();\n  });\n\n  return (\n    <RootContainer\n      data-window-id={windowOptions.id}\n      index={index}\n      {...popInAnimation}\n    >\n      <ContentTransitionContainer isHidden={isHidden}>\n        <TitleText>{windowOptions.title}</TitleText>\n        <DescriptionText>{windowOptions.description}</DescriptionText>\n        <OptionsContainer>\n          {listOptions.map((option, i) => (\n            <OptionContainer\n              key={`popup-option-${option.label}`}\n              highlighted={scrollIndex === i}\n            >\n              <OptionText>{option.label}</OptionText>\n            </OptionContainer>\n          ))}\n        </OptionsContainer>\n      </ContentTransitionContainer>\n    </RootContainer>\n  );\n};\n\nexport default Popup;\n","import { useMemo } from 'react';\n\nimport { noAnimation, slideRightAnimation } from 'animation';\nimport { WINDOW_TYPE } from 'components/views';\nimport { motion } from 'framer-motion';\nimport { useWindowContext } from 'hooks';\nimport { WindowOptions } from 'providers/WindowProvider';\nimport styled from 'styled-components';\n\ninterface ContainerProps {\n  index: number;\n  showHeader: boolean;\n}\n\n/** Responsible for putting the window at the proper z-index. */\nexport const Container = styled(motion.div)<ContainerProps>`\n  z-index: ${(props) => props.index};\n  position: absolute;\n  top: ${(props) => (props.showHeader ? '20px' : 0)};\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: white;\n`;\n\ninterface ContentTransitionContainerProps {\n  isHidden: boolean;\n}\n\n/** Slides the view to the left if it isn't at the top of the stack. */\nconst ContentTransitionContainer = styled.div<ContentTransitionContainerProps>`\n  height: 100%;\n  transition: transform 0.3s;\n  transform: ${(props) => props.isHidden && 'translateX(-100%)'};\n  overflow: auto;\n`;\n\ninterface Props {\n  windowStack: WindowOptions[];\n  index: number;\n  isHidden: boolean;\n}\n\nconst Window = ({ windowStack, index, isHidden }: Props) => {\n  const { headerTitle } = useWindowContext();\n  const options = windowStack[index];\n  const firstInStack = index === 0;\n\n  const WindowComponent = useMemo(() => {\n    switch (options.type) {\n      case WINDOW_TYPE.FULL:\n      case WINDOW_TYPE.SPLIT:\n      case WINDOW_TYPE.COVER_FLOW:\n        return options.component;\n      default:\n        return null;\n    }\n  }, [options]);\n\n  return (\n    <Container\n      data-window-id={options.id}\n      index={index}\n      showHeader={!!headerTitle}\n      {...(firstInStack ? noAnimation : slideRightAnimation)}\n    >\n      <ContentTransitionContainer isHidden={isHidden}>\n        <WindowComponent />\n      </ContentTransitionContainer>\n    </Container>\n  );\n};\n\nexport default Window;\n","import { Header } from 'components';\nimport { AnimatePresence } from 'framer-motion';\nimport { WindowOptions } from 'providers/WindowProvider';\nimport styled from 'styled-components';\n\nimport { Window } from '../components';\n\ninterface ContainerProps {\n  isHidden: boolean;\n}\n\nconst Container = styled.div<ContainerProps>`\n  z-index: 3;\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  background: white;\n  transition: all 0.35s;\n  transform: ${(props) => props.isHidden && 'translateX(100%)'};\n`;\n\ninterface Props {\n  windowStack: WindowOptions[];\n}\n\nconst FullScreenWindowManager = ({ windowStack }: Props) => {\n  const isHidden = windowStack.length === 0;\n\n  return (\n    <Container data-stack-type=\"fullscreen\" isHidden={isHidden}>\n      <Header />\n      <AnimatePresence>\n        {windowStack.map((window, index) => (\n          <Window\n            key={`window-${window.id}`}\n            windowStack={windowStack}\n            index={index}\n            isHidden={index < windowStack.length - 1}\n          />\n        ))}\n      </AnimatePresence>\n    </Container>\n  );\n};\n\nexport default FullScreenWindowManager;\n","import { AnimatePresence } from 'framer-motion';\nimport { WindowOptions } from 'providers/WindowProvider';\nimport styled from 'styled-components';\n\nimport Popup from '../components/Popup';\n\ninterface ContainerProps {\n  isHidden: boolean;\n}\n\nconst RootContainer = styled.div<ContainerProps>`\n  z-index: 4;\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  background: ${({ isHidden }) =>\n    isHidden ? 'transparent' : 'rgba(0, 0, 0, 0.3)'};\n  transition: all 0.25s ease;\n`;\n\ninterface Props {\n  windowStack: WindowOptions[];\n}\n\nconst PopupWindowManager = ({ windowStack }: Props) => {\n  const isHidden = windowStack.length === 0;\n\n  return (\n    <RootContainer data-stack-type=\"popup\" isHidden={isHidden}>\n      <AnimatePresence>\n        {windowStack.map((window, index) => (\n          <Popup\n            key={`window-${window.id}`}\n            windowStack={windowStack}\n            index={index}\n            isHidden={index < windowStack.length - 1}\n          />\n        ))}\n      </AnimatePresence>\n    </RootContainer>\n  );\n};\n\nexport default PopupWindowManager;\n","import { PREVIEW, Previews } from 'components/previews';\nimport { AnimatePresence } from 'framer-motion';\nimport { useWindowContext } from 'hooks';\nimport styled, { css } from 'styled-components';\n\ninterface ContainerProps {\n  isHidden: boolean;\n}\n\nconst Container = styled.div<ContainerProps>`\n  z-index: 0;\n  position: relative;\n  flex: 0 0 50%;\n  background: white;\n  transition: all 0.35s;\n\n  ${(props) =>\n    props.isHidden &&\n    css`\n      transform: translateX(100%);\n      opacity: 0;\n      overflow: hidden;\n    `};\n`;\n\ninterface Props {\n  isHidden: boolean;\n}\n\nconst PreviewPanel = ({ isHidden }: Props) => {\n  const { preview } = useWindowContext();\n  const PreviewComponent = Previews[preview];\n\n  return (\n    <Container isHidden={isHidden}>\n      <AnimatePresence>\n        {/* Music preview slides in, whereas the other previews simply appear. */}\n        {preview === PREVIEW.MUSIC && <PreviewComponent />}\n      </AnimatePresence>\n      {preview !== PREVIEW.MUSIC && <PreviewComponent />}\n    </Container>\n  );\n};\n\nexport default PreviewPanel;\n","import { Header } from 'components';\nimport { AnimatePresence } from 'framer-motion';\nimport { WindowOptions } from 'providers/WindowProvider';\nimport styled, { css } from 'styled-components';\n\nimport { Window } from '../components';\nimport PreviewPanel from './PreviewPanel';\n\nconst Container = styled.div`\n  z-index: 2;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  display: flex;\n`;\n\ninterface PanelProps {\n  isHidden: boolean;\n}\n\nconst LeftPanel = styled.div<PanelProps>`\n  z-index: 1;\n  position: relative;\n  flex: 0 0 50%;\n  box-shadow: 0 0 24px black;\n  transition: all 0.35s;\n  overflow: hidden;\n\n  ${(props) =>\n    props.isHidden &&\n    css`\n      transition-delay: 0.05s;\n      transform: translateX(-100%);\n      box-shadow: none;\n    `};\n`;\n\ninterface Props {\n  windowStack: WindowOptions[];\n  menuHidden: boolean;\n  allHidden: boolean;\n}\n\nconst SplitScreenWindowManager = ({\n  windowStack,\n  menuHidden,\n  allHidden,\n}: Props) => {\n  return (\n    <Container data-stack-type=\"splitscreen\">\n      <LeftPanel isHidden={menuHidden || allHidden}>\n        <Header />\n        <AnimatePresence>\n          {windowStack.map((window, index) => (\n            <Window\n              key={`window-${window.id}`}\n              windowStack={windowStack}\n              index={index}\n              isHidden={index < windowStack.length - 1}\n            />\n          ))}\n        </AnimatePresence>\n      </LeftPanel>\n      <PreviewPanel isHidden={allHidden} />\n    </Container>\n  );\n};\n\nexport default SplitScreenWindowManager;\n","import { ErrorScreen } from 'components';\nimport { WINDOW_TYPE } from 'components/views';\nimport { useEventListener, useMusicKit, useWindowContext } from 'hooks';\nimport styled from 'styled-components';\n\nimport ActionSheetWindowManager from './ActionSheetWindowManager';\nimport CoverFlowWindowManager from './CoverFlowWindowManager';\nimport FullScreenWindowManager from './FullScreenWindowManager';\nimport PopupWindowManager from './PopupWindowManager';\nimport SplitScreenWindowManager from './SplitScreenWindowManager';\n\n/** Prevents the user from scrolling the display with a mouse. */\nconst Mask = styled.div`\n  z-index: 100;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n`;\n\nconst WindowManager = () => {\n  const { isConfigured, hasDevToken: hasAppleDevToken } = useMusicKit();\n  const { windowStack, resetWindows } = useWindowContext();\n  const splitViewWindows = windowStack.filter(\n    (window) => window.type === WINDOW_TYPE.SPLIT\n  );\n  const fullViewWindows = windowStack.filter(\n    (window) => window.type === WINDOW_TYPE.FULL\n  );\n  const coverFlowWindow = windowStack.find(\n    (window) => window.type === WINDOW_TYPE.COVER_FLOW\n  );\n  const actionSheetWindows = windowStack.filter(\n    (window) => window.type === WINDOW_TYPE.ACTION_SHEET\n  );\n  const popupWindows = windowStack.filter(\n    (window) => window.type === WINDOW_TYPE.POPUP\n  );\n\n  const isReady = isConfigured && hasAppleDevToken;\n\n  useEventListener('menulongpress', resetWindows);\n\n  return (\n    <div>\n      {isReady ? (\n        <>\n          <CoverFlowWindowManager window={coverFlowWindow} />\n          <SplitScreenWindowManager\n            windowStack={splitViewWindows}\n            menuHidden={fullViewWindows.length > 0}\n            allHidden={!!coverFlowWindow}\n          />\n          <FullScreenWindowManager windowStack={fullViewWindows} />\n          <ActionSheetWindowManager windowStack={actionSheetWindows} />\n          <PopupWindowManager windowStack={popupWindows} />\n        </>\n      ) : (\n        <ErrorScreen message={'Missing developer token'} />\n      )}\n      <Mask />\n    </div>\n  );\n};\n\nexport default WindowManager;\n","import * as React from 'react';\n\nimport { ScrollWheel } from 'components';\nimport {\n  AudioPlayerProvider,\n  MusicKitProvider,\n  SettingsProvider,\n  SpotifySDKProvider,\n} from 'hooks';\nimport WindowProvider from 'providers/WindowProvider';\nimport styled, { createGlobalStyle } from 'styled-components';\nimport { Screen, Unit } from 'utils/constants';\n\nimport { WindowManager } from './components';\n\nconst GlobalStyles = createGlobalStyle`\n  * {\n    box-sizing: border-box;\n  }\n\n   body {\n      font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\";\n      font-size: 16px;\n      user-select: none;\n      -webkit-touch-callout: none;\n\n      @media (prefers-color-scheme: dark) {\n        background: black;\n      }\n   }\n`;\n\nconst Container = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  @media screen and (min-width: 750px) {\n    height: 100vh;\n    display: flex;\n  }\n`;\n\nconst Shell = styled.div`\n  position: relative;\n  height: 100vh;\n  margin: auto;\n  max-height: 36.5em;\n  width: 370px;\n  border-radius: 30px;\n  box-shadow: inset 0 0 2.4em #555;\n  background: linear-gradient(180deg, #e3e3e3 0%, #d6d6d6 100%);\n  -webkit-box-reflect: below 0px -webkit-gradient(linear, left top, left bottom, from(transparent), color-stop(50%, transparent), to(rgba(250, 250, 250, 0.3)));\n  animation: descend 1.5s ease;\n\n  @media (prefers-color-scheme: dark) {\n    box-shadow: inset 0 0 2.4em black;\n  }\n\n  @media screen and (max-width: 400px) {\n    animation: none;\n    border-radius: 0;\n    -webkit-box-reflect: unset;\n  }\n\n  @keyframes descend {\n    0% {\n      transform: scale(0.3);\n      opacity: 0;\n    }\n\n    100% {\n      transform: scale(1);\n      opacity: 1;\n    }\n  }\n`;\n\nconst ScreenContainer = styled.div`\n  position: relative;\n  height: 260px;\n  margin: ${Unit.LG} ${Unit.LG} ${Unit.XL};\n  border: 4px solid black;\n  border-radius: ${Unit.XS};\n  overflow: hidden;\n  background: white;\n  animation: fadeFromBlack 0.5s;\n\n  @keyframes fadeFromBlack {\n    0% {\n      filter: brightness(0);\n    }\n  }\n\n  ${Screen.SM} {\n    @media screen and (max-height: 750px) {\n      margin: ${Unit.SM} ${Unit.SM} ${Unit.XL};\n    }\n  }\n`;\n\nconst App: React.FC = () => {\n  return (\n    <Container>\n      <GlobalStyles />\n      <SettingsProvider>\n        <Shell>\n          <ScreenContainer>\n            <SpotifySDKProvider>\n              <MusicKitProvider>\n                <AudioPlayerProvider>\n                  <WindowProvider>\n                    <WindowManager />\n                  </WindowProvider>\n                </AudioPlayerProvider>\n              </MusicKitProvider>\n            </SpotifySDKProvider>\n          </ScreenContainer>\n          <ScrollWheel />\n        </Shell>\n      </SettingsProvider>\n    </Container>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import ReactDOM from 'react-dom';\n\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}